var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{h(n.next(t))}catch(e){r(e)}}function a(t){try{h(n["throw"](t))}catch(e){r(e)}}function h(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(s,a)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},Button=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(eui.Button);__reflect(Button.prototype,"Button");var ImageIcon=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(eui.Image);__reflect(ImageIcon.prototype,"ImageIcon");var Component=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(eui.Component);__reflect(Component.prototype,"Component");var Label=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(eui.Label);__reflect(Label.prototype,"Label");var BasicComponent=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(t){this.addEventListener(eui.UIEvent.COMPLETE,this.onComplete,this),this.skinName=t},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.isCreateChildren=!0,this.init()},e.prototype.onComplete=function(){this.isLoadComplete=!0,this.init()},e.prototype.init=function(){this.isCreateChildren&&this.isLoadComplete&&this.render()},e.prototype.render=function(){},e.prototype.createBitmapByName=function(t,e){void 0===e&&(e=null);var i=new egret.Bitmap,n=RES.getRes(t);return i.texture=n,null!=e&&(i.scale9Grid=e),i},e.prototype.addKeyboardEvent=function(t,e){var i=this;document.addEventListener(t,function(n){e&&e({type:t,keyCode:n.keyCode,key:n.key,self:i})})},e}(Component);__reflect(BasicComponent.prototype,"BasicComponent");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),this.gameLoad=new moon.GameLoad,this.addChild(this.gameLoad)},e.prototype.onProgress=function(t,e){this.gameLoad.update(t/e)},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var control;!function(t){var e=function(){function t(t){this.stage=t}return t.prototype.open=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},t.prototype.close=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},t.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.posStart=new egret.Point(t.stageX,t.stageY),this.controlStart();break;case egret.TouchEvent.TOUCH_MOVE:this.posMove=new egret.Point(t.stageX,t.stageY),this.controlMove();break;case egret.TouchEvent.TOUCH_END:this.posEnd=new egret.Point(t.stageX,t.stageY),this.controlEnd()}},t.prototype.controlStart=function(){null!=this.startBackFun&&this.startBackFun(this.posStart),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},t.prototype.controlMove=function(){null!=this.moveBackFun&&this.moveBackFun(this.posMove)},t.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},t}();t.ControlBasic=e,__reflect(e.prototype,"control.ControlBasic");var i=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.controlBar=i,o.controlBg=n,o}return __extends(e,t),e.prototype.controlMove=function(){var t=this.posMove.x,e=this.posMove.y,i=this.controlBg,n=this.controlBar,o=i.x,r=i.y,s=t-o,a=e-r,h=Math.sqrt(s*s+a*a),c=i.width>>1,l=s/h,u=a/h;if(c>h?(n.x=t,n.y=e):(n.x=o+l*c,n.y=r+u*c),null!=this.moveBackFun){var d=new egret.Point(n.x-i.x,n.y-i.y);this.moveBackFun(d)}},e.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this);var t=this.controlBg,e=this.controlBar;e.x=t.x,e.y=t.y,null!=this.endBackFun&&this.endBackFun(this.posEnd)},e}(e);t.ControlBarMove=i,__reflect(i.prototype,"control.ControlBarMove");var n=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this);var t=this.posEnd.x-this.posStart.x,e=this.posEnd.y-this.posStart.y,i=new egret.Point(0,0);Math.abs(t)>Math.abs(e)?i.x=t>0?1:-1:i.y=e>0?1:-1,null!=this.endBackFun&&this.endBackFun(this.posEnd),null!=this.moveEndBackFun&&this.moveEndBackFun(i)},e}(e);t.ControlFingerMove=n,__reflect(n.prototype,"control.ControlFingerMove");var o=function(t){function e(e,i){var n=t.call(this,e)||this;return n.display=i,n.distance=new egret.Point,n}return __extends(e,t),Object.defineProperty(e.prototype,"target",{set:function(t){this.display=t},enumerable:!0,configurable:!0}),e.prototype.controlStart=function(){this.display.hitTestPoint(this.posStart.x,this.posStart.y)&&(t.prototype.controlStart.call(this),this.isDrag=!0,this.distance.x=this.posStart.x-this.display.x,this.distance.y=this.posStart.y-this.display.y)},e.prototype.controlMove=function(){this.isDrag&&(t.prototype.controlMove.call(this),this.display.x=this.posMove.x-this.distance.x,this.display.y=this.posMove.y-this.distance.y)},e.prototype.controlEnd=function(){this.isDrag=!1,t.prototype.controlEnd.call(this),null!=this.endBackFun&&this.endBackFun()},e}(e);t.ControlDrag=o,__reflect(o.prototype,"control.ControlDrag");var r=function(t){function e(e,i){var n=t.call(this,e)||this;n.nodes=[];for(var o=0;o<i.length;o++){var r=i[o],a=new s(r.display,r.backCall);n.nodes.push(a)}return n}return __extends(e,t),e.prototype.onTouch=function(e){this.id=e.touchPointID,t.prototype.onTouch.call(this,e)},e.prototype.check=function(t,e,i){for(var n=this.nodes,o=0;o<n.length;o++){var r=n[o];1==i?r.display.hitTestPoint(t,e)&&(r.id=this.id,r.backCall(i)):r.id==this.id&&(r.id=-1,r.backCall(i))}},e.prototype.controlStart=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.check(this.posStart.x,this.posStart.y,1)},e.prototype.controlEnd=function(){t.prototype.controlEnd.call(this),this.check(this.posEnd.x,this.posEnd.y,0)},e}(e);t.ControlMoreTab=r,__reflect(r.prototype,"control.ControlMoreTab");var s=function(){function t(t,e){this.display=t,this.backCall=e}return t}();t.MorePointNode=s,__reflect(s.prototype,"control.MorePointNode")}(control||(control={}));var Game=function(t){function e(){var e=t.call(this)||this;return e.score=0,e.blood=5,e.level=1,e.sizeMin=30,e.sizeMid=60,e.sizeMax=90,e.sizeCurr=0,e.checkArray=[],e.colors=[1,2,3,4,5,6],e.soundScore="star_collect_wav",e.soundDown="special_egg_wav",e.soundLevel="level_wav",e.setSkinName("resource/eui_skins/gameUI.exml"),e}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),moon.showLog.getIns().init(this.stage),SoundControl.getIns().addItem(this.soundScore),SoundControl.getIns().addItem(this.soundDown),SoundControl.getIns().addItem(this.soundLevel);for(var e=0;e<this.numChildren;e++){var i=this.getChildAt(e),n=i.name;"p9"==n&&(i.scaleX=i.scaleY=1.1,this.currPoint=new egret.Point(i.x,i.y))}this.addToStage(),this.updateBlood(),this.createOver()},e.prototype.createOver=function(){this.gameOver=new GameOver(this)},e.prototype.addToStage=function(){this.createMonePoint(),this.nodeMax=this.createContainer(),this.nodeMid=this.createContainer(),this.nodeMin=this.createContainer(),this.coltrolMove=new control.ControlDrag(this.stage,null),this.coltrolMove.endBackFun=this.endBackFun.bind(this),this.coltrolMove.open(),this.createNewCircle(),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},e.prototype.onTouch=function(t){this.target.parent&&this.target.parent.removeChild(this.target),this.blood--,this.updateBlood(),this.createNewCircle()},e.prototype.endBackFun=function(){for(var t=this.points,e=this.target,i=0;i<t.length;i++){var n=t[i],o=n.width/2,r=n.x-e.x,s=n.y-e.y,a=Math.sqrt(r*r+s*s);if(o>a&&(e.x=n.x,e.y=n.y,this.canPush(e,n.name)))return egret.Tween.get(e).to({scaleX:1,scaleY:1},200,egret.Ease.backIn),this.checkResult(e,n.name),this.createNewCircle(),void SoundControl.getIns().play(this.soundDown)}e.x=this.currPoint.x,e.y=this.currPoint.y},e.prototype.createContainer=function(){var t=new egret.Sprite;return this.addChild(t),t},e.prototype.createNewCircle=function(){var t=Math.random(),e=this.level+1;e=e>this.colors.length?this.colors.length:e;var i,n=this.colors[Math.floor(Math.random()*e)];i=t>.7?this.sizeMax:t>.4?this.sizeMid:this.sizeMin,this.target=this.createCircle(i,n),this.target.scaleX=this.target.scaleY=1.1,this.coltrolMove.target=this.target,this.checekOver()},e.prototype.createCircle=function(t,e){function i(t){n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,this.setColor(n,e)}this.sizeCurr=t;var n,o=new egret.Sprite;switch(t){case this.sizeMax:n=new eui.Image("circle_max_png");break;case this.sizeMid:n=new eui.Image("circle_mid_png");break;case this.sizeMin:n=new eui.Image("circle_min_png")}switch(o.alpha=.8,o.addChild(n),o.x=this.currPoint.x,o.y=this.currPoint.y,o.name=e+"_"+t,n.addEventListener(egret.Event.COMPLETE,i,this),t){case this.sizeMax:this.nodeMax.addChild(o);break;case this.sizeMid:this.nodeMid.addChild(o);break;case this.sizeMin:this.nodeMin.addChild(o)}return o},e.prototype.setColor=function(t,e){e==this.colors[0]?t.filters=[new egret.ColorMatrixFilter([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0])]:e==this.colors[1]?t.filters=[new egret.ColorMatrixFilter([0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0])]:e==this.colors[2]?t.filters=[new egret.ColorMatrixFilter([0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0])]:e==this.colors[3]?t.filters=[new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0])]:e==this.colors[4]?t.filters=[new egret.ColorMatrixFilter([1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0])]:e==this.colors[5]&&(t.filters=[new egret.ColorMatrixFilter([0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0])])},e.prototype.createMonePoint=function(){for(var t=[],e=0;9>e;e++){var i=this.createPoint();i.name=""+Math.floor(e/3)+e%3;var n=this.getChildByName("p"+e);n.alpha=.5,i.x=n.x,i.y=n.y,i.alpha=.2,t.push(i),this.addChild(i)}for(this.points=t,e=0;3>e;e++){for(var o=[],r=0;3>r;r++)o.push([]);this.checkArray.push(o)}},e.prototype.createPoint=function(){var t=new egret.Sprite;return t.graphics.lineStyle(1),t.graphics.drawCircle(0,0,this.sizeMax),t.graphics.endFill(),t.graphics.beginFill(0),t.graphics.drawCircle(0,0,5),t.graphics.endFill(),this.addChild(t),t},e.prototype.canPush=function(t,e){for(var i=parseInt(e.substr(0,1)),n=parseInt(e.substr(1,1)),o=this.checkArray[i][n],i=0;i<o.length;i++){var r=o[i];if(r.name.split("_")[1]==t.name.split("_")[1])return!1}return!0},e.prototype.checkResult=function(t,e){var i,n=parseInt(e.substr(0,1)),o=parseInt(e.substr(1,1)),r=this.checkArray[n][o];if(r.push(t),3==r.length){var s=r[0].name.split("_")[0],a=r[1].name.split("_")[0],h=r[2].name.split("_")[0];if(s==a&&a==h)for(;r.length>0;)i=r[0],this.tweenTarget(i),r.splice(0,1)}var c=this.checkArray,l=c[n][0],u=c[n][1],d=c[n][2];this.checkThreeArray(l,u,d),l=c[0][o],u=c[1][o],d=c[2][o],this.checkThreeArray(l,u,d),n==o&&(l=c[0][0],u=c[1][1],d=c[2][2],this.checkThreeArray(l,u,d)),n+o==2&&(l=c[0][2],u=c[1][1],d=c[2][0],this.checkThreeArray(l,u,d))},e.prototype.removeNode=function(t){t.parent.removeChild(t)},e.prototype.checkThreeArray=function(t,e,i){for(var n=0;n<t.length;n++){for(var o=1,r=0,s=0,a=t[n],h=a.name.split("_")[0],c=[a],l=0;l<t.length;l++){var u=t[l],d=u.name.split("_")[0];l!=n&&h==d&&c.push(u)}for(var l=0;l<e.length;l++){var p=e[l],g=p.name.split("_")[0];h==g&&(r=1,c.push(p))}for(var l=0;l<i.length;l++){var f=i[l],v=f.name.split("_")[0];h==v&&(s=1,c.push(f))}if(o+r+s==3)for(var l=0;l<c.length;l++){var y=c[l];this.tweenTarget(y);var m=t.indexOf(y);m>=0&&t.splice(m,1),m=e.indexOf(y),m>=0&&e.splice(m,1),m=i.indexOf(y),m>=0&&i.splice(m,1)}}},e.prototype.tweenTarget=function(t){egret.Tween.get(t).wait(400).to({alpha:0,scaleX:0,scaleY:0,x:0,y:0},500).call(this.removeNode,this,[t]),this.score++,this.txtScore.text="score:"+this.score,SoundControl.getIns().play(this.soundScore),this.updateLevel()},e.prototype.updateLevel=function(){this.score%20==0&&(this.level++,this.txtLevel.text="LEVEL:"+this.level,this.blood+=2,this.updateBlood(),SoundControl.getIns().play(this.soundLevel))},e.prototype.updateBlood=function(){this.btnChange.visible=0!=this.blood,this.txtBlood.text=""+this.blood,this.checekOver()},e.prototype.checekOver=function(){if(0==this.blood){var t=parseInt(this.target.name.split("_")[1]);switch(t){case this.sizeMax:10==this.nodeMax.numChildren&&this.over();break;case this.sizeMid:10==this.nodeMid.numChildren&&this.over();break;case this.sizeMin:10==this.nodeMin.numChildren&&this.over()}}},e.prototype.over=function(){this.gameOver.update(),this.addChild(this.gameOver)},e.prototype.restart=function(){this.score=0,this.blood=5,this.level=1,this.txtLevel.text="LEVEL:"+this.level,this.txtBlood.text=""+this.blood,this.txtScore.text="score:"+this.score,this.btnChange.visible=!0,this.nodeMax.removeChildren(),this.nodeMid.removeChildren(),this.nodeMin.removeChildren();for(var t=0;t<this.checkArray.length;t++)for(var e=this.checkArray[t],i=0;i<e.length;i++){var n=e[i];n.length=0}this.createNewCircle()},e}(BasicComponent);__reflect(Game.prototype,"Game");var GameStart=function(t){function e(){var e=t.call(this)||this;return e.setSkinName("resource/eui_skins/gameStartUI.exml"),e}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this);for(var e in this.animation.items)this.animation.items[e].props={loop:!0};this.animation.play(),this.btnStart.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},e.prototype.onTouch=function(t){this.parent.removeChild(this)},e}(BasicComponent);__reflect(GameStart.prototype,"GameStart");var GameOver=function(t){function e(e){var i=t.call(this)||this;return i.game=e,i.setSkinName("resource/eui_skins/gameOverUI.exml"),i}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.btnStart.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},e.prototype.onTouch=function(t){this.parent.removeChild(this),this.game.restart()},e.prototype.update=function(){this.txtScore.text=this.game.txtScore.text.toLocaleUpperCase(),this.txtLevel.text=this.game.txtLevel.text.toLocaleUpperCase()},e}(BasicComponent);__reflect(GameOver.prototype,"GameOver");var LayoutManager=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.displayRank=function(t,e,i,n,o,r,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=1);for(var a,h=0;h<t.length;h++)a=t[h],a.x=o+Math.floor(h%e)*(a.width+i)*s,a.y=r+Math.floor(h/e)*(a.height+n)*s},e.displayRankPart=function(t,i,n,o){void 0===n&&(n=null),void 0===o&&(o=1);var r,s,a,h,c,l,u;r=i[0],a=i[1],h=i[2],c=i[3],l=i[4],u=i[5];var d=t.slice(0,r);if(e.displayRank(d,a,h,c,l,u,o),n){s=n[0],a=n[1],h=n[2],c=n[3],l=n[4],u=n[5];var p=t.slice(r,r+s);e.displayRank(p,a,h,c,l,u,o)}},e.displayCircle=function(t,e,i,n,o,r,s,a,h,c){void 0===o&&(o=2*Math.PI),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===c&&(c=0);var l,u=t.length,d=o/u;o<2*Math.PI&&(d=o/(u-1));for(var p=0;u>p;p++)l=t[p],l.x=e+Math.cos(d*p-r)*(n+h)+s,l.y=i+Math.sin(d*p-r)*(n+c)+a},e.displayPolygon=function(t,e,i,n,o,r){if(void 0===n&&(n=100),void 0===o&&(o=5),void 0===r&&(r=0),3>o||o>t.length)return void console.log("多边形的边数不正确");for(var s,a=t.length,h=2*Math.PI/o,c=Math.floor(a/o),l=0;o>l;l++){var u=e+Math.cos(l*h-r)*n,d=i+Math.sin(l*h-r)*n,p=l+1;p=p==o?0:p;for(var g=e+Math.cos(p*h-r)*n,f=i+Math.sin(p*h-r)*n,v=0;c>v;v++){var y=v+c*l;a>y&&(s=t[y],s.x=u,s.y=d,s.x+=(g-u)/c*v,s.y+=(f-d)/c*v)}}},e.displayTrigon=function(t,e,i,n,o,r,s){function a(){var p=0,g=d.length;g>1&&s&&(p=(g-1)*(h.width+e)/-2*r);for(var f=0;g>f;f++)h=d[f],h.x=n+f*(h.width+e)*r+p,h.y=o+(u-1)*(h.height+i)*r;u++,c=l,l=c+u,d=t.slice(c,l),l<=t.length+c&&a()}void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=1),void 0===s&&(s=!0);var h,c=0,l=1,u=1,d=t.slice(c,l);a()},e.displayWall=function(t,e,i,n,o,r,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=10);for(var a,h=0;h<t.length;h++){var c=Math.floor(h/e)%2==0?s:0;a=t[h],a.x=o+Math.floor(h%e)*(a.width+i)+c,a.y=r+Math.floor(h/e)*(a.height+n)}},e.displayRankX=function(t,e,i,n,o){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);for(var r,s=t.length,a=0,h=0;s>h;h++){r=t[h];r.width;r.y=o,r.x=a,a=r.x+(r.width+i)}},e}(egret.HashObject);__reflect(LayoutManager.prototype,"LayoutManager");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?n(o):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 3:return i.sent(),this.stage.removeChild(t),[3,5];case 4:return e=i.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){egret_4399_h5api.initGame(100053943,"九宫连连看",this.stage.stageWidth,this.stage.stageHeight,!0),egret_4399_h5api.progress(100),this.addChild(new Game),this.addChild(new GameStart)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var SoundControl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sounds={},e.channels={},e.volumeBg=1,e.volumeEffect=1,e.isNoVolume=1,e}return __extends(e,t),e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.checkSoundIsBg=function(t,e){return t[e+"-bg"]},e.prototype.addItem=function(t,e){void 0===e&&(e=!1);var i=t;if(e&&(i=t+"-bg"),!this.sounds[i]){var n=RES.getRes(t);this.sounds[i]=n}},e.prototype.play=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1);var n=this.volumeEffect;if(this.checkSoundIsBg(this.sounds,t)&&(t+="-bg",n=this.volumeBg),this.sounds[t]){var o=this.sounds[t];this.channels[t]=o.play(e,i),0==this.isNoVolume?this.channels[t].volume=0:this.channels[t].volume=n}},e.prototype.stop=function(t){if(this.checkSoundIsBg(this.channels,t)&&(t+="-bg"),this.channels[t]){var e=this.channels[t];e.stop()}},e.prototype.setVolume=function(t,e){if(this.checkSoundIsBg(this.channels,t)&&(t+="-bg"),this.channels[t]){var i=this.channels[t];i.volume=e}},e.prototype.setBgVolume=function(t){for(var e in this.channels)if(2==e.split("-bg").length){var i=this.channels[e];this.volumeBg=t,0!=i.position&&(i.volume=t)}},e.prototype.setEffectVolume=function(t){for(var e in this.channels)if(1==e.split("-bg").length){var i=this.channels[e];this.volumeEffect=t,0!=i.position&&(i.volume=t)}},e.prototype.setIsNoVolume=function(t){this.isNoVolume=t;for(var e in this.channels){var i=this.channels[e];0!=i.position&&(0==t?i.volume=0:this.checkSoundIsBg(this.sounds,e)?i.volume=this.volumeBg:i.volume=this.volumeEffect)}},e}(egret.HashObject);__reflect(SoundControl.prototype,"SoundControl");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function o(t){e.call(n,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var TextField=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.TextField);__reflect(TextField.prototype,"TextField");var Sprite=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Sprite);__reflect(Sprite.prototype,"Sprite");var Shape=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Shape);__reflect(Shape.prototype,"Shape");var DisplayObject=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.DisplayObject);__reflect(DisplayObject.prototype,"DisplayObject");var DisplayObjectContainer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(DisplayObjectContainer.prototype,"DisplayObjectContainer");var Point=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Point);__reflect(Point.prototype,"Point");var Rectangle=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Rectangle);__reflect(Rectangle.prototype,"Rectangle");var Bitmap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Bitmap);__reflect(Bitmap.prototype,"Bitmap");var BitmapData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.BitmapData);__reflect(BitmapData.prototype,"BitmapData");var Stage=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Stage);__reflect(Stage.prototype,"Stage");var Tween=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Tween);__reflect(Tween.prototype,"Tween");var Ease=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Ease);__reflect(Ease.prototype,"Ease");var trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",n=0;n<t.length;n++)i+=t[n]+",";i=i.substr(0,i.length-1),moon.showLog.getIns().logMessage(i)},traceSimple=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",n=0;n<t.length;n++)i+=t[n]+",";i=i.substr(0,i.length-1),moon.showLog.getIns().log(i)},moon;!function(t){var e=function(){function t(){}return t.fontName="黑体",t}();t.FONT=e,__reflect(e.prototype,"moon.FONT");var i=function(){function t(){}return t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.SHAPE_RECT="shape rect",t.SHAPE_RECT_ROUND="shape rect round",t.SHAPE_CIRCLE="shape circle",t}();t.Const=i,__reflect(i.prototype,"moon.Const");var n=function(){function t(){}return Object.defineProperty(t,"random",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"white",{get:function(){return 16777215},enumerable:!0,configurable:!0}),Object.defineProperty(t,"black",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"gray",{get:function(){return 6710886},enumerable:!0,configurable:!0}),Object.defineProperty(t,"red",{get:function(){return 16711680},enumerable:!0,configurable:!0}),Object.defineProperty(t,"green",{get:function(){return 65280},enumerable:!0,configurable:!0}),Object.defineProperty(t,"bule",{get:function(){return 255},enumerable:!0,configurable:!0}),Object.defineProperty(t,"skinNormal",{get:function(){return 1382684},enumerable:!0,configurable:!0}),Object.defineProperty(t,"skinDown",{get:function(){return 10066329},enumerable:!0,configurable:!0}),Object.defineProperty(t,"titleBackground",{get:function(){return 2106923},enumerable:!0,configurable:!0}),t.getRandomArray=function(t){for(var e=[],i=0;t>i;i++)e.push(16777215*Math.random());return e},t.lightenDarkenColor=function(t,e){var i=(t>>16)+e;i>255?i=255:0>i&&(i=0);var n=(t>>8&255)+e;n>255?n=255:0>n&&(n=0);var o=(255&t)+e;return o>255?o=255:0>o&&(o=0),o|n<<8|i<<16},t}();t.Color=n,__reflect(n.prototype,"moon.Color");var o=function(){function e(){}return Object.defineProperty(e,"randomRect",{get:function(){return t.MoonUI.getRect(60,60,t.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"randomCircle",{get:function(){return t.MoonUI.getCircle(50,t.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pointNormal",{get:function(){return t.MoonUI.getCircle(6,t.Color.black)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pointDown",{get:function(){return t.MoonUI.getCircle(6,t.Color.gray)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buttonNormal",{get:function(){return t.MoonUI.getRect(60,60,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buttonDown",{get:function(){return t.MoonUI.getRect(60,60,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"radioOff",{get:function(){return t.MoonUI.getRadioCircle(t.Color.white,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"radioOn",{get:function(){return t.MoonUI.getRadioCircle(t.Color.white,t.Color.black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"checkBoxOff",{get:function(){return t.MoonUI.getCheckBoxRect(t.Color.white,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"checkBoxOn",{get:function(){return t.MoonUI.getCheckBoxRect(t.Color.white,t.Color.black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"switchOff",{get:function(){return t.MoonUI.getSwitch(t.Color.skinNormal,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"switchOn",{get:function(){return t.MoonUI.getSwitch(t.Color.skinNormal,t.Color.white,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"progressBackground",{get:function(){return t.MoonUI.getRect(300,20,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"progressValue",{get:function(){return t.MoonUI.getRect(300,20,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderBackground",{get:function(){return t.MoonUI.getRect(300,10,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderValue",{get:function(){return t.MoonUI.getRect(300,10,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderBar",{get:function(){return t.MoonUI.getCircle(15,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scrollBar",{get:function(){return t.MoonUI.getRect(10,10,t.Color.skinNormal)},enumerable:!0,configurable:!0}),e.getRodatioButton=function(e){var i=new y(t.Skin.radioOff,t.Skin.radioOn);return i.skinAutoScale=!1,i.label=e,i.labelColor=t.Color.black,i.setLabelPoint(40,0),i},e.getCheckBox=function(e){var i=[t.Skin.checkBoxOff,t.Skin.checkBoxOff,t.Skin.checkBoxOn,t.Skin.checkBoxOn],n=new t.MoreSkinButton(i);return n.skinAutoScale=!1,n.label=e,n.toggleSwitch=!0,n.labelColor=t.Color.black,n.setLabelPoint(50,2),n},e}();t.Skin=o,__reflect(o.prototype,"moon.Skin");var r=function(){function t(){}return t.displayRank=function(t,e,i,n,o,r,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=1);for(var a,h=0;h<t.length;h++)a=t[h],a.x=o+Math.floor(h%e)*(a.width+i)*s,a.y=r+Math.floor(h/e)*(a.height+n)*s},t}();t.SimpleLayout=r,__reflect(r.prototype,"moon.SimpleLayout");var s=function(){function e(){}return Object.defineProperty(e,"randomColor",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),e.getLineRect=function(t,e,i,n,o,r){void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=0),void 0===r&&(r=0);var s=new Sprite;return s.graphics.lineStyle(n,i),s.graphics.drawRect(o,r,t,e),s.graphics.endFill(),s},e.getLineCircle=function(t,e,i,n,o){void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0);var r=new Sprite;return r.graphics.lineStyle(i,e),r.graphics.drawCircle(n,o,t),r.graphics.endFill(),r},e.getMatrixRect=function(t,e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=new Sprite,s=new egret.Matrix;return s.createGradientBox(t,e,Math.PI*o,0,0),r.graphics.beginGradientFill(egret.GradientType.LINEAR,[i,n],[1,1],[0,255],s),r.graphics.drawRect(0,0,t,e),r.graphics.endFill(),r},e.getRect=function(t,e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=new Sprite;return r.graphics.beginFill(i),r.graphics.drawRect(n,o,t,e),r.graphics.endFill(),r},e.getRectAndX=function(t,e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=this.getRect(t,e,i,n,o),s=new Sprite;s.graphics.lineStyle(.1),s.graphics.moveTo(0,0),s.graphics.lineTo(t,e);
var a=new Sprite;return a.graphics.lineStyle(.1),a.graphics.moveTo(t,0),a.graphics.lineTo(0,e),r.addChild(s),r.addChild(a),r},e.getRoundRect=function(t,e,i,n,o,r,s){void 0===i&&(i=0),void 0===n&&(n=5),void 0===o&&(o=5),void 0===r&&(r=0),void 0===s&&(s=0);var a=new Sprite;return a.graphics.beginFill(i),a.graphics.drawRoundRect(r,s,t,e,n,o),a.graphics.endFill(),a},e.getCircle=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=new Sprite;return o.graphics.beginFill(e),o.graphics.drawCircle(i,n,t),o.graphics.endFill(),o},e.getPolygon=function(t,e,i,n){void 0===t&&(t=3),void 0===e&&(e=10),void 0===i&&(i=0),void 0===n&&(n=0);var o=new Sprite;o.rotation=n,o.graphics.beginFill(i);for(var r=0;t>=r;r++){var s=Math.cos(r*(360/t)*Math.PI/180)*e,a=Math.sin(r*(360/t)*Math.PI/180)*e;0==r?o.graphics.moveTo(s,a):o.graphics.lineTo(s,a)}return o.graphics.endFill(),o},e.getArrowRoundRect=function(t,e,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=new Sprite;r.addChild(this.getRoundRect(t,e,i));var s=this.getPolygon(3,t/3,n,30+o);return s.x=r.width>>1,s.y=r.height>>1,r.addChild(s),r},e.getScrollLineBar=function(t,e,i){for(var n=new Sprite,o=e/3,r=0;3>r;r++){var s=this.getRect(t,1,i,0,r*o);n.addChild(s)}return n},e.getAddRoundRect=function(t,e,i){var n=new Sprite;n.addChild(this.getRoundRect(t,e,i));var o=this.getRect(t/2,2,0,t/4,e/2-1),r=this.getRect(2,e/2,0,t/2-1,e/4);return n.addChild(o),n.addChild(r),n},e.getRemoveRoundRect=function(t,e,i){var n=new Sprite;n.addChild(this.getRoundRect(t,e,i));var o=this.getRect(t/2,2,0,t/4,e/2-1);return n.addChild(o),n},e.getRoundRectText=function(t,e,i,n){void 0===n&&(n="click");var o=new Sprite;o.addChild(this.getRoundRect(t,e,i));var r=new TextField;return r.name="text",r.text=n,r.x=o.width-r.width>>1,r.y=o.height-r.height>>1,o.addChild(r),o},e.getSwitch=function(e,i,n){void 0===e&&(e=16777215),void 0===i&&(i=0),void 0===n&&(n=0);var o=t.MoonUI.getRoundRect(80,50,e,60,60);return o.addChild(t.MoonUI.getCircle(22,i,0==n?25:55,25)),o},e.getCheckBoxRect=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var n=new Sprite;if(n.addChild(this.getRect(40,40,t)),1==i){var o=new Sprite;o.graphics.beginFill(e),o.graphics.moveTo(0,20),o.graphics.lineTo(20,36),o.graphics.lineTo(44,8),o.graphics.lineTo(36,0),o.graphics.lineTo(20,18),o.graphics.lineTo(12,8),o.graphics.lineTo(0,20),n.addChild(o)}return n},e.getRadioCircle=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var n=new Sprite;if(n.addChild(this.getCircle(16,t,16,16)),n.graphics.lineStyle(1,0),1==i){var o=this.getCircle(8,e,16,16);n.addChild(o)}return n},e.getGridding=function(t,e){void 0===e&&(e=0);var i=new Sprite;i.graphics.lineStyle(.1,e);for(var n=t.width/t.x,o=t.height/t.y,r=0;r<t.x;r++)i.graphics.moveTo(0,r*o),i.graphics.lineTo(t.width,r*o);for(r=0;r<t.y;r++)i.graphics.moveTo(r*n,0),i.graphics.lineTo(r*n,t.height);return i},e.getHeart=function(t,e){void 0===t&&(t=15),void 0===e&&(e=16711680);var i=new Sprite;return i.graphics.beginFill(e),i.graphics.moveTo(0,0),i.graphics.lineTo(0,2*-t),i.graphics.cubicCurveTo(t,2.5*-t,2*t,1.5*-t,0,0),i.graphics.moveTo(0,0),i.graphics.lineTo(0,2*-t),i.graphics.cubicCurveTo(-t,2.5*-t,2*-t,1.5*-t,0,0),i.graphics.endFill(),i.anchorOffsetX=-i.width/2,i.anchorOffsetY=-i.height,i},e}();t.MoonUI=s,__reflect(s.prototype,"moon.MoonUI");var a=function(){function t(){}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(t){var e=(new v).textField;e.textAlign=egret.HorizontalAlign.LEFT,t.addChild(e),this.txtSimple=e;var e=(new v).textField;e.size=25,t.addChild(e),this.txtMessage=e},t.prototype.log=function(t){this.txtSimple.text=t},t.prototype.logMessage=function(t){this.txtMessage.appendText(t+"\n")},t.prototype.setLogColor=function(t){this.txtSimple.textColor=t},t.prototype.setLogMessageColor=function(t){this.txtMessage.textColor=t},t}();t.showLog=a,__reflect(a.prototype,"moon.showLog");var h=function(){function e(){this.bgName="tips_png"}return e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(t){this.stage=t},e.prototype.simpleTips=function(e,i){null==this.tipsView&&(this.tipsView=new t.BasicTips(this.bgName),this.tipsView.setValue(e),this.stage.addChild(this.tipsView),this.setPosition(i),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this))},e.prototype.setPosition=function(t){t&&(this.tipsView.x=t.x-(this.tipsView.width>>1),this.tipsView.y=t.y-2*this.tipsView.height,this.tipsView.y<0&&(this.tipsView.y=t.y),this.tipsView.y+this.tipsView.height>this.stage.stageHeight&&(this.tipsView.y=t.y-(this.tipsView.height+50)),this.tipsView.x<0&&(this.tipsView.x=t.x+50),this.tipsView.x+this.tipsView.width>this.stage.stageWidth&&(this.tipsView.x=t.x-(this.tipsView.width+50)))},e.prototype.removeTips=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this);var t=this.tipsView.parent;null!=t&&(t.removeChild(this.tipsView),this.tipsView=null)},e}();t.TipsManager=h,__reflect(h.prototype,"moon.TipsManager");var c=function(t){function e(e,i,n){void 0===e&&(e=""),void 0===i&&(i=null),void 0===n&&(n=null);var o=t.call(this)||this;return o.type=e,o.data=i,o.currentTarget=n,o}return __extends(e,t),e.MOUSE_OVER="event-over",e.MOUSE_OUT="event-out",e.MOUSE_DOWN="event-down",e.MOUSE_MOVE="event-move",e.MOUSE_UP="event-up",e.CLICK="event-click",e.CHANGE="change",e.COMPLETE="complete",e.RENDER_COMPLETE="render complete",e.UPDATE="update",e.START="start",e.MOVE="move",e.OVER="over",e.PAUSE="pause",e.OPEN="open",e.CLOSE="close",e}(egret.EventDispatcher);t.MoonEvent=c,__reflect(c.prototype,"moon.MoonEvent");var l=function(t){function e(){var e=t.call(this)||this;return e._type=i.SHAPE_RECT,e._color=0,e.display=new Sprite,e.bg=new Sprite,e}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._data.c=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(t){this._data=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.draw=function(){this._color=this._data.c,this.display.graphics.clear(),this.display=this.getDisplay(this._data),this.addChild(this.display),this.setPosition()},e.prototype.setPosition=function(){this._hasBg&&this.type!=i.SHAPE_CIRCLE&&(this.display.x=this.bg.width-this.display.width>>1,this.display.y=this.bg.height-this.display.height>>1)},e.prototype.setBackground=function(t,e){void 0===e&&(e=1),this._hasBg=!0;var i=this._data,n={};for(var o in i)n[o]=i[o];n.c=t,n.w&&(n.w=n.w+2*e),n.h&&(n.h=n.h+2*e),n.r&&(n.r=n.r+e),this.bg.graphics.clear(),this.bg=this.getDisplay(n),this.addChildAt(this.bg,0),this.setPosition()},e.prototype.getDisplay=function(t){switch(this.type){case i.SHAPE_RECT:return s.getRect(t.w,t.h,t.c);case i.SHAPE_RECT_ROUND:return s.getRoundRect(t.w,t.h,t.c,t.ew,t.eh);case i.SHAPE_CIRCLE:return s.getCircle(t.r,t.c)}},e}(Sprite);t.MoonDisplayObject=l,__reflect(l.prototype,"moon.MoonDisplayObject");var u=function(t){function e(){var e=t.call(this)||this;return e.dataEvent=new Object,e.init(),e.once(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.render()},e.prototype.init=function(){},e.prototype.render=function(){this.stageWidth=this.stage.stageWidth,this.stageHeight=this.stage.stageHeight},e.prototype.dispEvent=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),this.dataEvent){var n=this.dataEvent[t];if(null!=n){var o=new c;o.currentTarget=this,o.data=e,o.type=t,o.dataType=i,n["this"]?n.apply(n["this"],[o]):n(o)}}},e.prototype.addEvent=function(t,e,i){void 0===i&&(i=null),this.dataEvent&&null==this.dataEvent[t]&&(e["this"]=i,this.dataEvent[t]=e)},e.prototype.removeEvent=function(t,e){this.dataEvent&&this.dataEvent[t]&&delete this.dataEvent[t]},e.prototype.removeFromParent=function(t){void 0===t&&(t=!1);var e=this.parent;t&&this.dispose(),e&&e.contains(this)&&e.removeChild(this),e=null},e.prototype.removeChildAll=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=2147483647),void 0===i&&(i=!1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var n=t;e>=n;++n)this.removeChildIndex(t,i)},e.prototype.removeChildIndex=function(t,i){if(t>=0||t<this.numChildren){var n=this.getChildAt(t);if(n instanceof e)n.removeFromParent(i);else{var o=this.getChildAt(t);o.parent&&o.parent.removeChild(o)}}},e.prototype.dispose=function(){this.removeChildAll(0,-1,!0),this.dataEvent=null},e}(DisplayObjectContainer);t.MoonContainer=u,__reflect(u.prototype,"moon.MoonContainer");var d=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.createText=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="");var n=(new v).textField;return n.x=t,n.y=e,n.text=i,this.addChild(n),n},i.prototype.createRect=function(e,i,n,o,r){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0);var s=t.MoonUI.getRect(e,i,n,o,r);return this.addChild(s),s},i.prototype.createCircle=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=t.MoonUI.getCircle(e,i,n,o);return this.addChild(r),r},i.prototype.createRectBySprite=function(t,e,i,n,o,r){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),t.graphics.clear(),t.graphics.beginFill(n),t.graphics.drawRect(o,r,e,i),t.graphics.endFill()},i.prototype.createBackground=function(t){return void 0===t&&(t=0),this.createRect(this.stageWidth,this.stageHeight,t)},i.prototype.createBgGradientFill=function(t,e){void 0===t&&(t=96963),void 0===e&&(e=14540253);var i=this.stageWidth,n=this.stageHeight,o=new egret.Matrix;o.createGradientBox(i,n,Math.PI/2);var r=new Sprite;return r.graphics.beginGradientFill(egret.GradientType.LINEAR,[t,e],[1,1],[0,255],o),r.graphics.drawRect(0,0,i,n),this.addChild(r),r},i}(u);t.BasicView=d,__reflect(d.prototype,"moon.BasicView");var p=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.play=function(){this.isPlay=!0,egret.startTick(this.loop,this)},i.prototype.stop=function(){this.isPlay=!1,egret.stopTick(this.loop,this)},i.prototype.loop=function(t){return traceSimple(t),!0},i.prototype.createButton=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var o=new t.BasicButton;return o.label=e,o.x=i,o.y=n,this.addChild(o),o},i}(d);t.GameView=p,__reflect(p.prototype,"moon.GameView");var g=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this)||this;return n.texture=RES.getRes(e),n.scale9Grid=i||new Rectangle(8,8,2,2),n}return __extends(e,t),e}(Bitmap);t.Scale9Image=g,__reflect(g.prototype,"moon.Scale9Image");var f=function(t){function e(e){var i=t.call(this)||this;return i.side=14,i.lineSpacing=4,i.image=new g(e),i.addChild(i.image),i.text=(new v).textField,i.text.textAlign=egret.HorizontalAlign.CENTER,i.text.verticalAlign=egret.VerticalAlign.MIDDLE,i.text.lineSpacing=i.lineSpacing,i.addChild(i.text),i}return __extends(e,t),e.prototype.setValue=function(t){this.text.text=t,this.setCenter()},e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setCenter()},e.prototype.setCenter=function(){var t=this.image,e=this.text,i=this.side,n=e.width+i,o=e.height+i;t.width=n,t.height=o,e.x=e.y=i>>1},e}(u);t.BasicTips=f,__reflect(f.prototype,"moon.BasicTips");var v=function(e){function i(i,n){void 0===i&&(i=""),void 0===n&&(n=16777215);var o=e.call(this)||this;return o.text=new TextField,o.text.textAlign=egret.HorizontalAlign.LEFT,o.text.verticalAlign=egret.VerticalAlign.MIDDLE,o.text.text=i,o.text.textColor=n,o.text.fontFamily=t.FONT.fontName,o.addChild(o.text),o}return __extends(i,e),Object.defineProperty(i.prototype,"textField",{get:function(){return this.text},enumerable:!0,configurable:!0}),i}(u);t.Label=v,__reflect(v.prototype,"moon.Label");var y=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=t.call(this)||this;return n.skinAutoScale=!0,n.statusNormal=e||o.buttonNormal,n.statusDown=i||o.buttonDown,n.skinContainer=new DisplayObjectContainer,n.addChild(n.skinContainer),n.updateSkin(n.statusNormal),n.text=(new v).textField,n.addChild(n.text),n.open(),n}return __extends(e,t),e.prototype.open=function(){this.close(),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},e.prototype.close=function(){this.touchEnabled=!1,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},e.prototype.setLabelPoint=function(t,e){this.text.anchorOffsetX=0,this.text.anchorOffsetY=0,this.text.x=t,this.text.y=e},Object.defineProperty(e.prototype,"labelCircle",{set:function(t){this.text.text=t,this.skinAutoScale=!1,this.text.x=this.text.y=0,this.text.anchorOffsetX=this.text.textWidth>>1,this.text.anchorOffsetY=this.text.textHeight>>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelColor",{set:function(t){this.text.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this.text.text},set:function(t){this.text.text=t;this.text.width+20;this.setSkinSize(),this.setTextPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFild",{get:function(){return this.text},enumerable:!0,configurable:!0}),e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setSkinSize(),this.setTextPosition()},e.prototype.setSkinNormal=function(){this.updateSkin(this.statusNormal)},e.prototype.setSkinDown=function(){this.updateSkin(this.statusDown)},e.prototype.onTouch=function(t){t.type==egret.TouchEvent.TOUCH_BEGIN?(this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusDown)):(this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusNormal))},Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.text.width+20},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.text.height+20},enumerable:!0,configurable:!0}),e.prototype.setSkinSize=function(){if(this.skinAutoScale&&""!=this.text.text){var t=this.textWidth/this.statusNormal.width;this.statusNormal instanceof Bitmap?(this.statusNormal.width=this.textWidth,this.statusDown.width=this.textWidth):this.statusNormal.scaleX=this.statusDown.scaleX=t;var e=this.textHeight;e>=this.statusNormal.height&&(t=e/this.statusNormal.height,this.statusNormal instanceof Bitmap?(this.statusNormal.height=this.textHeight,this.statusDown.height=this.textHeight):this.statusNormal.scaleY=this.statusDown.scaleY=t)}},e.prototype.setTextPosition=function(){this.text.anchorOffsetX=this.text.width>>1,this.text.anchorOffsetY=this.text.height>>1,this.textWidth>this.statusNormal.width?this.text.x=this.textWidth>>1:this.text.x=this.statusNormal.width>>1,this.textHeight>this.statusNormal.height?this.text.y=this.textHeight>>1:this.text.y=this.statusNormal.height>>1},e.prototype.updateSkin=function(t){this.skinContainer.removeChildren(),this.skinContainer.addChild(t)},e.prototype.dispose=function(){this.close(),t.prototype.dispose.call(this)},e}(u);t.BasicButton=y,__reflect(y.prototype,"moon.BasicButton",["moon.IOnoff"]);var m=function(t){function e(e){var i=t.call(this,e[0],e[1])||this;return i._currentPage=0,i.skins=e,i}return __extends(e,t),Object.defineProperty(e.prototype,"currentPage",{get:function(){return this._currentPage},set:function(t){t=2*t==this.skins.length?0:t,this._currentPage=t,this.statusNormal=this.skins[2*t],this.statusDown=this.skins[2*t+1],this.setSkinSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleSwitch",{set:function(t){this._toggleSwitch=t},enumerable:!0,configurable:!0}),e.prototype.onTouch=function(e){e.type==egret.TouchEvent.TOUCH_END&&this._toggleSwitch&&(this.currentPage=1-this.currentPage),t.prototype.onTouch.call(this,e)},e}(y);t.MoreSkinButton=m,__reflect(m.prototype,"moon.MoreSkinButton");var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.index=0,e}return __extends(e,t),e.prototype.addItem=function(t){this.items.push(t)},e.prototype.removeItem=function(t){var e=this.items.indexOf(t);e>=0&&this.items.splice(e,1)},e.prototype.hasItem=function(t){return this.items.length>0&&t>=0&&t<this.items.length},e.prototype.getItem=function(t){return this.items[t]},e.prototype.getNextItem=function(){return this.items[this.index++]},e.prototype.reset=function(){this.index=0},e.prototype.update=function(){},e.prototype.dispose=function(){for(this.reset();this.hasItem(this.index);){var t=this.getItem(this.index);this.removeItem(t),t instanceof u&&t.removeFromParent(!0)}},e}(d);t.BasicBar=_,__reflect(_.prototype,"moon.BasicBar",["moon.IItem"]);var x=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=t.call(this)||this;return n._value=0,n.setSkin(e,i),n.addChild(n.skinBg),n.addChild(n.skinValue),n.text=(new v).textField,n.addChild(n.text),n}return __extends(e,t),e.prototype.setSkin=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.skinBg=t||o.progressBackground,this.skinValue=e||o.progressValue},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=0>t?0:t>1?1:t,this._value=t,this.skinValue.scaleX=t},enumerable:!0,configurable:!0}),e.prototype.showText=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1),this.text.text=t,-1==e?this.text.x=this.skinBg.width-this.text.width>>1:this.text.x=e,-1==i?this.text.y=this.skinBg.height+5:this.text.y=i},e}(u);t.ProgressBar=x,__reflect(x.prototype,"moon.ProgressBar");var C=function(t){function e(e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var r=t.call(this,e,i)||this;return r.skinBar=n||o.sliderBar,r.addChild(r.skinBar),r.skinBar.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onTouch,r),r.skinBar.touchEnabled=!0,r.layout(),r.value=1,r}return __extends(e,t),e.prototype.setSkin=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.skinBg=t||o.sliderBackground,this.skinValue=e||o.sliderValue},e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.dispEvent(c.START);break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX,t.stageY),this.dispEvent(c.MOVE);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.dispEvent(c.OVER)}},e.prototype.moveDo=function(t,e){var n,o=this.globalToLocal(t,e);n=this.type==i.HORIZONTAL?o.x/this.skinValue.width:-o.y/this.skinValue.width,this.value=n},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=0>t?0:t>1?1:t,this._value=t,this.skinValue.scaleX=t,this.type==i.HORIZONTAL?this.skinBar.x=this.skinValue.width*t:this.skinBar.y=-this.skinValue.width*t},enumerable:!0,configurable:!0}),e.prototype.layout=function(t,e){if(void 0===t&&(t=i.HORIZONTAL),void 0===e&&(e=0),this.type=t,t==i.VERTICAL){var n=-90;this.skinBar.x=this.skinValue.height>>1}else{var n=0;this.skinBar.y=this.skinValue.height>>1}this.skinBg.rotation=n,this.skinValue.rotation=n},e}(x);t.SliderBar=C,__reflect(C.prototype,"moon.SliderBar",["moon.ILayout"]);var b=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.skinBar=e||o.scrollBar,i.skinBar.alpha=0,i.addChild(i.skinBar),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onTouch,i),i.touchEnabled=!0,i.startPos=new Point,i.stPos=new Point,i.setSize(),i.layout(),i}return __extends(e,t),e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stPos.x=t.stageX,this.stPos.y=t.stageY,this.startPos.x=t.stageX-this._target.x,this.startPos.y=t.stageY-this._target.y,this.hideShow(1),this.startTime=egret.getTimer();break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX,t.stageY);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.hideShow(0,100),this.timeMove(t.stageX,t.stageY)}},e.prototype.timeMove=function(t,e){var n=egret.getTimer()-this.startTime;if(500>n){var o=this._target,r=this.maskRect;Tween.removeTweens(o);var s=t-this.stPos.x,a=e-this.stPos.y,h=Math.sqrt(s*s+a*a),c=h/n*100,l=Tween.get(o);if(this.type==i.VERTICAL){var u=a>0?1:-1;c*=u;var d=o.y+c;d>0&&o.y+c>0&&(d=0),0>d&&o.y+c<r.height-o.height&&(d=r.height-o.height),l.to({y:d},400,Ease.sineOut).call(this.setBarPos,this)}else{var u=s>0?1:-1;c*=u;var p=o.x+c;p>0&&o.x+c>0&&(p=0),0>p&&o.x+c<r.width-o.width&&(p=r.width-o.width),l.to({x:p},400,Ease.sineOut).call(this.setBarPos,this)}}},e.prototype.setBarPos=function(){this.type==i.VERTICAL?this.skinBar.y=-this._target.y/(this._target.height-this.maskRect.height)*(this.maskRect.height-this.skinBar.height):this.skinBar.x=-this._target.x/(this._target.width-this.maskRect.width)*(this.maskRect.width-this.skinBar.width)},e.prototype.hideShow=function(t,e){void 0===e&&(e=1e3),Tween.removeTweens(this.skinBar),1==t&&(this.skinBar.alpha=1);var i=Tween.get(this.skinBar);i.to({alpha:t},e)},e.prototype.moveDo=function(t,e){this.type==i.VERTICAL?this.canMoveY(e):this.type==i.HORIZONTAL&&this.canMoveX(t)},e.prototype.canMoveX=function(t){var e=this.maskRect.width-this._target.width,i=t-this.startPos.x;i>e&&0>i&&(this._target.x=i,this.skinBar.x=-i/(this._target.width-this.maskRect.width)*(this.maskRect.width-this.skinBar.width))},e.prototype.canMoveY=function(t){var e=this.maskRect.height-this._target.height,i=t-this.startPos.y;i>e&&0>i&&(this._target.y=i,this.skinBar.y=-i/(this._target.height-this.maskRect.height)*(this.maskRect.height-this.skinBar.height))},e.prototype.setMask=function(){null!=this.maskRect&&null!=this._target&&(this._target.mask=this.maskRect)},e.prototype.setSkinBarPos=function(){this.skinBar.x=this.skinBar.y=0,this.type==i.VERTICAL?this.skinBar.x=this.maskRect.width-this.skinBar.width:this.type==i.HORIZONTAL&&(this.skinBar.y=this.maskRect.height-this.skinBar.height)},e.prototype.layout=function(t,e){void 0===t&&(t=i.VERTICAL),void 0===e&&(e=0),this.type=t,this.setSkinBarPos()},e.prototype.setSize=function(t,e){void 0===t&&(t=200),void 0===e&&(e=200),this.maskRect=s.getRect(t,e),this.addChild(this.maskRect),this.setMask(),this.setSkinBarPos()},Object.defineProperty(e.prototype,"target",{set:function(t){this._target=t,this.addChildAt(this._target,0),this.setMask()},enumerable:!0,configurable:!0}),e}(u);t.ScrollBar=b,__reflect(b.prototype,"moon.ScrollBar",["moon.ILayout"]);var w=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.addItemLabel=function(t,e){void 0===e&&(e=null),null==e?e=o.getCheckBox(t):e.label=t,this.addItem(e)},n.prototype.addItem=function(t){e.prototype.addItem.call(this,t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(t)},n.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),t.removeFromParent(!0)},n.prototype.onClick=function(e){e.currentTarget;this.dispEvent(t.MoonEvent.CHANGE)},n.prototype.layout=function(t,e){void 0===t&&(t=i.VERTICAL),void 0===e&&(e=10);for(var n=0;n<this.items.length;n++){var o=this.items[n];t==i.VERTICAL?o.y=(o.height+e)*n:o.x=(o.width+e)*n}},Object.defineProperty(n.prototype,"selectIndexs",{get:function(){for(var t=[],e=0;e<this.items.length;e++){var i=this.items[e];1==i.currentPage&&t.push(e)}return t},enumerable:!0,configurable:!0}),n}(_);t.CheckBoxBar=w,__reflect(w.prototype,"moon.CheckBoxBar",["moon.ILayout"]);var E=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._selectIndex=0,t}return __extends(i,e),i.prototype.onClick=function(t){var e=t.currentTarget;this.selectItem(e)},i.prototype.selectItem=function(e){for(this.reset();this.hasItem(this.index);){var i=this.getNextItem();i.currentPage=0,i.setSkinNormal(),i.open()}e.close(),e.currentPage=1,e.setSkinNormal(),this._selectIndex=this.items.indexOf(e),this.dispEvent(t.MoonEvent.CHANGE,this._selectIndex)},Object.defineProperty(i.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){this._selectIndex=t,this.selectItem(this.getItem(t))},enumerable:!0,configurable:!0}),i}(w);t.TabbarBar=E,__reflect(E.prototype,"moon.TabbarBar");var T=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAutoLayout=!1,t}return __extends(i,e),i.prototype.addItemLabel=function(t,e){void 0===e&&(e=null),null==e?e=o.getRodatioButton(t):e.label=t,this.addItem(e)},i.prototype.render=function(){this.update()},i.prototype.update=function(){var t;if(1==this.isAutoLayout)for(var e=0;e<this.items.length;e++)t=this.items[e],t.x=(t.width+10)*e},i.prototype.onClick=function(e){var i=e.currentTarget;this.selectIndex=this.items.indexOf(i),this.dispEvent(t.MoonEvent.CHANGE)},Object.defineProperty(i.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){function e(t){t.setSkinNormal()}this._selectIndex=t;var i=this.items[t];this.items.map(e,this),i.setSkinDown()},enumerable:!0,configurable:!0}),i}(w);t.RadioButtonBar=T,__reflect(T.prototype,"moon.RadioButtonBar");var k=function(t){function e(e){void 0===e&&(e="提示或警告");var i=t.call(this)||this;return i.bgColor=n.gray,i.text=(new v).textField,i.text.text=e,i}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this);var e=this.createBackground(0);e.alpha=.3,e.touchEnabled=!0;var n=this.stageWidth-100,o=this.stageWidth-n>>1,r=this.stageHeight-n>>1;this.bg=new l,this.bg.type=i.SHAPE_RECT_ROUND,this.bg.data={w:n,h:n,c:this.bgColor,ew:10,eh:10},this.bg.setBackground(0,2),this.bg.x=o,this.bg.y=r,this.addChild(this.bg);var s=new y;s.label="确定",this.addChild(s),s.x=this.stageWidth-s.width>>1,s.y=this.bg.y+this.bg.height-100,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.text.x=this.stageWidth-this.text.width>>1,this.text.y=this.bg.y+(this.bg.height>>1)-this.text.height,this.addChild(this.text)},e.prototype.onClick=function(t){this.removeFromParent(!0),this.dispEvent(c.CLOSE)},Object.defineProperty(e.prototype,"color",{set:function(t){this.bgColor=t,this.bg&&(this.bg.color=t)},enumerable:!0,configurable:!0}),e}(_);t.AlertBar=k,__reflect(k.prototype,"moon.AlertBar");var O=function(t){function e(e,i){void 0===e&&(e=100),void 0===i&&(i=50);var n=t.call(this)||this;return n.text=(new v).textField,n.inputW=e,n.inputH=i,n}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this);var e=this.inputW,n=this.inputH;this.bg=new l,this.bg.type=i.SHAPE_RECT_ROUND,this.bg.data={w:e,h:n,c:this.bgColor,ew:10,eh:10},this.bg.setBackground(0,2),this.addChild(this.bg);var o=5;this.text.x=o,this.text.y=o,this.text.width=e-2*o,this.text.height=n-2*o,this.text.type=egret.TextFieldType.INPUT,this.addChild(this.text)},e.prototype.setMultiline=function(){this.text.wordWrap=!0,this.text.multiline=!0,this.text.verticalAlign=egret.VerticalAlign.TOP},Object.defineProperty(e.prototype,"color",{set:function(t){this.bgColor=t,this.bg&&(this.bg.color=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxChars",{set:function(t){this.text.maxChars=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"restrict",{set:function(t){this.text.restrict=t},enumerable:!0,configurable:!0}),e}(_);t.InputBar=O,__reflect(O.prototype,"moon.InputBar");var S=function(e){function i(t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n=e.call(this)||this;return n.titleHeight=60,n.pWidth=t,n.pHeight=t,n.titleBg=new Sprite,n.containerBg=new Sprite,n.title=(new v).textField,n.container=new u,n}return __extends(i,e),i.prototype.render=function(){0==this.pWidth&&0==this.pWidth?e.prototype.render.call(this):(this.stageWidth=this.pWidth,this.stageHeight=this.pHeight),this.createRectBySprite(this.titleBg,this.stageWidth,this.titleHeight,t.Color.titleBackground),this.createRectBySprite(this.containerBg,this.stageWidth,this.stageHeight-this.titleHeight,t.Color.white,0,this.titleHeight),this.addChild(this.titleBg),this.addChild(this.containerBg),this.title.anchorOffsetX=this.title.textWidth>>1,this.title.anchorOffsetY=this.title.textHeight>>1,this.title.x=this.stageWidth>>1,this.title.y=this.titleHeight>>1,this.addChild(this.title),this.container.y=this.titleHeight,this.addChild(this.container),this.containerMask=this.createRect(this.stageWidth,this.stageHeight-this.titleHeight,t.Color.white,0,this.titleHeight),this.container.mask=this.containerMask,this.touchEnabled=!0,this.dispEvent(c.RENDER_COMPLETE)},i.prototype.addItem=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),e.prototype.addItem.call(this,t),0!=i&&(t.x=i),0!=n&&(t.y=n),this.container.addChild(t)},i.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),this.container.contains(t)&&this.container.removeChild(t)},Object.defineProperty(i.prototype,"label",{get:function(){return this.title.text},set:function(t){this.title.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorTop",{set:function(t){var e=this.titleBg.width,i=this.titleBg.height;this.createRectBySprite(this.titleBg,e,i,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorBottom",{set:function(t){var e=this.containerBg.width,i=this.containerBg.height;this.createRectBySprite(this.containerBg,e,i,t,0,this.titleHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"windowRect",{get:function(){var t=new Rectangle(0,0,this.stageWidth,this.stageHeight);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topHeight",{get:function(){return this.titleHeight},enumerable:!0,configurable:!0}),i.prototype.removeAll=function(){this.container.dispose()},i}(_);t.PanelBar=S,__reflect(S.prototype,"moon.PanelBar");var B=function(e){function i(){var t=e.call(this)||this;return t.radioButton=new T,t.currentPage=0,t.posStartX=0,t.moveItems=[],t.container=new u,t.addChild(t.container),t.radioButton.isAutoLayout=!0,t}return __extends(i,e),i.prototype.open=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},i.prototype.close=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},i.prototype.update=function(){this.container.removeChildren();var e,i;if(this.items.length>0){var n=this.items[0];this.container.addChild(n),e=n.windowRect.width,i=n.windowRect.height,this.panelWidth=e}for(var o=this.items.length,r=0;o>r;r++){var s=new y(t.Skin.pointNormal,t.Skin.pointDown);this.radioButton.addItem(s)}s=this.radioButton.getItem(0),s.setSkinDown(),this.radioButton.x=e-22*o>>1,this.radioButton.y=i-20,this.addChild(this.radioButton)},i.prototype.render=function(){this.update(),this.items.length>1&&this.open()},i.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.posStartX=t.stageX,this.dispEvent(c.START);break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.moveEnd(t.stageX)
}},i.prototype.moveDo=function(t){var e=t-this.posStartX;if(Math.abs(e)>20){if(0==this.moveItems.length){var i=this.items[this.currentPage],n=this.panelWidth;this.moveItems.push(i),0==this.currentPage?(i=this.items[this.currentPage+1],this.container.addChild(i),i.x=n,this.moveItems.push(i)):this.currentPage==this.items.length-1?(i=this.items[this.currentPage-1],this.container.addChild(i),i.x=-n,this.moveItems.push(i)):(i=this.items[this.currentPage-1],this.container.addChild(i),i.x=-n,this.moveItems.push(i),i=this.items[this.currentPage+1],this.container.addChild(i),i.x=n,this.moveItems.push(i))}var o=0==this.currentPage&&e>0,r=this.currentPage==this.items.length-1&&0>e;o||r||(this.container.x=e)}},i.prototype.moveEnd=function(t){if(0==this.container.x)return void this.backCall(0);var e=t-this.posStartX,i=egret.Tween.get(this.container),n=this.panelWidth,o=this.panelWidth>>2;Math.abs(e)>o?(n=this.panelWidth,n*=e>0?1:-1):(e=0,n=0);var r=200;i.to({x:n},r),i.call(this.backCall,this,[e])},i.prototype.backCall=function(t){t>0?(this.currentPage--,this.currentPage=this.currentPage<0?0:this.currentPage):0>t&&(this.currentPage++,this.currentPage=this.currentPage==this.items.length?this.items.length-1:this.currentPage),this.container.removeChildren();var e=this.items[this.currentPage];e.x=0,this.container.addChild(e),this.radioButton.selectIndex=this.currentPage,this.moveItems.length=0,this.container.x=0,this.dispEvent(c.OVER)},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.close()},i}(_);t.PanelMoreManager=B,__reflect(B.prototype,"moon.PanelMoreManager",["moon.IOnoff"]);var P=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=16362243,t}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this),this.createBgGradientFill();var i=new Sprite;this.addChild(i);var n=this.stageWidth,o=this.stageHeight,r=80,a=s.getRoundRect(n-100,r,16573853,100,100);a.x=n-a.width>>1,a.y=o-a.height>>1,i.addChild(a);var h=s.getRect(n-120,r-10,this.color);h.x=n-h.width>>1,h.y=o-h.height>>1,i.addChild(h),this.proWidth=h.width;var c=s.getRoundRect(n-120,r-10,0,100,100);c.x=n-c.width>>1,c.y=o-c.height>>1,h.mask=c,this.progress=h;var u=new l;u.type=t.Const.SHAPE_CIRCLE,u.data={r:r/2,c:14781965},u.setBackground(16777215,5),this.addChild(u),u.x=a.x+a.width-r/2,u.y=a.y+r/2,this.txtLoadPos=new Point(u.x,u.y);var d=this.createText(0,0,"");d.size=40,d.textColor=11563776,this.txtLoad=d;var p=this.createText(0,0,"游戏加载");p.size=40,p.x=n-p.width>>1,p.y=a.y-2*p.height;var g=this.createText(0,0,"");g.size=40,this.txtName=g,this.updateName("敬请期待"),this.createAirFan(),this.airFan.x=u.x,this.airFan.y=u.y,this.createLogo(),this.update(0),this.play()},i.prototype.loop=function(t){return this.airFan.rotation+=3,!0},i.prototype.createAirFan=function(){this.airFan=new Sprite,this.addChild(this.airFan);for(var t=0;4>t;t++){var e=new Sprite;this.airFan.addChild(e),e.graphics.lineStyle(0),e.graphics.beginFill(16777215),e.graphics.cubicCurveTo(-29,-28,29,-28,0,0),e.graphics.endFill(),e.rotation=90*t}},i.prototype.createLogo=function(){var e=this.stageWidth,i=this.stageHeight,n=new l;n.type=t.Const.SHAPE_CIRCLE,n.data={r:50,c:14781965},n.setBackground(16777215,2),n.x=e>>1,n.y=n.height,this.addChild(n);var o=this.createText(0,0,"ZL");o.size=40,o.x=n.x-(o.width>>1),o.y=n.y-(o.height>>1)-15,o=this.createText(0,0,"game"),o.size=30,o.x=n.x-(o.width>>1),o.y=n.y-(o.height>>1)+15,this.addChild(t.MoonUI.getHeart(15,16777215)),o=this.createText(0,0,"子乐游戏"),o.size=40,o.textColor=14720801,o.x=e-o.width-10,o.y=i-o.height-10},i.prototype.createBgGradientFill=function(t,e){void 0===t&&(t=16635225),void 0===e&&(e=14720801);var i=this.stageWidth,n=this.stageHeight,o=new egret.Matrix;o.createGradientBox(2*i,2*n,Math.PI/2);var r=new Sprite;return r.graphics.beginGradientFill(egret.GradientType.RADIAL,[t,e],[1,1],[0,255],o),r.graphics.drawRect(0,0,i,n),this.addChild(r),r},i.prototype.updateName=function(t){this.txtName.text=t,this.txtName.x=this.stageWidth-this.txtName.width>>1,this.txtName.y=this.stageHeight/2+2*this.txtName.height},i.prototype.update=function(t){if(!(t>1)){t>.99&&this.stop(),this.progress.scaleX=t;var e=this.txtLoad,i=this.txtLoadPos;e.text=Math.ceil(100*t)+"%",e.x=this.stageWidth-e.width>>1,e.y=i.y-e.height/2;var n=s.getCircle(5+5*Math.random(),this.color,i.x,i.y);n.y=10-20*Math.random(),this.addChildAt(n,2),Tween.get(n).to({x:-this.proWidth,alpha:0},1e3)}},i}(t.GameView);t.GameLoad=P,__reflect(P.prototype,"moon.GameLoad")}(moon||(moon={}));