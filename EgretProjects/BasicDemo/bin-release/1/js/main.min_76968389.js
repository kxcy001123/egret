var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},TextField=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.TextField);__reflect(TextField.prototype,"TextField");var Sprite=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Sprite);__reflect(Sprite.prototype,"Sprite");var Shape=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Shape);__reflect(Shape.prototype,"Shape");var DisplayObject=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.DisplayObject);__reflect(DisplayObject.prototype,"DisplayObject");var DisplayObjectContainer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(DisplayObjectContainer.prototype,"DisplayObjectContainer");var Point=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Point);__reflect(Point.prototype,"Point");var Rectangle=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Rectangle);__reflect(Rectangle.prototype,"Rectangle");var Bitmap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Bitmap);__reflect(Bitmap.prototype,"Bitmap");var BitmapData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.BitmapData);__reflect(BitmapData.prototype,"BitmapData");var Stage=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Stage);__reflect(Stage.prototype,"Stage");var Tween=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Tween);__reflect(Tween.prototype,"Tween");var trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",o=0;o<t.length;o++)i+=t[o]+",";i=i.substr(0,i.length-1),moon.showLog.getIns().logMessage(i)},traceSimple=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",o=0;o<t.length;o++)i+=t[o]+",";i=i.substr(0,i.length-1),moon.showLog.getIns().log(i)},moon;!function(t){var e=function(){function t(){}return t.fontName="黑体",t}();t.FONT=e,__reflect(e.prototype,"moon.FONT");var i=function(){function t(){}return t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.SHAPE_RECT="shape rect",t.SHAPE_RECT_ROUND="shape rect round",t.SHAPE_CIRCLE="shape circle",t}();t.Const=i,__reflect(i.prototype,"moon.Const");var o=function(){function t(){}return Object.defineProperty(t,"random",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"white",{get:function(){return 16777215},enumerable:!0,configurable:!0}),Object.defineProperty(t,"black",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"gray",{get:function(){return 6710886},enumerable:!0,configurable:!0}),Object.defineProperty(t,"red",{get:function(){return 16711680},enumerable:!0,configurable:!0}),Object.defineProperty(t,"green",{get:function(){return 65280},enumerable:!0,configurable:!0}),Object.defineProperty(t,"bule",{get:function(){return 255},enumerable:!0,configurable:!0}),Object.defineProperty(t,"skinNormal",{get:function(){return 1382684},enumerable:!0,configurable:!0}),Object.defineProperty(t,"skinDown",{get:function(){return 10066329},enumerable:!0,configurable:!0}),Object.defineProperty(t,"titleBackground",{get:function(){return 2106923},enumerable:!0,configurable:!0}),t}();t.Color=o,__reflect(o.prototype,"moon.Color");var n=function(){function e(){}return Object.defineProperty(e,"randomRect",{get:function(){return t.MoonUI.getRect(60,60,t.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"randomCircle",{get:function(){return t.MoonUI.getCircle(50,t.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pointNormal",{get:function(){return t.MoonUI.getCircle(6,t.Color.black)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pointDown",{get:function(){return t.MoonUI.getCircle(6,t.Color.gray)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buttonNormal",{get:function(){return t.MoonUI.getRect(60,60,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buttonDown",{get:function(){return t.MoonUI.getRect(60,60,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"radioOff",{get:function(){return t.MoonUI.getRadioCircle(t.Color.white,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"radioOn",{get:function(){return t.MoonUI.getRadioCircle(t.Color.white,t.Color.black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"checkBoxOff",{get:function(){return t.MoonUI.getCheckBoxRect(t.Color.white,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"checkBoxOn",{get:function(){return t.MoonUI.getCheckBoxRect(t.Color.white,t.Color.black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"switchOff",{get:function(){return t.MoonUI.getSwitch(t.Color.skinNormal,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"switchOn",{get:function(){return t.MoonUI.getSwitch(t.Color.skinNormal,t.Color.white,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"progressBackground",{get:function(){return t.MoonUI.getRect(300,20,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"progressValue",{get:function(){return t.MoonUI.getRect(300,20,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderBackground",{get:function(){return t.MoonUI.getRect(300,10,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderValue",{get:function(){return t.MoonUI.getRect(300,10,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderBar",{get:function(){return t.MoonUI.getCircle(15,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scrollBar",{get:function(){return t.MoonUI.getRect(10,10,t.Color.skinNormal)},enumerable:!0,configurable:!0}),e.getRodatioButton=function(e){var i=new y(t.Skin.radioOff,t.Skin.radioOn);return i.skinAutoScale=!1,i.label=e,i.labelColor=t.Color.black,i.setLabelPoint(40,0),i},e.getCheckBox=function(e){var i=[t.Skin.checkBoxOff,t.Skin.checkBoxOff,t.Skin.checkBoxOn,t.Skin.checkBoxOn],o=new t.MoreSkinButton(i);return o.skinAutoScale=!1,o.label=e,o.toggleSwitch=!0,o.labelColor=t.Color.black,o.setLabelPoint(50,2),o},e}();t.Skin=n,__reflect(n.prototype,"moon.Skin");var r=function(){function e(){}return Object.defineProperty(e,"randomColor",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),e.getRect=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=new Sprite;return r.graphics.beginFill(i),r.graphics.drawRect(o,n,t,e),r.graphics.endFill(),r},e.getRectAndX=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=this.getRect(t,e,i,o,n),s=new Sprite;s.graphics.lineStyle(.1),s.graphics.moveTo(0,0),s.graphics.lineTo(t,e);var a=new Sprite;return a.graphics.lineStyle(.1),a.graphics.moveTo(t,0),a.graphics.lineTo(0,e),r.addChild(s),r.addChild(a),r},e.getRoundRect=function(t,e,i,o,n,r,s){void 0===i&&(i=0),void 0===o&&(o=5),void 0===n&&(n=5),void 0===r&&(r=0),void 0===s&&(s=0);var a=new Sprite;return a.graphics.beginFill(i),a.graphics.drawRoundRect(r,s,t,e,o,n),a.graphics.endFill(),a},e.getCircle=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0);var n=new Sprite;return n.graphics.beginFill(e),n.graphics.drawCircle(i,o,t),n.graphics.endFill(),n},e.getPolygon=function(t,e,i,o){void 0===t&&(t=3),void 0===e&&(e=10),void 0===i&&(i=0),void 0===o&&(o=0);var n=new Sprite;n.rotation=o,n.graphics.beginFill(i);for(var r=0;t>=r;r++){var s=Math.cos(r*(360/t)*Math.PI/180)*e,a=Math.sin(r*(360/t)*Math.PI/180)*e;0==r?n.graphics.moveTo(s,a):n.graphics.lineTo(s,a)}return n.graphics.endFill(),n},e.getArrowRoundRect=function(t,e,i,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var r=new Sprite;r.addChild(this.getRoundRect(t,e,i));var s=this.getPolygon(3,t/3,o,30+n);return s.x=r.width>>1,s.y=r.height>>1,r.addChild(s),r},e.getScrollLineBar=function(t,e,i){for(var o=new Sprite,n=e/3,r=0;3>r;r++){var s=this.getRect(t,1,i,0,r*n);o.addChild(s)}return o},e.getAddRoundRect=function(t,e,i){var o=new Sprite;o.addChild(this.getRoundRect(t,e,i));var n=this.getRect(t/2,2,0,t/4,e/2-1),r=this.getRect(2,e/2,0,t/2-1,e/4);return o.addChild(n),o.addChild(r),o},e.getRemoveRoundRect=function(t,e,i){var o=new Sprite;o.addChild(this.getRoundRect(t,e,i));var n=this.getRect(t/2,2,0,t/4,e/2-1);return o.addChild(n),o},e.getRoundRectText=function(t,e,i,o){void 0===o&&(o="click");var n=new Sprite;n.addChild(this.getRoundRect(t,e,i));var r=new TextField;return r.text=o,r.x=n.width-r.width>>1,r.y=n.height-r.height>>1,n.addChild(r),n},e.getSwitch=function(e,i,o){void 0===e&&(e=16777215),void 0===i&&(i=0),void 0===o&&(o=0);var n=t.MoonUI.getRoundRect(80,50,e,60,60);return n.addChild(t.MoonUI.getCircle(22,i,0==o?25:55,25)),n},e.getCheckBoxRect=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var o=new Sprite;if(o.addChild(this.getRect(40,40,t)),1==i){var n=new Sprite;n.graphics.beginFill(e),n.graphics.moveTo(0,20),n.graphics.lineTo(20,36),n.graphics.lineTo(44,8),n.graphics.lineTo(36,0),n.graphics.lineTo(20,18),n.graphics.lineTo(12,8),n.graphics.lineTo(0,20),o.addChild(n)}return o},e.getRadioCircle=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var o=new Sprite;if(o.addChild(this.getCircle(16,t,16,16)),o.graphics.lineStyle(1,0),1==i){var n=this.getCircle(8,e,16,16);o.addChild(n)}return o},e.getGridding=function(t,e){void 0===e&&(e=0);var i=new Sprite;i.graphics.lineStyle(.1,e);for(var o=t.width/t.x,n=t.height/t.y,r=0;r<t.x;r++)i.graphics.moveTo(0,r*n),i.graphics.lineTo(t.width,r*n);for(r=0;r<t.y;r++)i.graphics.moveTo(r*o,0),i.graphics.lineTo(r*o,t.height);return i},e}();t.MoonUI=r,__reflect(r.prototype,"moon.MoonUI");var s=function(){function t(){}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(t){var e=(new f).textField;e.textAlign=egret.HorizontalAlign.LEFT,t.addChild(e),this.txtSimple=e;var e=(new f).textField;e.size=25,t.addChild(e),this.txtMessage=e},t.prototype.log=function(t){this.txtSimple.text=t},t.prototype.logMessage=function(t){this.txtMessage.appendText(t+"\n")},t.prototype.setLogColor=function(t){this.txtSimple.textColor=t},t.prototype.setLogMessageColor=function(t){this.txtMessage.textColor=t},t}();t.showLog=s,__reflect(s.prototype,"moon.showLog");var a=function(){function e(){this.bgName="tips_png"}return e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(t){this.stage=t},e.prototype.simpleTips=function(e,i){null==this.tipsView&&(this.tipsView=new t.BasicTips(this.bgName),this.tipsView.setValue(e),this.stage.addChild(this.tipsView),this.setPosition(i),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this))},e.prototype.setPosition=function(t){t&&(this.tipsView.x=t.x-(this.tipsView.width>>1),this.tipsView.y=t.y-2*this.tipsView.height,this.tipsView.y<0&&(this.tipsView.y=t.y),this.tipsView.y+this.tipsView.height>this.stage.stageHeight&&(this.tipsView.y=t.y-(this.tipsView.height+50)),this.tipsView.x<0&&(this.tipsView.x=t.x+50),this.tipsView.x+this.tipsView.width>this.stage.stageWidth&&(this.tipsView.x=t.x-(this.tipsView.width+50)))},e.prototype.removeTips=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this);var t=this.tipsView.parent;null!=t&&(t.removeChild(this.tipsView),this.tipsView=null)},e}();t.TipsManager=a,__reflect(a.prototype,"moon.TipsManager");var h=function(t){function e(e,i,o){void 0===e&&(e=""),void 0===i&&(i=null),void 0===o&&(o=null);var n=t.call(this)||this;return n.type=e,n.data=i,n.currentTarget=o,n}return __extends(e,t),e.MOUSE_OVER="event-over",e.MOUSE_OUT="event-out",e.MOUSE_DOWN="event-down",e.MOUSE_MOVE="event-move",e.MOUSE_UP="event-up",e.CLICK="event-click",e.CHANGE="change",e.COMPLETE="complete",e.RENDER_COMPLETE="render complete",e.UPDATE="update",e.START="start",e.MOVE="move",e.OVER="over",e.PAUSE="pause",e}(egret.EventDispatcher);t.MoonEvent=h,__reflect(h.prototype,"moon.MoonEvent");var c=function(t){function e(){var e=t.call(this)||this;return e._type=i.SHAPE_RECT,e._color=0,e.display=new Sprite,e.bg=new Sprite,e}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._data.c=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(t){this._data=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.draw=function(){this.display.graphics.clear(),this.display=this.getDisplay(this._data),this.addChild(this.display),this.setPosition()},e.prototype.setPosition=function(){null!=this.bg&&this.type!=i.SHAPE_CIRCLE&&(this.display.x=this.bg.width-this.display.width>>1,this.display.y=this.bg.height-this.display.height>>1)},e.prototype.setBackground=function(t,e){void 0===e&&(e=1);var i=this._data,o={};for(var n in i)o[n]=i[n];o.c=t,o.w&&(o.w=o.w+2*e),o.h&&(o.h=o.h+2*e),o.r&&(o.r=o.r+e),this.bg.graphics.clear(),this.bg=this.getDisplay(o),this.addChildAt(this.bg,0),this.setPosition()},e.prototype.getDisplay=function(t){switch(this.type){case i.SHAPE_RECT:return r.getRect(t.w,t.h,t.c);case i.SHAPE_RECT_ROUND:return r.getRoundRect(t.w,t.h,t.c,t.ew,t.eh);case i.SHAPE_CIRCLE:return r.getCircle(t.r,t.c)}},e}(Sprite);t.MoonDisplayObject=c,__reflect(c.prototype,"moon.MoonDisplayObject");var l=function(t){function e(){var e=t.call(this)||this;return e.dataEvent=new Object,e.init(),e.once(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.render()},e.prototype.init=function(){},e.prototype.render=function(){this.stageWidth=this.stage.stageWidth,this.stageHeight=this.stage.stageHeight},e.prototype.dispEvent=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),this.dataEvent){var o=this.dataEvent[t];if(null!=o){var n=new h;n.currentTarget=this,n.data=e,n.type=t,n.dataType=i,o["this"]?o.apply(o["this"],[n]):o(n)}}},e.prototype.addEvent=function(t,e,i){void 0===i&&(i=null),this.dataEvent&&null==this.dataEvent[t]&&(e["this"]=i,this.dataEvent[t]=e)},e.prototype.removeEvent=function(t,e){this.dataEvent&&this.dataEvent[t]&&delete this.dataEvent[t]},e.prototype.removeFromParent=function(t){void 0===t&&(t=!1);var e=this.parent;t&&this.dispose(),e&&e.contains(this)&&e.removeChild(this),e=null},e.prototype.removeChildAll=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=2147483647),void 0===i&&(i=!1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var o=t;e>=o;++o)this.removeChildIndex(t,i)},e.prototype.removeChildIndex=function(t,i){if(t>=0||t<this.numChildren){var o=this.getChildAt(t);if(o instanceof e)o.removeFromParent(i);else{var n=this.getChildAt(t);n.parent&&n.parent.removeChild(n)}}},e.prototype.dispose=function(){this.removeChildAll(0,-1,!0),this.dataEvent=null},e}(DisplayObjectContainer);t.MoonContainer=l,__reflect(l.prototype,"moon.MoonContainer");var d=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.createText=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="");var o=(new f).textField;return o.x=t,o.y=e,o.text=i,this.addChild(o),o},i.prototype.createRect=function(e,i,o,n,r){void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=0);var s=t.MoonUI.getRect(e,i,o,n,r);return this.addChild(s),s},i.prototype.createCircle=function(e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=t.MoonUI.getCircle(e,i,o,n);return this.addChild(r),r},i.prototype.createRectBySprite=function(t,e,i,o,n,r){void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=0),t.graphics.clear(),t.graphics.beginFill(o),t.graphics.drawRect(n,r,e,i),t.graphics.endFill()},i.prototype.createBackground=function(t){return void 0===t&&(t=0),this.createRect(this.stageWidth,this.stageHeight,t)},i}(l);t.BasicView=d,__reflect(d.prototype,"moon.BasicView");var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.play=function(){egret.startTick(this.loop,this)},e.prototype.stop=function(){egret.stopTick(this.loop,this)},e.prototype.loop=function(t){return traceSimple(t),!0},e}(d);t.GameView=p,__reflect(p.prototype,"moon.GameView");var u=function(e){function i(t,i,o){void 0===o&&(o=-1);var n=e.call(this)||this;return n.rect=t,n.house=i,n.color=o,n}return __extends(i,e),i.prototype.render=function(){var e=this.house,i=t.MoonUI.getRect(this.rect.width,this.rect.height);i.alpha=.1,this.addChild(i);for(var o=this.rect.width/e.width,n=0,r=0;o>r;r++){var s=-1==this.color?16777215*Math.random():this.color,a=e.width+Math.random()*e.x,h=e.height+Math.random()*e.y,c=t.MoonUI.getRect(a,h,s);this.addChild(c),c.y=this.rect.height-c.height,c.x=n,n=c.x+c.width}},i}(l);t.MapHorizontalHouse=u,__reflect(u.prototype,"moon.MapHorizontalHouse");var g=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this)||this;return o.texture=RES.getRes(e),o.scale9Grid=i||new Rectangle(8,8,2,2),o}return __extends(e,t),e}(Bitmap);t.Scale9Image=g,__reflect(g.prototype,"moon.Scale9Image");var v=function(t){function e(e){var i=t.call(this)||this;return i.side=14,i.lineSpacing=4,i.image=new g(e),i.addChild(i.image),i.text=(new f).textField,i.text.textAlign=egret.HorizontalAlign.CENTER,i.text.verticalAlign=egret.VerticalAlign.MIDDLE,i.text.lineSpacing=i.lineSpacing,i.addChild(i.text),i}return __extends(e,t),e.prototype.setValue=function(t){this.text.text=t,this.setCenter()},e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setCenter()},e.prototype.setCenter=function(){var t=this.image,e=this.text,i=this.side,o=e.width+i,n=e.height+i;t.width=o,t.height=n,e.x=e.y=i>>1},e}(l);t.BasicTips=v,__reflect(v.prototype,"moon.BasicTips");var f=function(e){function i(i,o){void 0===i&&(i=""),void 0===o&&(o=16777215);var n=e.call(this)||this;return n.text=new TextField,n.text.textAlign=egret.HorizontalAlign.LEFT,n.text.verticalAlign=egret.VerticalAlign.MIDDLE,n.text.text=i,n.text.textColor=o,n.text.fontFamily=t.FONT.fontName,n.addChild(n.text),n}return __extends(i,e),Object.defineProperty(i.prototype,"textField",{get:function(){return this.text},enumerable:!0,configurable:!0}),i}(l);t.Label=f,__reflect(f.prototype,"moon.Label");var y=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=t.call(this)||this;return o.skinAutoScale=!0,o.statusNormal=e||n.buttonNormal,o.statusDown=i||n.buttonDown,o.skinContainer=new DisplayObjectContainer,o.addChild(o.skinContainer),o.updateSkin(o.statusNormal),o.text=(new f).textField,o.addChild(o.text),o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o.onTouch,o),o}return __extends(e,t),e.prototype.setLabelPoint=function(t,e){this.text.anchorOffsetX=0,this.text.anchorOffsetY=0,this.text.x=t,this.text.y=e},Object.defineProperty(e.prototype,"labelCircle",{set:function(t){this.text.text=t,this.skinAutoScale=!1,this.text.x=this.text.y=0,this.text.anchorOffsetX=this.text.textWidth>>1,this.text.anchorOffsetY=this.text.textHeight>>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelColor",{set:function(t){this.text.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this.text.text},set:function(t){this.text.text=t;this.text.width+20;this.setSkinSize(),this.setTextPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFild",{get:function(){return this.text},enumerable:!0,configurable:!0}),e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setSkinSize(),this.setTextPosition()},e.prototype.setSkinNormal=function(){this.updateSkin(this.statusNormal)},e.prototype.setSkinDown=function(){this.updateSkin(this.statusDown)},e.prototype.onTouch=function(t){t.type==egret.TouchEvent.TOUCH_BEGIN?(this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusDown)):(this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusNormal))},Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.text.width+20},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.text.height+20},enumerable:!0,configurable:!0}),e.prototype.setSkinSize=function(){if(this.skinAutoScale&&""!=this.text.text){var t=this.textWidth/this.statusNormal.width;this.statusNormal instanceof Bitmap?(this.statusNormal.width=this.textWidth,this.statusDown.width=this.textWidth):this.statusNormal.scaleX=this.statusDown.scaleX=t;var e=this.textHeight;e>=this.statusNormal.height&&(t=e/this.statusNormal.height,this.statusNormal instanceof Bitmap?(this.statusNormal.height=this.textHeight,this.statusDown.height=this.textHeight):this.statusNormal.scaleY=this.statusDown.scaleY=t)}},e.prototype.setTextPosition=function(){this.text.anchorOffsetX=this.text.width>>1,this.text.anchorOffsetY=this.text.height>>1,this.textWidth>this.statusNormal.width?this.text.x=this.textWidth>>1:this.text.x=this.statusNormal.width>>1,this.textHeight>this.statusNormal.height?this.text.y=this.textHeight>>1:this.text.y=this.statusNormal.height>>1},e.prototype.updateSkin=function(t){this.skinContainer.removeChildren(),this.skinContainer.addChild(t)},e.prototype.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),t.prototype.dispose.call(this)},e}(l);t.BasicButton=y,__reflect(y.prototype,"moon.BasicButton");var m=function(t){function e(e){var i=t.call(this,e[0],e[1])||this;return i._currentPage=0,i.skins=e,i}return __extends(e,t),Object.defineProperty(e.prototype,"currentPage",{get:function(){return this._currentPage},set:function(t){t=2*t==this.skins.length?0:t,this._currentPage=t,this.statusNormal=this.skins[2*t],this.statusDown=this.skins[2*t+1],this.setSkinSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleSwitch",{set:function(t){this._toggleSwitch=t},enumerable:!0,configurable:!0}),e.prototype.onTouch=function(e){e.type==egret.TouchEvent.TOUCH_END&&this._toggleSwitch&&(this.currentPage=1-this.currentPage),t.prototype.onTouch.call(this,e)},e}(y);t.MoreSkinButton=m,__reflect(m.prototype,"moon.MoreSkinButton");var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e}return __extends(e,t),e.prototype.addItem=function(t){this.items.push(t)},e.prototype.removeItem=function(t){var e=this.items.indexOf(t);e>0&&this.items.splice(e,1)},e.prototype.hasItem=function(t){return t>=0||t<this.items.length},e.prototype.getItem=function(t){return this.items[t]},e.prototype.update=function(){},e}(d);t.BasicBar=C,__reflect(C.prototype,"moon.BasicBar",["moon.IItem"]);var _=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=t.call(this)||this;return o._value=0,o.setSkin(e,i),o.addChild(o.skinBg),o.addChild(o.skinValue),o.text=(new f).textField,o.addChild(o.text),o}return __extends(e,t),e.prototype.setSkin=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.skinBg=t||n.progressBackground,this.skinValue=e||n.progressValue},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=0>t?0:t>1?1:t,this._value=t,this.skinValue.scaleX=t},enumerable:!0,configurable:!0}),e.prototype.showText=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1),this.text.text=t,-1==e?this.text.x=this.skinBg.width-this.text.width>>1:this.text.x=e,-1==i?this.text.y=this.skinBg.height+5:this.text.y=i},e}(l);t.ProgressBar=_,__reflect(_.prototype,"moon.ProgressBar");var w=function(t){function e(e,i,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=null);var r=t.call(this,e,i)||this;return r.skinBar=o||n.sliderBar,r.addChild(r.skinBar),r.skinBar.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onTouch,r),r.skinBar.touchEnabled=!0,r.layout(),r.value=1,r}return __extends(e,t),e.prototype.setSkin=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.skinBg=t||n.sliderBackground,this.skinValue=e||n.sliderValue},e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.dispEvent(h.START);break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX,t.stageY),this.dispEvent(h.MOVE);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.dispEvent(h.OVER)}},e.prototype.moveDo=function(t,e){var o,n=this.globalToLocal(t,e);o=this.type==i.HORIZONTAL?n.x/this.skinValue.width:-n.y/this.skinValue.width,this.value=o},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=0>t?0:t>1?1:t,this._value=t,this.skinValue.scaleX=t,this.type==i.HORIZONTAL?this.skinBar.x=this.skinValue.width*t:this.skinBar.y=-this.skinValue.width*t},enumerable:!0,configurable:!0}),e.prototype.layout=function(t,e){if(void 0===t&&(t=i.HORIZONTAL),void 0===e&&(e=0),this.type=t,t==i.VERTICAL){var o=-90;this.skinBar.x=this.skinValue.height>>1}else{var o=0;this.skinBar.y=this.skinValue.height>>1}this.skinBg.rotation=o,this.skinValue.rotation=o},e}(_);t.SliderBar=w,__reflect(w.prototype,"moon.SliderBar",["moon.ILayout"]);var E=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.skinBar=e||n.scrollBar,i.skinBar.alpha=0,i.addChild(i.skinBar),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onTouch,i),i.touchEnabled=!0,i.startPos=new Point,i.stPos=new Point,i.setSize(),i.layout(),i}return __extends(e,t),e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stPos.x=t.stageX,this.stPos.y=t.stageY,this.startPos.x=t.stageX-this._target.x,this.startPos.y=t.stageY-this._target.y,this.hideShow(1),this.startTime=egret.getTimer();break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX,t.stageY);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.hideShow(0),this.timeMove(t.stageX,t.stageY)}},e.prototype.timeMove=function(t,e){},e.prototype.hideShow=function(t){Tween.removeTweens(this.skinBar),1==t&&(this.skinBar.alpha=1);var e=Tween.get(this.skinBar);e.to({alpha:t},1500)},e.prototype.moveDo=function(t,e){this.type==i.VERTICAL?this.canMoveY(e):this.type==i.HORIZONTAL&&this.canMoveX(t)},e.prototype.canMoveX=function(t){var e=this.maskRect.width-this._target.width,i=t-this.startPos.x;i>e&&0>i&&(this._target.x=i,this.skinBar.x=-i/(this._target.width-this.maskRect.width)*(this.maskRect.width-this.skinBar.width))},e.prototype.canMoveY=function(t){var e=this.maskRect.height-this._target.height,i=t-this.startPos.y;i>e&&0>i&&(this._target.y=i,this.skinBar.y=-i/(this._target.height-this.maskRect.height)*(this.maskRect.height-this.skinBar.height))},e.prototype.setMask=function(){null!=this.maskRect&&null!=this._target&&(this._target.mask=this.maskRect)},e.prototype.setSkinBarPos=function(){this.skinBar.x=this.skinBar.y=0,this.type==i.VERTICAL?this.skinBar.x=this.maskRect.width-this.skinBar.width:this.type==i.HORIZONTAL&&(this.skinBar.y=this.maskRect.height-this.skinBar.height)},e.prototype.layout=function(t,e){void 0===t&&(t=i.VERTICAL),void 0===e&&(e=0),this.type=t,this.setSkinBarPos()},e.prototype.setSize=function(t,e){void 0===t&&(t=200),void 0===e&&(e=200),this.maskRect=r.getRect(t,e),this.addChild(this.maskRect),this.setMask(),this.setSkinBarPos()},Object.defineProperty(e.prototype,"target",{set:function(t){this._target=t,this.addChildAt(this._target,0),this.setMask()},enumerable:!0,configurable:!0}),e}(l);t.ScrollBar=E,__reflect(E.prototype,"moon.ScrollBar",["moon.ILayout"]);var T=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.prototype.addItemLabel=function(t,e){void 0===e&&(e=null),null==e?e=n.getCheckBox(t):e.label=t,this.addItem(e)},o.prototype.addItem=function(t){e.prototype.addItem.call(this,t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(t)},o.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),t.removeFromParent(!0)},o.prototype.onClick=function(e){e.currentTarget;this.dispEvent(t.MoonEvent.CHANGE)},o.prototype.layout=function(t,e){void 0===t&&(t=i.VERTICAL),void 0===e&&(e=50);for(var o=0;o<this.items.length;o++){var n=this.items[o];t==i.VERTICAL?n.y=e*o:n.x=e*o}},Object.defineProperty(o.prototype,"selectIndexs",{get:function(){for(var t=[],e=0;e<this.items.length;e++){var i=this.items[e];1==i.currentPage&&t.push(e)}return t},enumerable:!0,configurable:!0}),o}(C);t.CheckBoxBar=T,__reflect(T.prototype,"moon.CheckBoxBar",["moon.ILayout"]);var x=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAutoLayout=!1,t}return __extends(i,e),i.prototype.addItemLabel=function(t,e){void 0===e&&(e=null),null==e?e=n.getRodatioButton(t):e.label=t,this.addItem(e)},i.prototype.render=function(){this.update()},i.prototype.update=function(){var t;if(1==this.isAutoLayout)for(var e=0;e<this.items.length;e++)t=this.items[e],t.x=(t.width+10)*e},i.prototype.onClick=function(e){var i=e.currentTarget;this.selectIndex=this.items.indexOf(i),this.dispEvent(t.MoonEvent.CHANGE)},Object.defineProperty(i.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){function e(t){t.setSkinNormal()}this._selectIndex=t;var i=this.items[t];this.items.map(e,this),i.setSkinDown()},enumerable:!0,configurable:!0}),i}(T);t.RadioButtonBar=x,__reflect(x.prototype,"moon.RadioButtonBar");var S=function(e){function i(t,i){void 0===t&&(t=0),void 0===i&&(i=0);var o=e.call(this)||this;return o.titleHeight=60,o.pWidth=t,o.pHeight=t,o.titleBg=new Sprite,o.containerBg=new Sprite,o.title=(new f).textField,o.container=new l,o}return __extends(i,e),i.prototype.render=function(){0==this.pWidth&&0==this.pWidth?e.prototype.render.call(this):(this.stageWidth=this.pWidth,this.stageHeight=this.pHeight),this.createRectBySprite(this.titleBg,this.stageWidth,this.titleHeight,t.Color.titleBackground),this.createRectBySprite(this.containerBg,this.stageWidth,this.stageHeight-this.titleHeight,t.Color.white,0,this.titleHeight),this.addChild(this.titleBg),this.addChild(this.containerBg),this.title.anchorOffsetX=this.title.textWidth>>1,this.title.anchorOffsetY=this.title.textHeight>>1,this.title.x=this.stageWidth>>1,this.title.y=this.titleHeight>>1,this.addChild(this.title),this.container.y=this.titleHeight,this.addChild(this.container),this.containerMask=this.createRect(this.stageWidth,this.stageHeight-this.titleHeight,t.Color.white,0,this.titleHeight),this.container.mask=this.containerMask,this.dispEvent(h.RENDER_COMPLETE)
},i.prototype.addItem=function(t,i,o){void 0===i&&(i=0),void 0===o&&(o=0),e.prototype.addItem.call(this,t),0!=i&&(t.x=i),0!=o&&(t.y=o),this.container.addChild(t)},i.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),this.container.contains(t)&&this.container.removeChild(t)},Object.defineProperty(i.prototype,"label",{get:function(){return this.title.text},set:function(t){this.title.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorTop",{set:function(t){var e=this.titleBg.width,i=this.titleBg.height;this.createRectBySprite(this.titleBg,e,i,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorBottom",{set:function(t){var e=this.containerBg.width,i=this.containerBg.height;this.createRectBySprite(this.containerBg,e,i,t,0,this.titleHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"windowRect",{get:function(){var t=new Rectangle(0,0,this.stageWidth,this.stageHeight);return t},enumerable:!0,configurable:!0}),i.prototype.removeAll=function(){this.container.dispose()},i}(C);t.PanelBar=S,__reflect(S.prototype,"moon.PanelBar");var M=function(e){function i(){var t=e.call(this)||this;return t.radioButton=new x,t.currentPage=0,t.posStartX=0,t.moveItems=[],t.container=new l,t.addChild(t.container),t.radioButton.isAutoLayout=!0,t}return __extends(i,e),i.prototype.open=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},i.prototype.close=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},i.prototype.update=function(){this.container.removeChildren();var e,i;if(this.items.length>0){var o=this.items[0];this.container.addChild(o),e=o.windowRect.width,i=o.windowRect.height,this.panelWidth=e}for(var n=this.items.length,r=0;n>r;r++){var s=new y(t.Skin.pointNormal,t.Skin.pointDown);this.radioButton.addItem(s)}s=this.radioButton.getItem(0),s.setSkinDown(),this.radioButton.x=e-22*n>>1,this.radioButton.y=i-20,this.addChild(this.radioButton)},i.prototype.render=function(){this.update(),this.items.length>1&&this.open()},i.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.posStartX=t.stageX,this.dispEvent(h.START);break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.moveEnd(t.stageX)}},i.prototype.moveDo=function(t){var e=t-this.posStartX;if(Math.abs(e)>20){if(0==this.moveItems.length){var i=this.items[this.currentPage],o=this.panelWidth;this.moveItems.push(i),0==this.currentPage?(i=this.items[this.currentPage+1],this.container.addChild(i),i.x=o,this.moveItems.push(i)):this.currentPage==this.items.length-1?(i=this.items[this.currentPage-1],this.container.addChild(i),i.x=-o,this.moveItems.push(i)):(i=this.items[this.currentPage-1],this.container.addChild(i),i.x=-o,this.moveItems.push(i),i=this.items[this.currentPage+1],this.container.addChild(i),i.x=o,this.moveItems.push(i))}var n=0==this.currentPage&&e>0,r=this.currentPage==this.items.length-1&&0>e;n||r||(this.container.x=e)}},i.prototype.moveEnd=function(t){if(0==this.container.x)return void this.backCall(0);var e=t-this.posStartX,i=egret.Tween.get(this.container),o=this.panelWidth,n=this.panelWidth>>2;Math.abs(e)>n?(o=this.panelWidth,o*=e>0?1:-1):(e=0,o=0);var r=200;i.to({x:o},r),i.call(this.backCall,this,[e])},i.prototype.backCall=function(t){t>0?(this.currentPage--,this.currentPage=this.currentPage<0?0:this.currentPage):0>t&&(this.currentPage++,this.currentPage=this.currentPage==this.items.length?this.items.length-1:this.currentPage),this.container.removeChildren();var e=this.items[this.currentPage];e.x=0,this.container.addChild(e),this.radioButton.selectIndex=this.currentPage,this.moveItems.length=0,this.container.x=0,this.dispEvent(h.OVER)},i}(C);t.PanelMoreManager=M,__reflect(M.prototype,"moon.PanelMoreManager",["moon.IOnoff"])}(moon||(moon={}));var AbstractP2Test=function(t){function e(){var e=t.call(this)||this;return e.factor=1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),this.onAppReady(),this.addEventListener(egret.Event.ENTER_FRAME,this.loop,this))},e.prototype.enableMouseDrag=function(t){this.world=t,this.emptyBody=new p2.Body,this.world.addBody(this.emptyBody),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},e.prototype.createDebug=function(){var t=new egret.Sprite;this.addChild(t),this.debugDraw=new p2DebugDraw(this.world,t)},e.prototype.createFourWall=function(){function t(t){var e=new p2.Box({width:t.width,height:t.height}),i=new p2.Body({mass:0});i.addShape(e),i.position=[t.x,t.y],s.addBody(i)}var e=100,i=this.stage.stageWidth,o=this.stage.stageHeight,n=i/2,r=o/2,s=this.world;t(new egret.Rectangle(n,0,i,e)),t(new egret.Rectangle(n,o,i,e)),t(new egret.Rectangle(0,r,e,o)),t(new egret.Rectangle(i,r,e,o))},e.prototype.onTouch=function(t){var e=new Array(t.stageX/this.factor,t.stageY/this.factor);switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:var i=this.world.hitTest(e,this.world.bodies);if(i.length>0){var o=i[0];this.emptyBody.position[0]=e[0],this.emptyBody.position[1]=e[1],this.mouseJoint=new p2.RevoluteConstraint(this.emptyBody,o,{worldPivot:e,collideConnected:!1}),this.world.addConstraint(this.mouseJoint),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this)}break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.world.removeConstraint(this.mouseJoint),this.mouseJoint=null;break;case egret.TouchEvent.TOUCH_MOVE:this.emptyBody.position[0]=e[0],this.emptyBody.position[1]=e[1]}},e.prototype.onAppReady=function(){},e.prototype.loop=function(){this.world.step(1/60),this.debugDraw.drawDebug()},e}(egret.DisplayObjectContainer);__reflect(AbstractP2Test.prototype,"AbstractP2Test");var Button=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(eui.Button);__reflect(Button.prototype,"Button");var ImageIcon=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(eui.Image);__reflect(ImageIcon.prototype,"ImageIcon");var Component=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(eui.Component);__reflect(Component.prototype,"Component");var BasicComponent=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(t){this.addEventListener(eui.UIEvent.COMPLETE,this.onComplete,this),this.skinName=t},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.isCreateChildren=!0,this.init()},e.prototype.onComplete=function(){this.isLoadComplete=!0,this.init()},e.prototype.init=function(){this.isCreateChildren&&this.isLoadComplete&&this.render()},e.prototype.render=function(){},e.prototype.createBitmapByName=function(t,e){void 0===e&&(e=null);var i=new egret.Bitmap,o=RES.getRes(t);return i.texture=o,null!=e&&(i.scale9Grid=e),i},e.prototype.addKeyboardEvent=function(t,e){var i=this;document.addEventListener(t,function(o){e&&e({type:t,keyCode:o.keyCode,key:o.key,self:i})})},e}(Component);__reflect(BasicComponent.prototype,"BasicComponent");var TestFromPolygon=function(t){function e(){var e=t.call(this)||this;return e.points=new Array,e}return __extends(e,t),e.prototype.onAppReady=function(){this.createWorld(),this.createFourWall(),this.createDebug(),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchEventHandler,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEventHandler,this),this.createBody()},e.prototype.createWorld=function(){var t=new p2.World;t.sleepMode=p2.World.BODY_SLEEPING,t.gravity=[0,100],this.world=t},e.prototype.createFourWall=function(){function t(t){var e=new p2.Box({width:t.width,height:t.height}),i=new p2.Body({mass:0});i.addShape(e),i.position=[t.x,t.y],s.addBody(i)}var e=10,i=this.stage.stageWidth,o=this.stage.stageHeight,n=i/2,r=o/2,s=this.world;t(new egret.Rectangle(n,0,i,e)),t(new egret.Rectangle(n,o,i,e)),t(new egret.Rectangle(0,r,e,o)),t(new egret.Rectangle(i,r,e,o))},e.prototype.createGround=function(){var t=new p2.Box({width:this.stage.stageWidth,height:10}),e=new p2.Body;e.addShape(t),e.type=p2.Body.STATIC,e.position=[this.stage.stageWidth/2,this.stage.stageHeight],e.angle=Math.PI,this.world.addBody(e)},e.prototype.createBody=function(){var t=new p2.Circle({radius:20*Math.random()+30}),e=new p2.Body({mass:10});e.addShape(t),e.position=[200*Math.random(),200*Math.random()],e.angle=Math.PI,this.world.addBody(e)},e.prototype.loop=function(){this.world.step(1/60),this.debugDraw.drawDebug(),this.points.length>1&&this.debugDraw.drawConvex(this.points,0,1,!1)},e.prototype.touchEventHandler=function(t){var e=new Array(t.stageX/this.factor,t.stageY/this.factor);switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.prePoint=this.copyPoint(e),this.points.push(this.prePoint,this.prePoint),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchEventHandler,this);break;case egret.TouchEvent.TOUCH_END:this.createConvexBody(),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchEventHandler,this);break;case egret.TouchEvent.TOUCH_MOVE:var i=p2.vec2.dist(e,this.prePoint);i>30/this.factor?(this.points.push(this.prePoint),this.prePoint=this.copyPoint(e),this.points[this.points.length-1]=this.copyPoint(e)):this.points[this.points.length-1]=this.copyPoint(e)}},e.prototype.createConvexBody=function(){var t=new p2.Body({mass:10});t.fromPolygon(this.points,{optimalDecomp:!1}),this.world.addBody(t),this.points=[]},e.prototype.copyPoint=function(t){return new Array(t[0],t[1])},e}(AbstractP2Test);__reflect(TestFromPolygon.prototype,"TestFromPolygon");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,o){function n(t){e.call(o,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(o))}"undefined"!=typeof generateEUI&&egret.callLater(function(){e.call(o,generateEUI)},this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var DragonDemoAction;!function(t){var e;!function(t){t[t.stand=0]="stand",t[t.walk=1]="walk",t[t.run=2]="run",t[t.atk=3]="atk",t[t.hurt=4]="hurt",t[t.jump=5]="jump",t[t.jumpTwo=6]="jumpTwo",t[t.jumpDown=7]="jumpDown"}(e=t.names||(t.names={}))}(DragonDemoAction||(DragonDemoAction={}));var DragonDemo=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),FrameAnimation.getIns().loop(),FrameAnimation.getIns().addFactoryByName("wukong"),this.names=[DragonDemoAction.names[0],DragonDemoAction.names[1],DragonDemoAction.names[2],DragonDemoAction.names[3],DragonDemoAction.names[4],DragonDemoAction.names[5],DragonDemoAction.names[6],DragonDemoAction.names[7]],this.role=FrameAnimation.getIns().getAnimationSpriteByName(this.names[DragonDemoAction.names.run]),this.role.x=200,this.role.y=200,this.addChild(this.role),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},e.prototype.onClick=function(t){this.role=FrameAnimation.getIns().getAnimationSpriteByName(this.names[DragonDemoAction.names.jump])},e}(egret.DisplayObjectContainer);__reflect(DragonDemo.prototype,"DragonDemo");var FrameAnimation=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data={},e}return __extends(e,t),e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.loop=function(){function t(t){var e=.008;return dragonBones.WorldClock.clock.advanceTime(e),!1}egret.startTick(t,this)},e.prototype.setFactoryNameName=function(t){this.factoryName=t},e.prototype.addFactoryByName=function(t){this.factoryName=t;var e=RES.getRes(t+"_ske_json"),i=RES.getRes(t+"_tex_json"),o=RES.getRes(t+"_tex_png"),n=new dragonBones.EgretFactory;n.parseDragonBonesData(e),n.parseTextureAtlasData(o,i);n.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(e)),n.addTextureAtlasData(new dragonBones.EgretTextureAtlas(o,i)),this.data[t]=n},e.prototype.addWorld=function(t){dragonBones.WorldClock.clock.add(t)},e.prototype.getArmatureByName=function(t){var e=this.data[this.factoryName],i=e.buildArmature(t);return i},e.prototype.getDisplayByName=function(t){return this.getArmatureByName(t).getDisplay()},e.prototype.getAnimationByName=function(t){return this.getArmatureByName(t).animation},e.prototype.getAnimationSpriteByName=function(t){var e;null==this.data[this.factoryName+"-sprite"]&&(e=new egret.Sprite,this.data[this.factoryName+"-sprite"]=e),e=this.data[this.factoryName+"-sprite"],e.removeChildren();var i=this.getArmatureByName(t);return this.addWorld(i),e.addChild(i.display),i.animation.gotoAndPlay(t),e},e}(egret.HashObject);__reflect(FrameAnimation.prototype,"FrameAnimation");var AStar=function(){function t(){this.isEnd=!1,this._heuristic=this.diagonal,this._straightCost=1,this._diagCost=Math.SQRT2}return t.prototype.findPath=function(t){return this._grid=t,this._open=[],this._closed=[],this._startNode=this._grid.startNode,this._endNode=this._grid.endNode,this._startNode.g=0,this._startNode.h=this._heuristic(this._startNode),this._startNode.f=this._startNode.g+this._startNode.h,this._open[0]=this._startNode,this.search()},t.prototype.search=function(){for(var t;!this.isEnd;){var e,i=this._open.length;for(t=this._open[0],e=0,a=0;i>a;a++)this._open[a].f<t.f&&(t=this._open[a],e=a);this._open[e]=this._open[this._open.length-1],this._open.pop(),this._closed.push(t);for(var o=0>t.x-1?0:t.x-1,n=this._grid.numCols-1<t.x+1?this._grid.numCols-1:t.x+1,r=0>t.y-1?0:t.y-1,s=this._grid.numRows-1<t.y+1?this._grid.numRows-1:t.y+1,a=o;n>=a;a++)for(var h=r;s>=h;h++){var c=this._grid.getNode(a,h);if(c!=t&&c.walkable&&this._grid.getNode(t.x,c.y).walkable&&this._grid.getNode(c.x,t.y).walkable){var l=this._straightCost;t.x!=c.x&&t.y!=c.y&&(l=1.4);var d=t.g+l*c.costMultiplier,p=this._heuristic(c),u=d+p;-1!=this._open.indexOf(c)||-1!=this._closed.indexOf(c)?u<c.f&&(c.f=u,c.g=d,c.h=p,c.parent=t):(c.f=u,c.g=d,c.h=p,c.parent=t,this._open.push(c)),c==this._endNode&&(this.isEnd=!0)}}if(0==this._open.length)return console.log("no path found"),this.isEnd=!0,!1}return this.buildPath(),!0},t.prototype.floyd=function(){if(null!=this.path){this._floydPath=this.path.concat();var t=this._floydPath.length;if(t>2){var e=new NodePoint(0,0),i=new NodePoint(0,0);this.floydVector(e,this._floydPath[t-1],this._floydPath[t-2]);for(var o=this._floydPath.length-3;o>=0;o--)this.floydVector(i,this._floydPath[o+1],this._floydPath[o]),e.x==i.x&&e.y==i.y?this._floydPath.splice(o+1,1):(e.x=i.x,e.y=i.y)}for(t=this._floydPath.length,o=t-1;o>=0;o--)for(var n=0;o-2>=n;n++)if(0==this._grid.hasBarrier(this._floydPath[o].x,this._floydPath[o].y,this._floydPath[n].x,this._floydPath[n].y)){for(var r=o-1;r>n;r--)this._floydPath.splice(r,1);o=n,t=this._floydPath.length;break}}},t.prototype.floydVector=function(t,e,i){t.x=e.x-i.x,t.y=e.y-i.y},t.prototype.buildPath=function(){this._path=new Array;var t=this._endNode;for(this._path.push(t);t!=this._startNode;)t=t.parent,this._path.unshift(t)},Object.defineProperty(t.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"floydPath",{get:function(){return this._floydPath},enumerable:!0,configurable:!0}),t.prototype.manhattan=function(t){return Math.abs(t.x-this._endNode.x)*this._straightCost+Math.abs(t.y+this._endNode.y)*this._straightCost},t.prototype.euclidian=function(t){var e=t.x-this._endNode.x,i=t.y-this._endNode.y;return Math.sqrt(e*e+i*i)*this._straightCost},t.prototype.diagonal=function(t){var e=t.x-this._endNode.x<0?this._endNode.x-t.x:t.x-this._endNode.x,i=t.y-this._endNode.y<0?this._endNode.y-t.y:t.y-this._endNode.y,o=i>e?e:i,n=e+i;return 1.4*o+this._straightCost*(n-2*o)},Object.defineProperty(t.prototype,"visited",{get:function(){return this._open},enumerable:!0,configurable:!0}),t}();__reflect(AStar.prototype,"AStar");var NodePoint=function(){function t(t,e){this.walkable=!0,this.alphable=!1,this.costMultiplier=1,this.buriedDepth=-1,this.x=t,this.y=e}return t.prototype.getDistanceTo=function(t){var e=t.x-this.x,i=t.y-this.y;return this.distance=Math.sqrt(e*e+i*i),this.distance},t}();__reflect(NodePoint.prototype,"NodePoint");var Grid=function(){function t(t,e,i){this._numCols=t,this._numRows=e,this._cellSize=i,this._nodes=new Array;for(var o=0;o<this._numCols;o++){this._nodes[o]=[];for(var n=0;n<this._numRows;n++)this._nodes[o][n]=new NodePoint(o,n)}}return t.prototype.getNode=function(t,e){return this._nodes[t][e]},t.prototype.setEndNode=function(t,e){this._endNode=this._nodes[t][e]},t.prototype.setStartNode=function(t,e){this._startNode=this._nodes[t][e]},t.prototype.setWalkable=function(t,e,i){this._nodes[t][e].walkable=i},t.prototype.setAlphable=function(t,e,i){this._nodes[t][e].alphable=i},Object.defineProperty(t.prototype,"startNode",{get:function(){return this._startNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endNode",{get:function(){return this._endNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numCols",{get:function(){return this._numCols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numRows",{get:function(){return this._numRows},enumerable:!0,configurable:!0}),t.prototype.hasBarrier=function(t,e,i,o){if(t==i&&e==o)return!1;var n,r,s,a,h,c=new egret.Point(t*this._cellSize+this._cellSize/2,e*this._cellSize+this._cellSize/2),l=new egret.Point(i*this._cellSize+this._cellSize/2,o*this._cellSize+this._cellSize/2),d=Math.abs(i-t),p=Math.abs(o-e),u=d>p?!0:!1;if(u)for(n=MathUtil.getLineFunc(c,l,0),s=Math.min(t,i),a=Math.max(t,i),r=s;a>r;r++){var g=r*this._cellSize+this._cellSize,v=n(g);h=this.getNodesUnderPoint(r+1,v/this._cellSize);for(var f in h)if(0==h[f].walkable)return!0}else for(n=MathUtil.getLineFunc(c,l,1),s=Math.min(e,o),a=Math.max(e,o),r=s;a>r;r++){var y=r*this._cellSize+this._cellSize,m=n(y);h=this.getNodesUnderPoint(m/this._cellSize,r+1);for(var f in h)if(0==h[f].walkable)return!0}return!1},t.prototype.getNodesUnderPoint=function(t,e,i){void 0===i&&(i=null);var o=[],n=t%1==0,r=e%1==0;if(n&&r?(o[0]=this.getNode(t-1,e-1),o[1]=this.getNode(t,e-1),o[2]=this.getNode(t-1,e),o[3]=this.getNode(t,e)):n&&!r?(o[0]=this.getNode(t-1,Math.floor(e)),o[1]=this.getNode(t,Math.floor(e))):!n&&r?(o[0]=this.getNode(Math.floor(t),e-1),o[1]=this.getNode(Math.floor(t),e)):o[0]=this.getNode(Math.floor(t),Math.floor(e)),i&&i.length>0)for(var s=0;s<o.length;s++)-1!=i.indexOf(o[s])&&(o.splice(s,1),s--);return o},t.prototype.findReplacer=function(t,e){var i;if(e.walkable)i=e;else{-1==e.buriedDepth&&(e.buriedDepth=this.getNodeBuriedDepth(e,Math.max(this._numCols,this._numRows)));for(var o,n=e.x-e.buriedDepth<0?0:e.x-e.buriedDepth,r=e.x+e.buriedDepth>this.numCols-1?this.numCols-1:e.x+e.buriedDepth,s=e.y-e.buriedDepth<0?0:e.y-e.buriedDepth,a=e.y+e.buriedDepth>this.numRows-1?this.numRows-1:e.y+e.buriedDepth,h=n;r>=h;h++)for(var c=s;a>=c;c++)h>n&&r>h&&c>s&&a>c||(o=this.getNode(h,c),o.walkable&&(o.getDistanceTo(t),i?o.distance<i.distance&&(i=o):i=o))}return i},t.prototype.calculateBuriedDepth=function(){for(var t,e=0;e<this._numCols;e++)for(var i=0;i<this._numRows;i++)t=this._nodes[e][i],t.walkable?t.buriedDepth=0:t.buriedDepth=this.getNodeBuriedDepth(t,Math.max(this._numCols,this._numRows))},t.prototype.getNodeBuriedDepth=function(t,e){void 0===e&&(e=10);for(var i=t.walkable?0:1,o=1;e>=o;){for(var n,r=t.x-o<0?0:t.x-o,s=t.x+o>this.numCols-1?this.numCols-1:t.x+o,a=t.y-o<0?0:t.y-o,h=t.y+o>this.numRows-1?this.numRows-1:t.y+o,c=r;s>=c;c++)for(var l=a;h>=l;l++)if(n=this.getNode(c,l),n!=t&&n.walkable)return i;i++,o++}return i},t}();__reflect(Grid.prototype,"Grid");var MathUtil=function(){function t(){}return t.getLineFunc=function(t,e,i){void 0===i&&(i=0);var o;if(t.x==e.x){if(0==i)throw new Error("两点所确定直线垂直于y轴，不能根据x值得到y值");return 1==i&&(o=function(e){return t.x}),o}if(t.y==e.y){if(0==i)o=function(e){return t.y};else if(1==i)throw new Error("两点所确定直线垂直于y轴，不能根据x值得到y值");return o}var n;n=(t.y-e.y)/(t.x-e.x);var r;return r=t.y-n*t.x,0==i?o=function(t){return n*t+r}:1==i&&(o=function(t){return(t-r)/n}),o},t}();__reflect(MathUtil.prototype,"MathUtil");var AStarTest=function(t){function e(){var i=t.call(this)||this;return i._cellSize=40,e.instance=i,i.makeGrid(),i.makePlayer(),i}return __extends(e,t),e.prototype.makePlayer=function(){this._player=new egret.Sprite,this._player.touchEnabled=!0,this._player.graphics.beginFill(16711680),this._player.graphics.drawCircle(0,0,5),this._player.graphics.endFill(),this._player.x=50,this._player.y=60,this.addChild(this._player),this._lineShape=new egret.Shape,this.addChild(this._lineShape)},e.prototype.makeGrid=function(){this._gridContent=new egret.DisplayObjectContainer,this._gridContent.touchEnabled=!0,this._gridContent.touchChildren=!1,this._gridContent.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGridClick,this),this.addChild(this._gridContent),this._grid=new Grid(10,10,40);for(var t=0;20>t;t++)this._grid.setWalkable(Math.floor(10*Math.random()),Math.floor(10*Math.random()),!1);this.drawGrid()},e.prototype.drawGrid=function(){this._gridArr=new Array;for(var t=0;t<this._grid.numCols;t++){this._gridArr[t]=[];for(var e=0;e<this._grid.numRows;e++){var i=this._grid.getNode(t,e),o=new egret.Shape;o.graphics.lineStyle(.1),o.graphics.beginFill(this.getColor(i)),o.graphics.drawRect(0,0,this._cellSize,this._cellSize),o.graphics.endFill(),o.x=t*this._cellSize,o.y=e*this._cellSize,this._gridContent.addChild(o),this._gridArr[t][e]=o}}},e.prototype.getColor=function(t){return t.walkable?t==this._grid.startNode?10066176:t==this._grid.endNode?255:13421772:0},e.prototype.onGridClick=function(t){var e=Math.floor(t.stageX/this._cellSize),i=Math.floor(t.stageY/this._cellSize),o=this._grid.getNode(e,i),n=Math.floor(this._player.x/this._cellSize),r=Math.floor(this._player.y/this._cellSize),s=this._grid.getNode(n,r);if(0==o.walkable){var a=this._grid.findReplacer(s,o);a&&(e=a.x,i=a.y)}this._grid.setStartNode(n,r),this._grid.setEndNode(e,i),this.findPath()},e.prototype.findPath=function(){var t=(egret.getTimer(),new AStar);t.findPath(this._grid)&&(t.floyd(),t.floydPath.shift(),this._path=t.floydPath,this._index=0,this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this))},e.prototype.onEnterFrame=function(t){if(0==this._path.length)return void this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this);var e=this._path[this._index].x*this._cellSize+this._cellSize/2,i=this._path[this._index].y*this._cellSize+this._cellSize/2,o=e-this._player.x,n=i-this._player.y,r=Math.sqrt(o*o+n*n);1>r?(this._index++,this._index>=this._path.length&&this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)):(this._player.x+=.5*o,this._player.y+=.5*n)},e}(egret.DisplayObjectContainer);__reflect(AStarTest.prototype,"AStarTest");var GameParkourAction;!function(t){var e;!function(t){t[t.stand=0]="stand",t[t.walk=1]="walk",t[t.run=2]="run",t[t.atk=3]="atk",t[t.hurt=4]="hurt",t[t.jump=5]="jump",t[t.jumpTwo=6]="jumpTwo",t[t.jumpDown=7]="jumpDown"}(e=t.names||(t.names={}))}(GameParkourAction||(GameParkourAction={}));var GameParkour=function(t){function e(){var e=t.call(this)||this;return e.roleMaterial=new p2.Material,e.stoneMaterial=new p2.Material,e.speed=100,e.stones=[],e.jumpNum=2,e.once(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.addChild(moon.MoonUI.getRect(this.stage.stageWidth,this.stage.stageHeight,16777215)),FrameAnimation.getIns().loop(),FrameAnimation.getIns().addFactoryByName("wukong"),this.names=[GameParkourAction.names[0],GameParkourAction.names[1],GameParkourAction.names[2],GameParkourAction.names[3],GameParkourAction.names[4],GameParkourAction.names[5],GameParkourAction.names[6],GameParkourAction.names[7]],this.createAction(GameParkourAction.names.jumpDown),this.createP2World(),this.gameInit()},e.prototype.gameInit=function(){if(null==this.btnStart){var t=new eui.Button;t.label="开始",t.x=this.stage.stageWidth-t.width>>1,t.y=this.stage.stageHeight-t.height>>1,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gameStart,this),this.btnStart=t}this.speed=100,this.jumpNum=0,this.distance=0,this.addChild(this.btnStart),this.initStone()},e.prototype.gameStart=function(){this.removeChild(this.btnStart),this.isPlay=!0,this.createAction(GameParkourAction.names.run),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onLoop,this)},e.prototype.gameOver=function(){this.isPlay=!1,this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.onLoop,this),this.gameInit()},e.prototype.initStone=function(){for(var t=0;t<this.stones.length;t++){var e=this.stones[t];if(e.userData&&e.userData.skin){var i=e.userData.skin;i&&null!=i.parent&&i.parent.removeChild(i)}e.velocity=[0,0],this.p2World.removeBodys.push(e)}this.stones.length=0,this.createAction(GameParkourAction.names.run),this.roleBody.position=[100,330],this.roleBody.velocity=[0,0];var o=400,n=300;this.stones.push(this.createStone(o,n,0));for(var r=o,t=0;5>t;t++){var o=200*Math.random()+200,n=150*Math.random()+150;this.stones.push(this.createStone(o,n,r)),r+=1.2*o+100*Math.random()+100}},e.prototype.createP2World=function(){var t=new eui.Image("zm5Bg_png");t.width=this.stage.stageWidth,t.height=this.stage.stageHeight,this.addChild(t);var e=new P2World(0,200);e.world.on("beginContact",this.beginContact.bind(this)),e.createWall(new egret.Rectangle(0,0,this.width,this.height)),this.addChild(e);var i=e.createBoxCircleBodyShape(100,100);i.fixedRotation=!0,i.mass=20,i.userData.skin=this.roleDisplay,i.userData.name="role",i.shapes[0].material=this.roleMaterial,this.addChild(this.roleDisplay),this.p2World=e,this.roleBody=i,this.createStone(20,this.stage.stageHeight,this.stage.stageWidth>>1,"middle")},e.prototype.createAction=function(t){this.roleDisplay=FrameAnimation.getIns().getAnimationSpriteByName(this.names[t]),this.addChild(this.roleDisplay)},e.prototype.addStone=function(){var t=this.stones[this.stones.length-1],e=t.position[0],i=200*Math.random()+200,o=150*Math.random()+150;e+=1.2*i+100*Math.random()+this.speed,this.stones.push(this.createStone(i,o,e))},e.prototype.createStone=function(t,e,i,o){void 0===o&&(o=null);var n=this.stage.stageHeight,r=new eui.Image("zm5Ft_png");r.scale9Grid=new egret.Rectangle(70,35,2,2),r.height=e,r.width=t,this.addChild(r),r.anchorOffsetX=r.width>>1,r.anchorOffsetY=(r.height>>1)+15,"middle"==o&&(r.visible=!1);var s=n-(r.height>>1);r.x=i,r.y=s;var a=this.p2World.createBoxBodyShape(r.width,r.height,p2.Body.KINEMATIC);a.userData.skin=r,a.userData.name=o||"stone",a.position=[i,s],a.shapes[0].material=this.stoneMaterial;var h=new p2.ContactMaterial(this.roleMaterial,this.stoneMaterial,{restitution:0,friction:0});return this.p2World.world.addContactMaterial(h),a},e.prototype.onClick=function(t){if(this.createAction(GameParkourAction.names.jump),this.jumpNum<2){this.jumpNum++,this.roleBody.velocity[1]=0;var e=-3e3;this.roleBody.applyImpulse([0,e],[0,0]),2==this.jumpNum&&this.createAction(GameParkourAction.names.jumpTwo)}},e.prototype.beginContact=function(t){var e=t.bodyA.userData.name,i=t.bodyB.userData.name,o=t.bodyA.position[1],n=t.bodyB.position[1],r=t.bodyA,s=t.bodyB;if("stone"==e||"stone"==i){var a=!1;"stone"==e?(o=r.getAABB().lowerBound[1],n=s.getAABB().upperBound[1]):(o=r.getAABB().upperBound[1],n=s.getAABB().lowerBound[1]),Math.abs(o-n)<20?a=!0:this.gameOver()}a&&(this.jumpNum=0,this.isPlay?this.createAction(GameParkourAction.names.run):this.createAction(GameParkourAction.names.stand))},e.prototype.onLoop=function(){var t=this.roleBody.velocity[1],e=this.roleBody.position[1];if(t>100&&this.createAction(GameParkourAction.names.jumpDown),e>this.stage.stageHeight)this.gameOver();else{var i=this.p2World.world.bodies,o=i.length;moon.showLog.getIns().log("奔跑:"+this.distance+"米"),this.distance+=Math.floor(this.speed/100);for(var n=0;o>n;n++){var r=i[n];if(r.userData&&"stone"==r.userData.name){var s=r.userData.skin.width;r.velocity[0]=-this.speed,this.roleBody.velocity[0]=1.2*this.speed,r.position[0]<-s&&(this.p2World.removeBodys.push(r),this.speed+=10,this.addStone())}}}},e}(egret.DisplayObjectContainer);__reflect(GameParkour.prototype,"GameParkour");var MaoMaoConst=function(){function t(){}return t.STATIC_AWAIT=0,t.STATIC_READY=1,t.STATIC_JUMP=2,t.STATIC_JUMP_OVER=3,t.JUMP_HEIGHT=48,t.SPEED_MAX=10,t.SPEED_A=.5,t.CENTER=.8,t}();__reflect(MaoMaoConst.prototype,"MaoMaoConst");var MaoMaoJump=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.createBackground(),this.createLadder(),this.createPlayer(),this.play(),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.touchEnabled=!0},e.prototype.onClick=function(t){this.player["static"]==MaoMaoConst.STATIC_AWAIT&&this.player.jump()},e.prototype.createPlayer=function(){this.player=new MaoMaoPlayer,this.player.x=this.stageWidth-120,this.player.y=this.stageHeight-100,this.player.addEvent(moon.MoonEvent.OVER,this.jumpOver,this),this.addChild(this.player)},e.prototype.jumpOver=function(t){this.ladder.setSpeed()},e.prototype.loop=function(t){if(this.player.loop(),this.player["static"]==MaoMaoConst.STATIC_JUMP){var e=this.stageHeight*MaoMaoConst.CENTER;this.player.y<=e&&this.ladder.loop()}return!0},e.prototype.createLadder=function(){this.ladder=new MaoMaoLader,this.addChild(this.ladder)},e}(moon.GameView);__reflect(MaoMaoJump.prototype,"MaoMaoJump");var MaoMaoPlayer=function(t){function e(){var e=t.call(this)||this;e.moveX=-1,e.jumpCount=0;var i=new Bitmap;return i.texture=RES.getRes("maomao_png"),e.playerHeight=i.height,i.scaleY=-1,e.addChild(i),e.bitmap=i,e.await(),e}return __extends(e,t),e.prototype.await=function(){this["static"]=MaoMaoConst.STATIC_AWAIT,Tween.removeTweens(this.bitmap);var t=this.playerHeight,e=Tween.get(this.bitmap,{loop:!0});e.to({height:t+4},300).to({height:t},300)},e.prototype.jump=function(){this["static"]=MaoMaoConst.STATIC_READY;var t,e=this.stageHeight*MaoMaoConst.CENTER;t=this.y<=e?0:MaoMaoConst.JUMP_HEIGHT,this.originHeight=this.y-t,this.speed=MaoMaoConst.SPEED_MAX,Tween.removeTweens(this.bitmap);var i=this.playerHeight,o=Tween.get(this.bitmap,{loop:!1});o.to({height:i/2},200).to({height:i+10},80).call(this.backJump,this),o.to({height:i},80)},e.prototype.backJump=function(){this["static"]=MaoMaoConst.STATIC_JUMP},e.prototype.overJump=function(){this["static"]=MaoMaoConst.STATIC_JUMP_OVER,this.dispEvent(moon.MoonEvent.OVER),Tween.removeTweens(this.bitmap);
var t=this.playerHeight,e=Tween.get(this.bitmap,{loop:!1});e.to({height:t-10},100).to({height:t},100).call(this.await,this),this.y=this.originHeight,this.jumpCount++,5==this.jumpCount?this.moveX=0:6==this.jumpCount&&(this.x<200?this.moveX=1:this.moveX=-1,this.jumpCount=0)},e.prototype.loop=function(){this["static"]==MaoMaoConst.STATIC_JUMP&&(this.speed-=MaoMaoConst.SPEED_A,this.y-=this.speed,this.x+=2.85*this.moveX,this.speed<0&&this.originHeight<this.y&&this.overJump())},e}(moon.MoonContainer);__reflect(MaoMaoPlayer.prototype,"MaoMaoPlayer");var MaoMaoLader=function(t){function e(){var e=t.call(this)||this;return e.ladders=[],e}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this);for(var e=this.stageWidth,i=this.stageHeight,o=new moon.Scale9Image("ladder_png"),n=o.width,r=o.height,s=Math.floor(e/n),a=6,h=(e%n+s*a)/2,c=e-n-h,l=i-r,d=1,p=0;4>p;p++){for(var u=0;s>u;u++)o=new moon.Scale9Image("ladder_png"),this.addChildAt(o,0),o.scaleX=d,o.x=c-(n-a)*u*d,o.y=l-MaoMaoConst.JUMP_HEIGHT*u,this.ladders.push(o);c=o.x+n*d,l=o.y-r/2,d*=-1}},e.prototype.setSpeed=function(){this.speed=this.y+MaoMaoConst.SPEED_MAX},e.prototype.loop=function(){this.ladders.length;this.y+=(this.speed-this.y)*MaoMaoConst.SPEED_A,Math.abs(this.speed-this.y)<1&&(this.y=this.speed)},e}(moon.BasicView);__reflect(MaoMaoLader.prototype,"MaoMaoLader");var Puzzle=function(t){function e(){var e=t.call(this)||this;return e.images=[],e.checkImages=[],e.rightOrder="",e.step=0,e.once(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){for(var t=RES.getRes("bg_jpg"),e=new egret.SpriteSheet(t),i=3,o=640/i,n=Math.floor(1136/o),r=i*n,s=0;r>s;s++){var a=Math.floor(s%i)*o,h=Math.floor(s/i)*o;e.createTexture("part",a,h,o,o);var c=e.getTexture("part"),l=new egret.Bitmap;l.name=s+"",this.rightOrder+=l.name,l.texture=c,this.images.push(l),this.addChild(l)}this.images=ArrayManager.getRandomArray(this.images),LayoutManager.displayRank(this.images,i),this.imaWidth=o,this.coltrolMove=new control.ControlFingerMove(this.stage),this.coltrolMove.open(),this.coltrolMove.startBackFun=this.hitImage.bind(this),this.coltrolMove.moveEndBackFun=this.moveEnd.bind(this),this.setStep()},e.prototype.setStep=function(){traceSimple("步数:"+this.step++)},e.prototype.moveEnd=function(t){if(1==this.checkImages.length)for(var e=this.checkImages[0],i=this.images.length,o=0;i>o;o++){var n=this.images[o];if(e!=n)if(0!=t.x){if(n.y==e.y){var r=Math.floor(n.x-e.x);if(r==Math.floor(this.imaWidth*t.x)){this.checkImages.push(n);break}}}else if(n.x==e.x){var r=Math.floor(n.y-e.y);if(r==Math.floor(this.imaWidth*t.y)){this.checkImages.push(n);break}}}this.checkResult()},e.prototype.hitImage=function(t){for(var e=this.images.length,i=0;e>i;i++){var o=this.images[i];if(o.hitTestPoint(t.x,t.y)){this.checkImages.push(o);break}}this.checkResult()},e.prototype.checkResult=function(){if(2==this.checkImages.length){var t=this.checkImages[0],e=this.checkImages[1];if(t!=e){this.coltrolMove.close();var i=t.x,o=t.y,n=e.x,r=e.y,s=i-n,a=o-r,h=Math.floor(Math.sqrt(s*s+a*a));if(h<=this.imaWidth){var c=egret.Tween.get(t),l=egret.Tween.get(e);c.to({x:n,y:r},150).call(this.callback,this),l.to({x:i,y:o},150);var d=this.images.indexOf(t),p=this.images.indexOf(e);this.images.splice(d,1,e),this.images.splice(p,1,t)}}this.checkImages.length=0}},e.prototype.callback=function(){this.setStep();for(var t=this.images.length,e="",i=0;t>i;i++){var o=this.images[i];e+=o.name}this.rightOrder==e?traceSimple("一共用了"+this.step+"步完成"):this.coltrolMove.open()},e}(egret.DisplayObjectContainer);__reflect(Puzzle.prototype,"Puzzle");var path="../",WorldHardestGame=function(t){function e(){var e=t.call(this)||this;return e.once(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.levelControl=new LevelControl,this.addChild(this.levelControl),this.createControl()},e.prototype.createControl=function(){var t=new ArrowControl;t.level=this.levelControl,this.addChild(t)},e.prototype.startBackFun=function(t){this.levelControl.setStartPoint()},e.prototype.endBackFun=function(t){this.levelControl.setEndPoint()},e.prototype.moveBackFun=function(t){this.levelControl.controlPlay(t)},e}(egret.DisplayObjectContainer);__reflect(WorldHardestGame.prototype,"WorldHardestGame");var ArrowControl=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(path+"resource/askins/WHG_control.exml"),e}return __extends(e,t),e.prototype.render=function(){var t=[{display:this.arrow_l,backCall:this.moveleft.bind(this)},{display:this.arrow_r,backCall:this.moveright.bind(this)},{display:this.arrow_u,backCall:this.moveup.bind(this)},{display:this.arrow_d,backCall:this.movedown.bind(this)}],e=new control.ControlMoreTab(this.stage,t);e.open(),this.point=new egret.Point},e.prototype.moveleft=function(t){this.point.x=1==t?-1:0,this.controlMove(t)},e.prototype.moveright=function(t){this.point.x=1==t?1:0,this.controlMove(t)},e.prototype.moveup=function(t){this.point.y=1==t?-1:0,this.controlMove(t)},e.prototype.movedown=function(t){this.point.y=1==t?1:0,this.controlMove(t)},e.prototype.controlMove=function(t){this.level.isMove=1==t,this.level.controlPlay(this.point)},e}(BasicComponent);__reflect(ArrowControl.prototype,"ArrowControl");var LevelControl=function(t){function e(){var e=t.call(this)||this;return e.safeAreas=[],e.movePoint=new egret.Point,e.speedX=2,e.speedY=2,e.setSkinName(path+"resource/askins/WHG_level1.exml"),e}return __extends(e,t),e.prototype.render=function(){for(var t=0;t<this.numChildren;t++){var e=this.getChildAt(t);if(e){var i=e.name.substr(0,4);"play"==i?this.player=e:"wall"==i?this.wall=e:"safe"==i&&this.safeAreas.push(e)}}this.startPoint=new egret.Point(this.player.x,this.player.y),this.test1.play(),this.test1.addEventListener(egret.Event.COMPLETE,this.onTweenGroupComplete,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onLoop,this)},e.prototype.onTweenGroupComplete=function(t){this.test1.play(0)},e.prototype.setEndPoint=function(){this.isMove=!1},e.prototype.setStartPoint=function(){this.isMove=!0},e.prototype.gameOver=function(){function t(){e.player.x=e.startPoint.x,e.player.y=e.startPoint.y,e.player.alpha=1}this.isMove=!1;var e=this,i=egret.Tween.get(this.player);i.to({alpha:0},800).call(t)},e.prototype.onLoop=function(t){if(traceSimple(this.isMove),this.isMove){var e=this.speedX*this.movePoint.x,i=this.speedY*this.movePoint.y;this.player.x+=e,this.player.y+=i;for(var o=this.player.x,n=this.player.y,r=this.player.width>>1,s=0;s<this.numChildren;s++){var a=this.getChildAt(s);if(a!=this.player){var h=a.name.substr(0,4);"wall"==h?(a.hitTestPoint(o+r+e,n,!0)&&(this.player.x-=e),a.hitTestPoint(o-r+e,n,!0)&&(this.player.x-=e),a.hitTestPoint(o,n+r+i,!0)&&(this.player.y-=i),a.hitTestPoint(o,n-r+i,!0)&&(this.player.y-=i)):"safe"==h||"back"==h||(a.hitTestPoint(o,n,!0)?this.gameOver():a.hitTestPoint(o+r,n,!0)?this.gameOver():a.hitTestPoint(o-r,n,!0)?this.gameOver():a.hitTestPoint(o,n+r,!0)?this.gameOver():a.hitTestPoint(o,n-r,!0)&&this.gameOver())}}}},e.prototype.controlPlay=function(t){this.movePoint=t},e}(BasicComponent);__reflect(LevelControl.prototype,"LevelControl");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function o(o){e.call(i,o,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?o(n):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var BasicCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){this.num1=t.getBody().num1,this.num2=t.getBody().num2,this.calculate(),this.facade().sendNotification(MVCConst.CMD_SOUND)},e.prototype.calculate=function(){},e.prototype.release=function(){this.facade().sendNotification(MVCConst.RESULT_RELEASE,this.value)},e}(puremvc.SimpleCommand);__reflect(BasicCommand.prototype,"BasicCommand");var PlusCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.calculate=function(){this.value=this.num1+this.num2,this.release()},e}(BasicCommand);__reflect(PlusCommand.prototype,"PlusCommand");var SubtractCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.calculate=function(){this.value=this.num1-this.num2,this.release()},e}(BasicCommand);__reflect(SubtractCommand.prototype,"SubtractCommand");var MultiplyCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.calculate=function(){this.value=this.num1*this.num2,this.release()},e}(BasicCommand);__reflect(MultiplyCommand.prototype,"MultiplyCommand");var DivideCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.calculate=function(){this.value=this.num1/this.num2,this.release()},e}(BasicCommand);__reflect(DivideCommand.prototype,"DivideCommand");var StartCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initializeMacroCommand=function(){this.addSubCommand(InitCommand)},e}(puremvc.MacroCommand);__reflect(StartCommand.prototype,"StartCommand");var InitCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){this.facade().registerCommand(MVCConst.CMD_TRANSPOND,TranspondCommand),this.facade().registerCommand(MVCConst.CMD_SOUND,SoundCommand),this.facade().registerCommand(MVCConst.CMD_CALCULATE_PLUS,PlusCommand),this.facade().registerCommand(MVCConst.CMD_CALCULATE_SUBTRACT,SubtractCommand),this.facade().registerCommand(MVCConst.CMD_CALCULATE_MULTIPLY,MultiplyCommand),this.facade().registerCommand(MVCConst.CMD_CALCULATE_DIVIDE,DivideCommand)},e}(puremvc.SimpleCommand);__reflect(InitCommand.prototype,"InitCommand");var TranspondCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){var e=t.getBody();this.facade().sendNotification(MVCConst.DATA_TRANSPOND,e),this.facade().sendNotification(MVCConst.CMD_SOUND)},e}(puremvc.SimpleCommand);__reflect(TranspondCommand.prototype,"TranspondCommand");var SoundCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){SoundControl.getIns().play("keyDown_mp3")},e}(puremvc.SimpleCommand);__reflect(SoundCommand.prototype,"SoundCommand");var MVCConst=function(){function t(){}return t.DATA_TRANSPOND="data transpond",t.RESULT_RELEASE="send result",t.CMD_TRANSPOND="cmd transpond",t.CMD_START="cmd start",t.CMD_SOUND="cmd sound",t.CMD_CALCULATE_PLUS="cmd calculate plus",t.CMD_CALCULATE_SUBTRACT="cmd calculate subtract",t.CMD_CALCULATE_MULTIPLY="cmd calculate multiply",t.CMD_CALCULATE_DIVIDE="cmd calculate divide",t.HAS_SIGN="has sign",t.SIGNS=["+","-","x","/","=","c"],t.CMDS=[t.CMD_CALCULATE_PLUS,t.CMD_CALCULATE_SUBTRACT,t.CMD_CALCULATE_MULTIPLY,t.CMD_CALCULATE_DIVIDE],t}();__reflect(MVCConst.prototype,"MVCConst");var MainMvc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH,SoundControl.getIns().addItem("keyDown_mp3");var t=puremvc.Facade.getInstance("calculator"),e=egret.getDefinitionByName("ModuleView"),i=new e,o=new ModuleMediator(ModuleMediator.NAME,i);this.addChild(i),t.registerMediator(o),t.registerCommand(MVCConst.CMD_START,StartCommand),t.sendNotification(MVCConst.CMD_START)},e}(moon.BasicView);__reflect(MainMvc.prototype,"MainMvc");var ModuleMediator=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=t.call(this,e)||this;return o.view=i,o}return __extends(e,t),e.prototype.onRegister=function(){this.facade().registerMediator(new SendMediator(SendMediator.NAME,this.view)),this.facade().registerMediator(new ReceiveMediator(ReceiveMediator.NAME,this.view))},e.NAME="MediatorView",e}(puremvc.Mediator);__reflect(ModuleMediator.prototype,"ModuleMediator");var ModuleView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.createRect(this.stage.stageWidth,this.stage.stageHeight,3355392)},e}(moon.BasicView);__reflect(ModuleView.prototype,"ModuleView");var BasicMediator=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=t.call(this,e)||this;return o.container=i,o}return __extends(e,t),e}(puremvc.Mediator);__reflect(BasicMediator.prototype,"BasicMediator");var ReceiveMediator=function(t){function e(e,i){return void 0===e&&(e=null),void 0===i&&(i=null),t.call(this,e,i)||this}return __extends(e,t),e.prototype.onRegister=function(){this.view=new ReceiveView,this.container.addChild(this.view),this.clear()},e.prototype.listNotificationInterests=function(){return[MVCConst.DATA_TRANSPOND,MVCConst.RESULT_RELEASE]},e.prototype.handleNotification=function(t){switch(t.getName()){case MVCConst.DATA_TRANSPOND:this.showTranspond(t.getBody());break;case MVCConst.RESULT_RELEASE:this.showResult(t.getBody())}},e.prototype.clear=function(){this.num1=this.num2=this.sign="",this.view.clear()},Object.defineProperty(e.prototype,"hasStipulation",{get:function(){return""==this.num1||""==this.num2||""==this.sign?!1:!0},enumerable:!0,configurable:!0}),e.prototype.setTranspond=function(t){var e=this.view;e.setProcess(t)},e.prototype.pushNumber=function(t,e){var i=this.view;this.sign==MVCConst.HAS_SIGN&&i.getResult()==this.num1&&MVCConst.SIGNS.indexOf(e)<0&&this.clear(),i.pushNumber(t,e)},e.prototype.showTranspond=function(t){var e=t,i=MVCConst.SIGNS.indexOf(e);if(0>i){var o,n;n=""==this.sign?this.num1:this.num2,"."==e?n.indexOf(e)<0&&(n+=e):n+=e,o=parseFloat(n),this.pushNumber(o,e),""==this.sign?this.num1=n:this.num2=n}else"c"==e?this.clear():"="==e?(this.setTranspond(e),this.sendCalculate()):""!=this.num1&&(this.setTranspond(e),this.sendCalculate(),this.sign=e)},e.prototype.sendCalculate=function(){if(this.hasStipulation){var t=MVCConst.SIGNS.indexOf(this.sign),e=MVCConst.CMDS[t];this.facade().sendNotification(e,{num1:parseFloat(this.num1),num2:parseFloat(this.num2)})}},e.prototype.showResult=function(t){var e=t;this.view.setResult(e),this.num1=e,this.sign=MVCConst.HAS_SIGN,this.num2=""},e.NAME="ReceiveMediator",e}(BasicMediator);__reflect(ReceiveMediator.prototype,"ReceiveMediator");var ReceiveView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.createRect(this.stage.stageWidth,200,6710784),this.txtProcess=this.createText(10,10),this.txtResult=this.createText(10,150),this.txtProcess.width=this.stage.stageWidth-10,this.txtProcess.height=130,this.txtProcess.multiline=!0,this.txtProcess.wordWrap=!0,this.txtResult.textAlign=egret.HorizontalAlign.LEFT,this.txtProcess.size=40,this.txtResult.size=50},e.prototype.clear=function(){this.txtProcess.text=this.txtResult.text=""},e.prototype.setProcess=function(t){if(MVCConst.SIGNS.indexOf(t)>=0){var e=this.txtProcess.text,i=e.substr(e.length-1,1);MVCConst.SIGNS.indexOf(i)>=0&&(this.txtProcess.text=e.substr(0,e.length-1))}this.txtProcess.appendText(t)},e.prototype.pushNumber=function(t,e){var i=this.txtProcess.text,o=t.toString();if("."==e&&o.indexOf(e)<0&&(o+=e),""==i)this.txtProcess.appendText(o);else{for(;i.length>0;){var n=i.substr(i.length-1,1);if(MVCConst.SIGNS.indexOf(n)>=0){this.txtProcess.text=i,this.txtProcess.appendText(o);break}i=i.substr(0,i.length-1)}0==i.length&&(this.txtProcess.text=o)}},e.prototype.setResult=function(t){this.txtResult.text=t},e.prototype.getResult=function(){return this.txtResult.text},e}(moon.BasicView);__reflect(ReceiveView.prototype,"ReceiveView");var SendMediator=function(t){function e(e,i){return void 0===e&&(e=null),void 0===i&&(i=null),t.call(this,e,i)||this}return __extends(e,t),e.prototype.onRegister=function(){this.view=new SendView,this.container.addChild(this.view),this.view.addEvent(moon.MoonEvent.CLICK,this.onClick.bind(this)),this.view.y=210},e.prototype.onClick=function(t){this.facade().sendNotification(MVCConst.CMD_TRANSPOND,t.data)},e.NAME="SendMediator",e}(BasicMediator);__reflect(SendMediator.prototype,"SendMediator");var SendView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.createRect(this.stage.stageWidth,this.stage.stageHeight-200,10066176,0,0),this.shows=["0","1","2","3","4","5","6","7","8","9","."],this.shows=this.shows.concat(MVCConst.SIGNS);for(var t=this.shows.length,e=[],i=0;t>i;i++){var o=new Button;o.width=o.height=146,o.label=this.shows[i],o.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToState,this),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(o),e.push(o)}LayoutManager.displayRank(e,4,10,10,10,40)},e.prototype.onAddToState=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToState,this),e.labelDisplay.size=50},e.prototype.onClick=function(t){var e=t.currentTarget;this.dispEvent(moon.MoonEvent.CLICK,e.label)},e}(moon.BasicView);__reflect(SendView.prototype,"SendView");var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.startCreateScene=function(){this.addChild(new MainTest)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var P2Camera=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.render,e),e}return __extends(e,t),e.prototype.render=function(){function t(t){a.move()}function e(t){var e=2,i=n.position[0],o=n.position[1],r=t.stageX-i,s=t.stageY-o,a=(Math.sqrt(r*r+s*s),r*e),h=s*e;n.applyImpulse([a,h],[0,0])}var i=new eui.Image("bg_jpg");i.width=1.2*this.stage.stageWidth,i.height=1.2*this.stage.stageHeight,this.addChild(i);var o=new P2World(0,200);o.createWall(new egret.Rectangle(0,0,this.width,this.height)),this.addChild(o);var n=o.createCircleBodyShape(50);n.mass=10;var r=new egret.Shape;r.graphics.lineStyle(1,16711680),r.graphics.beginFill(16776960),r.graphics.drawCircle(0,0,50),r.graphics.drawCircle(20,10,10),r.graphics.endFill(),this.addChild(r),n.userData.skin=r,o.drawSkin(o.createConvexBodyShape([[0,-150],[150,150],[-150,150]])),o.drawSkin(o.createConvexBodyShape([[-100,-100],[100,-100],[100,100],[-10,100]])),o.drawSkin(o.createConvexBodyShape([[-10,-10],[100,-10],[100,100],[-10,10]])),o.drawSkin(o.createBoxBodyShape(150,100)),o.drawSkin(o.createPolygon(8,50));var s=new egret.Rectangle(0,0,this.stage.stageWidth,this.stage.stageHeight),a=new control.Camera2D(n.userData.skin,this,s);this.addEventListener(egret.Event.ENTER_FRAME,t,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e,this)},e}(BasicComponent);__reflect(P2Camera.prototype,"P2Camera");var P2Camera2=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.render,e),e}return __extends(e,t),e.prototype.render=function(){function t(t){i.x+i.width/2<2e3&&(i.x+=10),i.x+i.width/2<2e3&&(i.y+=10),n.move()}var e=new eui.Image("bg_jpg");e.width=e.height=2e3,this.addChild(e);var i=new egret.Shape;i.graphics.beginFill(16711680),i.graphics.drawCircle(0,0,100),i.graphics.endFill(),this.addChild(i);var o=new egret.Rectangle(0,0,this.stage.stageWidth,this.stage.stageHeight),n=new control.Camera2D(i,this,o);this.addEventListener(egret.Event.ENTER_FRAME,t,this)},e}(BasicComponent);__reflect(P2Camera2.prototype,"P2Camera2");var p2DebugDraw=function(){function t(t,e){this.COLOR_D_SLEEP=10066329,this.COLOR_D_WAKE=15053490,this.COLOR_K=8355813,this.COLOR_S=8381823,this.COLOR_BLACK=0,this.COLOR_RED=16711680,this.isDrawAABB=!1,this.factor=1,this.world=t,this.sprite=e}return t.prototype.drawDebug=function(){this.sprite.graphics.clear();for(var t=this.world.bodies.length,e=0;t>e;e++)for(var i=this.world.bodies[e],o=0;o<i.shapes.length;o++){var n=i.shapes[o];this.drawShape(n,i),this.isDrawAABB&&this.drawAABB(i)}t=this.world.constraints.length;for(var r,o=0;t>o;o++)switch(r=this.world.constraints[o],r.type){case p2.Constraint.DISTANCE:this.drawDistanceJoint(r);break;case p2.Constraint.REVOLUTE:this.drawRevoluteJoint(r);break;case p2.Constraint.GEAR:this.drawGearJoint(r);break;case p2.Constraint.PRISMATIC:this.drawPrismaticJoint(r);break;case p2.Constraint.LOCK:this.drawLockJoint(r)}t=this.world.springs.length;for(var s,a=0;t>a;a++)s=this.world.springs[a],s instanceof p2.LinearSpring?this.drawLinearSpring(s):s instanceof p2.RotationalSpring&&this.drawRotationalSpring(s)},t.prototype.drawAABB=function(t){var e=new Array,i=t.aabb.lowerBound[0],o=t.aabb.lowerBound[1],n=t.aabb.upperBound[0],r=t.aabb.upperBound[1];isFinite(i)&&isFinite(o)&&isFinite(n)&&isFinite(r)&&(e.push([i,o],[n,o],[n,r],[i,r]),this.drawConvex(e,this.COLOR_S,1,!1))},t.prototype.drawDistanceJoint=function(t){var e,i=new Array,o=new Array;e=t.distance,t.upperLimitEnabled&&t.upperLimit>e&&(e=t.upperLimit),t.bodyA.toWorldFrame(i,t.localAnchorA),t.bodyB.toWorldFrame(o,t.localAnchorB);var n=p2.vec2.subtract([],o,i);p2.vec2.normalize(n,n),p2.vec2.scale(n,n,e);var r=p2.vec2.add([],i,n);this.drawSegment(i,t.bodyA.position,this.COLOR_S),this.drawSegment(o,t.bodyB.position,this.COLOR_S),this.drawVecAt(n,i,this.COLOR_BLACK),t.position>e&&this.drawSegment(o,r,this.COLOR_RED),this.drawCircle(i,3/this.factor,this.COLOR_BLACK),this.drawCircle(r,3/this.factor,this.COLOR_BLACK),t.lowerLimitEnabled&&(p2.vec2.normalize(n,n),p2.vec2.scale(n,n,t.lowerLimit),r=p2.vec2.add([],i,n),this.drawCircle(r,2/this.factor,this.COLOR_BLACK))},t.prototype.drawRevoluteJoint=function(t){var e=new Array,i=new Array;t.bodyA.toWorldFrame(e,t.pivotA),t.bodyB.toWorldFrame(i,t.pivotB),this.drawSegment(t.bodyA.position,e,this.COLOR_S),this.drawSegment(t.bodyB.position,i,this.COLOR_S),this.drawSegment(e,i,this.COLOR_RED),this.drawCircle(e,3/this.factor,this.COLOR_BLACK)},t.prototype.drawGearJoint=function(t){var e=t.bodyA.position,i=t.bodyB.position,o=new Array,n=new Array;t.bodyA.toWorldFrame(o,[20/this.factor,0]),t.bodyB.toWorldFrame(n,[20/this.factor,0]);var r=p2.vec2.subtract([],e,o),s=p2.vec2.subtract([],i,n);this.drawVecAt(r,e,this.COLOR_BLACK,!0),this.drawVecAt(s,i,this.COLOR_BLACK,!0),t.bodyB.toWorldFrame(s,[10*(t.bodyB.angle-t.bodyA.angle-t.angle)/this.factor,0]),this.drawSegment(s,i,this.COLOR_RED)},t.prototype.drawPrismaticJoint=function(t){var e=(t.bodyA.position,t.bodyB.position,new Array),i=new Array;t.bodyA.toWorldFrame(e,t.localAnchorA),t.bodyB.toWorldFrame(i,t.localAnchorB);var o=new Array;o=this.toWorldVector(t.localAxisA,t.bodyA);var n=p2.vec2.copy([],o),r=p2.vec2.copy([],o);t.lowerLimitEnabled?p2.vec2.scale(n,o,t.lowerLimit):p2.vec2.scale(n,o,5e3),t.upperLimitEnabled?p2.vec2.scale(r,o,t.upperLimit):p2.vec2.scale(r,o,5e3),this.drawVecAt(n,e,this.COLOR_BLACK,!0),this.drawVecAt(r,e,this.COLOR_BLACK,!0),p2.vec2.add(n,n,e),this.drawCircle(n,2/this.factor,this.COLOR_BLACK,1,!0),p2.vec2.add(r,r,e),this.drawCircle(r,2/this.factor,this.COLOR_BLACK,1,!0)},t.prototype.drawLockJoint=function(t){var e=new Array;new Array;t.bodyA.toWorldFrame(e,t.localOffsetB),this.drawSegment(e,t.bodyA.position,this.COLOR_S),this.drawSegment(e,t.bodyB.position,this.COLOR_RED),this.drawCircle(e,3/this.factor,this.COLOR_BLACK);var i=new Array;t.bodyA.toWorldFrame(i,[20/this.factor,0]),this.drawSegment(i,t.bodyA.position,this.COLOR_BLACK),t.bodyB.toWorldFrame(i,[20/this.factor,0]),this.drawSegment(i,t.bodyB.position,this.COLOR_BLACK)},t.prototype.drawLinearSpring=function(t){var e=new Array,i=new Array;t.bodyA.toWorldFrame(e,t.localAnchorA),t.bodyB.toWorldFrame(i,t.localAnchorB);var o=p2.vec2.subtract([],i,e);p2.vec2.normalize(o,o),p2.vec2.scale(o,o,t.restLength);var n=p2.vec2.add([],t.bodyA.position,o);this.drawSegment(n,t.bodyB.position,this.COLOR_RED),this.drawVecAt(o,e,this.COLOR_BLACK),this.drawCircle(e,3/this.factor,this.COLOR_RED),this.drawCircle(n,3/this.factor,this.COLOR_RED)},t.prototype.drawRotationalSpring=function(t){var e=new Array,i=new Array;e=t.bodyA.position,i=t.bodyB.position;var o=new Array,n=new Array;t.bodyA.toWorldFrame(o,[20/this.factor,0]),t.bodyB.toWorldFrame(n,[10*(t.bodyB.angle-t.bodyA.angle-t.restAngle+2)/this.factor,0]);var r=p2.vec2.subtract([],o,e),s=p2.vec2.subtract([],n,i);this.drawVecAt(r,e,this.COLOR_RED,!0),this.drawVecAt(s,i,this.COLOR_RED,!0),t.bodyB.toWorldFrame(n,[20/this.factor,0]),this.drawCircle(o,2/this.factor,this.COLOR_RED),this.drawCircle(n,2/this.factor,this.COLOR_RED)},t.prototype.drawShape=function(t,e,i,o){var i=void 0==i?this.getColor(e):i,o=void 0==o?!0:o;t instanceof p2.Convex?this.drawConvexShape(t,e,i,o):t instanceof p2.Plane?this.drawPlaneShape(t,e,i,o):t instanceof p2.Circle?this.drawCircleShape(t,e,i,o):t instanceof p2.Capsule?this.drawCapsule(t,e,i):t instanceof p2.Particle?this.drawParticle(t,e,i):t instanceof p2.Line?this.drawLine(t,e,i):t instanceof p2.Heightfield&&this.drawHeightfeild(t,e,i)},t.prototype.drawConvexShape=function(t,e,i,o){var n=(e.shapes.indexOf(t),t.position),r=t.angle,s=[],a=this.transformVec(t.vertices[0],n,r);e.toWorldFrame(s,n),e.toWorldFrame(a,a),this.drawSegment(s,a,i);for(var h=new Array,c=t.vertices.length,l=0;c>l;l++)a=this.transformVec(t.vertices[l],n,r),e.toWorldFrame(a,a),h.push(a);this.drawConvex(h,i,.5,o)},t.prototype.drawParticle=function(t,e,i){this.drawCircle(e.position,1/this.factor,i,.5),this.drawCircle(e.position,5/this.factor,i,1,!1)},t.prototype.drawLine=function(t,e,i){var o=t.length,n=new Array,r=new Array;e.toWorldFrame(n,[-o/2,0]),e.toWorldFrame(r,[o/2,0]),this.drawSegment(n,r,i)},t.prototype.drawHeightfeild=function(t,e,i){var o=this.sprite.graphics;o.lineStyle(1,i),o.beginFill(i,.5);var n,r=t.heights,s=t.elementWidth,a=new Array,h=new Array;r.forEach(function(t,i){n=i*s,a=new Array,e.toWorldFrame(a,[n,t]),h.push(a)}),a=new Array,e.toWorldFrame(a,[n,-500]),h.push(a),a=new Array,e.toWorldFrame(a,[0,-500]),h.push(a),a=new Array,e.toWorldFrame(a,[0,0]),h.push(a),this.drawConvex(h,i,.5)},t.prototype.drawCapsule=function(t,e,i){var o=t.length,n=t.radius,r=new Array,s=new Array,a=new Array,h=new Array,c=new Array,l=new Array;e.toWorldFrame(r,[-o/2,-n]),e.toWorldFrame(s,[o/2,-n]),e.toWorldFrame(a,[o/2,n]),e.toWorldFrame(h,[-o/2,n]),e.toWorldFrame(c,[o/2,0]),e.toWorldFrame(l,[-o/2,0]),this.drawCircle(c,n,i,.5),this.drawCircle(l,n,i,.5),this.drawConvex([r,s,a,h],i,.5)},t.prototype.drawCircleShape=function(t,e,i,o){var n=t.position,r=t.angle,s=new Array;e.toWorldFrame(s,n),this.drawCircle(s,t.radius,i,.5,o);var a=this.transformVec([t.radius,0],n,r);e.toWorldFrame(a,a),this.drawSegment(s,a,i)},t.prototype.drawPlaneShape=function(t,e,i,o){var n=new Array,r=new Array;e.shapes.indexOf(t);e.toWorldFrame(n,[1e3,0]),n=this.transformVec(n,t.position,t.angle),r.push(n),n=new Array,e.toWorldFrame(n,[1e3,-1e5]),n=this.transformVec(n,t.position,t.angle),r.push(n),n=new Array,e.toWorldFrame(n,[-1e3,-1e5]),n=this.transformVec(n,t.position,t.angle),r.push(n),n=new Array,e.toWorldFrame(n,[-1e3,0]),n=this.transformVec(n,t.position,t.angle),r.push(n),this.drawConvex(r,i,.5,o)},t.prototype.getColor=function(t){var e=this.COLOR_D_SLEEP;return t.type==p2.Body.KINEMATIC?e=this.COLOR_K:t.type==p2.Body.STATIC?e=this.COLOR_S:t.sleepState==p2.Body.AWAKE&&(e=this.COLOR_D_WAKE),e},t.prototype.drawVecAt=function(t,e,i,o){void 0===o&&(o=!1);var n=p2.vec2.copy([],e),r=p2.vec2.add([],t,e);o&&this.drawCircle(n,3/this.factor,i),this.drawSegment(n,r,i)},t.prototype.drawVecTo=function(t,e,i,o){void 0===o&&(o=!1);var n=p2.vec2.copy([],e),r=p2.vec2.subtract([],e,t);o&&this.drawCircle(n,3/this.factor,i),this.drawSegment(n,r,i)},t.prototype.drawSegment=function(t,e,i){this.sprite.graphics.lineStyle(1,i),this.sprite.graphics.moveTo(t[0]*this.factor,t[1]*this.factor),this.sprite.graphics.lineTo(e[0]*this.factor,e[1]*this.factor)},t.prototype.drawCircle=function(t,e,i,o,n){void 0===o&&(o=1),this.sprite.graphics.lineStyle(1,i),(n||void 0==n)&&this.sprite.graphics.beginFill(i,o),this.sprite.graphics.drawCircle(t[0]*this.factor,t[1]*this.factor,e*this.factor),this.sprite.graphics.endFill()},t.prototype.drawConvex=function(t,e,i,o){void 0===i&&(i=1),void 0===o&&(o=!0),this.sprite.graphics.lineStyle(1,e),o&&this.sprite.graphics.beginFill(e,i);var n=t.length,r=t[0];this.sprite.graphics.moveTo(r[0]*this.factor,r[1]*this.factor);for(var s=1;n>=s;s++)r=t[s%n],this.sprite.graphics.lineTo(r[0]*this.factor,r[1]*this.factor);this.sprite.graphics.endFill()},t.prototype.toWorldVector=function(t,e){var i=new Array;return p2.vec2.rotate(i,t,e.angle),i},t.prototype.transformVec=function(t,e,i){var o=new Array;return p2.vec2.rotate(o,t,i),p2.vec2.add(o,o,e),o},t.prototype.drawDotLine=function(t,e,i,o){if(void 0===e&&(e=0),void 0===i&&(i=!1),void 0===o&&(o=30),!(t.length<2)){var n=2/this.factor,r=[];p2.vec2.copy(r,t[0]),this.drawCircle(r,n,e,1,!1);for(var s=0;s<t.length-2;s++){var a=t[s];if(i)for(var h=p2.vec2.distance(r,a);h>o/this.factor;){var c=[];p2.vec2.subtract(c,a,r),p2.vec2.scale(c,c,o/this.factor/h),p2.vec2.add(r,r,c),this.drawCircle(r,n,e,1,!1),h=p2.vec2.distance(r,a)}else this.drawCircle(a,n,e,1,!1)}}},t}();__reflect(p2DebugDraw.prototype,"p2DebugDraw");var P2Drag=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onAppReady=function(){this.enableMouseDrag(new p2.World({gravity:[0,100]})),this.createFourWall(),this.createDebug(),this.createBody()},e.prototype.createBody=function(){var t=20*Math.random()+30,e=new p2.Circle({radius:t}),i=new p2.Body({mass:10});i.addShape(e),i.position=[200*Math.random()+50,200*Math.random()+50],i.angle=Math.PI;
var o=new egret.Sprite;o.graphics.beginFill(16776960),o.graphics.drawCircle(0,0,t),o.graphics.endFill(),o.alpha=.1,this.addChild(o),i.userData={skin:o},this.world.addBody(i)},e.prototype.loop=function(){t.prototype.loop.call(this);for(var e=this.world.bodies,i=e.length,o=0;i>o;o++){var n=e[o];if(n.userData&&n.userData.skin){var r=n.userData.skin;r.x=n.position[0],r.y=n.position[1],r.rotation=180*n.angle/Math.PI}}},e}(AbstractP2Test);__reflect(P2Drag.prototype,"P2Drag");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=480,this.textField.height=50,this.textField.textAlign="center",this.textField.x=this.stage.stageWidth-this.textField.width>>1,this.textField.y=this.stage.stageHeight-this.textField.height>>1},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var ControlTest=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){var t=moon.MoonUI.getCircle(100,16776960),e=moon.MoonUI.getCircle(20,65280);new control.ControlBarMove(this.stage,e,t);t.x=e.x=this.stage.stageWidth>>1,t.y=e.y=this.stage.stageHeight>>1,this.addChild(t),this.addChild(e);var i=new ImageIcon("tips_png");this.addChild(i);var o=new control.ControlDrag(this.stage,i);o.endBackFun=function(){i.x=0},o.open()},e}(moon.MoonContainer);__reflect(ControlTest.prototype,"ControlTest");var CreateView=function(t){function e(){var e=t.call(this)||this,i=new egret.Shape;i.graphics.beginFill(16711680),i.graphics.drawCircle(0,0,200),i.graphics.endFill(),e.addChild(i);var o=new egret.TextField;e.addChild(o),o.text="646136549879";var n=new eui.Image;n.source="bg_jpg",e.addChild(n);var r=new eui.Button;return r.label="Test",r.width=200,r.height=150,e.addChild(r),r.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){},e),e.addChild(new TestView),e}return __extends(e,t),e.prototype.init=function(){},e}(egret.Sprite);__reflect(CreateView.prototype,"CreateView");var TestCardTurn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){function t(t){e.turn(600)}var e=new CardTurn(moon.MoonUI.getRect(100,200,16711680,-50,-100),moon.MoonUI.getRect(100,200,16776960,-50,-100));e.x=e.y=200,this.addChild(e),e.turn(),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t,this),e.onTurnComplete=function(){trace("翻页完成")}},e}(moon.BasicView);__reflect(TestCardTurn.prototype,"TestCardTurn");var TestDisplayHit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.rect1=this.createRect(100,100),this.rect1.x=this.rect1.y=10,this.showPoint(this.rect1),this.rect2=this.createRect(100,200,16776960),this.rect2.x=this.rect2.y=200,this.showPoint(this.rect2);var t=new control.ControlDrag(this.stage,this.rect1);t.open(),t.moveBackFun=this.moveBackFun.bind(this)},e.prototype.moveBackFun=function(){var t=(this.rect2.hitTestPoint(this.rect1.x,this.rect1.y,!0),this.rect1.getBounds()),e=this.rect2.getBounds();t.x=this.rect1.x,t.y=this.rect1.y,e.x=this.rect2.x,e.y=this.rect2.y;var i=t.intersects(e);traceSimple("intersects="+i)},e.prototype.showPoint=function(t){var e=this.createCircle(4,16711680);t.addChild(e)},e}(moon.BasicView);__reflect(TestDisplayHit.prototype,"TestDisplayHit");var TestDisplayDo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.createRect(this.stage.stageWidth,this.stage.stageHeight,3552822);var t=new DisplayObject;trace("b的类型是否为DisplayObject="+Uinfy.as(t,DisplayObject));var e="",i=11;trace("b是不是string="+Uinfy.as2(e,"string"),"c是不是number="+Uinfy.as2(i,"number"));for(var o=[],n=0;10>n;n++){var r=this.createRect(50,50,16777215*Math.random());r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),r.name="n"+n,r.touchEnabled=!0,o.push(r),this.addChild(r)}LayoutManager.displayRank(o,3,10,10,100,100),Uinfy.hideShowNum(o,!1,2,5);var s=new moon.BasicTips("tips_png");s.x=s.y=300,s.setValue("测试带背景的文本\n换行接着测试"),this.addChild(s);var a=new ImageIcon("bg_jpg");a.scaleX=a.scaleY=.2,a.y=350,this.addChild(a),a.smoothing=!0,Uinfy.imageSetGray(a,!0);var h=new Button;h.label="白鹭自带的按钮皮肤",this.addChild(h),h.x=400,h.y=550;var c=moon.MoonUI.getRect(100,100,16777215*Math.random()),l=moon.MoonUI.getRect(100,100,16777215*Math.random()),d=new moon.BasicButton(c,l);d.label="moon自定义皮肤按钮",d.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this),this.addChild(d),d.x=300,d.y=400;for(var p=[],n=0;10>n;n++)p.push(moon.MoonUI.getRect(100,50,16777215*Math.random()));var u=new moon.MoreSkinButton(p),g=[];g.push({text:"多个皮肤",style:{size:80,textColor:0}}),u.setTextFlow(g),this.addChild(u),this.addChild(u),u.x=300,u.y=650,u.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin2,this);var c=moon.MoonUI.getCircle(50,16777215*Math.random()),l=moon.MoonUI.getCircle(50,16777215*Math.random()),v=new moon.BasicButton(c,l);this.addChild(v),v.x=400,v.y=850,v.labelCircle="圆按钮";var f=80,c=moon.MoonUI.getRoundRect(f,50,moon.Color.skinNormal,60,60);c.addChild(moon.MoonUI.getCircle(22,moon.Color.white,25,25));var l=moon.MoonUI.getRoundRect(f,50,moon.Color.skinDown,60,60);l.addChild(moon.MoonUI.getCircle(22,moon.Color.white,25,25));var y=moon.MoonUI.getRoundRect(f,50,moon.Color.skinNormal,60,60);y.addChild(moon.MoonUI.getCircle(22,moon.Color.white,f-25,25));var m=moon.MoonUI.getRoundRect(f,50,moon.Color.skinDown,60,60);m.addChild(moon.MoonUI.getCircle(22,moon.Color.white,f-25,25));var C=new moon.MoreSkinButton([c,l,y,m]);this.addChild(C),C.x=400,C.y=950,C.toggleSwitch=!0,f=200;var _=moon.MoonUI.getRect(f,20,moon.Color.random),w=moon.MoonUI.getRect(f,20,moon.Color.random),E=new moon.ProgressBar(_,w);this.addChild(E),E.x=200,E.y=920;var T=!0;if(T)egret.Ticker.getInstance().register(function(){E.value+=.002,E.value=E.value>=1?0:E.value;var t=Math.round(100*E.value)+"%";E.showText(t)},this);else{E.value=E.value=.5;var x=Math.round(100*E.value)+"%";E.showText(x,-1,-40)}},e.prototype.onBegin=function(t){var e=t.currentTarget;moon.TipsManager.getIns().simpleTips("这是个提示"+e.name,new Point(t.stageX,t.stageY))},e.prototype.onBegin2=function(t){var e=t.currentTarget;e.label="多个皮肤的按钮"+e.currentPage,e.currentPage++},e}(moon.BasicView);__reflect(TestDisplayDo.prototype,"TestDisplayDo");var MoonTest=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this.panelMore=new moon.PanelMoreManager;var t=[];t.push("moon纯代码组件一，基本按钮展示"),t.push("moon纯代码组件二，进度条与滑动器展示"),t.push("moon纯代码组件三，TIPS展示"),t.push("moon纯代码组件四， MoonDisplay展示");for(var e=0;e<t.length;e++){var i=new moon.PanelBar;i.label=t[e],i.addEvent(moon.MoonEvent.RENDER_COMPLETE,this.onAddStage.bind(this)),this.panelMore.addItem(i)}this.panelMore.addEvent(moon.MoonEvent.START,this.start,this),this.panelMore.addEvent(moon.MoonEvent.OVER,this.over,this),this.addChild(this.panelMore),this.showButton(0),this.showProgresBar(1),this.showTipsBar(2),this.showMoonDisplay(3)},e.prototype.addToStageMore=function(t){this.panelMore.close()},e.prototype.start=function(t){},e.prototype.over=function(t){},e.prototype.onAddStage=function(t){var e=t.currentTarget;e.colorBottom=16572284},e.prototype.showButton=function(t){function e(t){moon.TipsManager.getIns().simpleTips("选择了"+u.selectIndex,new Point(150,550))}function i(t){moon.TipsManager.getIns().simpleTips("选择了"+f.selectIndexs,new Point(300,550))}var o=this.panelMore.getItem(t),n=new moon.BasicButton;n.label="默认皮肤按钮",o.addItem(n,10,10);var r=moon.Skin.randomRect,s=moon.Skin.randomRect,n=new moon.BasicButton(r,s);n.label="随机颜色皮肤按钮",o.addItem(n,10,90);var r=moon.Skin.randomCircle,s=moon.Skin.randomCircle,n=new moon.BasicButton(r,s);n.labelCircle="圆按钮",o.addItem(n,100,220);var a=new moon.Scale9Image("btn1_png"),h=new moon.Scale9Image("btn2_png"),n=new moon.BasicButton(a,h);n.label="外部加载的皮肤",o.addItem(n,300,100);var a=new moon.Scale9Image("btn1_png"),h=new moon.Scale9Image("btn2_png");a.width=h.width=280,a.height=h.height=100;var n=new moon.BasicButton(a,h);n.skinAutoScale=!1,n.label="外部加载的皮肤",o.addItem(n,300,200);var r=moon.Skin.switchOn,s=moon.Skin.switchOn,c=moon.Skin.switchOff,l=moon.Skin.switchOff,d=new moon.MoreSkinButton([r,s,c,l]);d.toggleSwitch=!0,o.addItem(new moon.Label("toggleSwitch按钮",0),10,300),o.addItem(d,10,340);for(var p=["我帅","我很帅","我双酷双帅","我帅得惊动上帝"],u=new moon.RadioButtonBar,g=0;g<p.length;g++)u.addItemLabel(p[g]);u.layout(),o.addItem(new moon.Label("单选框按钮",0),10,500),o.addItem(u,10,540),u.addEvent(moon.MoonEvent.CHANGE,e.bind(this));for(var p=["A","B","C","D"],v=new moon.RadioButtonBar,g=0;g<p.length;g++)v.addItemLabel(p[g]);v.layout(moon.Const.HORIZONTAL,100),o.addItem(new moon.Label("单选框按钮横排版",0),10,800),o.addItem(v,10,840);for(var p=["我帅","我很帅","我双酷双帅","我帅得惊动上帝"],f=new moon.CheckBoxBar,y=p.length,g=0;y>g;g++)f.addItemLabel(p[g]);f.layout(),o.addItem(new moon.Label("复选框按钮",0),300,500),o.addItem(f,300,540),f.addEvent(moon.MoonEvent.CHANGE,i,this)},e.prototype.showProgresBar=function(t){function e(t){t.type==moon.MoonEvent.START?this.panelMore.close():t.type==moon.MoonEvent.MOVE||this.panelMore.open()}var i=this.panelMore.getItem(t),o=new moon.ProgressBar;o.value=.5,i.addItem(o,50,300);var n=Math.round(100*o.value)+"%";o.showText(n,-1,-40);var r=400,s=30,a=moon.MoonUI.getRect(r,s,moon.Color.random),h=moon.MoonUI.getRect(r,s,moon.Color.random),o=new moon.ProgressBar(a,h);i.addItem(o,100,50);var c=new moon.SliderBar;i.addItem(c,300,500),c.value=.2,c.addEvent(moon.MoonEvent.START,e,this),c.addEvent(moon.MoonEvent.MOVE,e,this),c.addEvent(moon.MoonEvent.OVER,e,this);var c=new moon.SliderBar;i.addItem(c,50,650),c.layout(moon.Const.VERTICAL),c.value=.2},e.prototype.showTipsBar=function(t){function e(t){var e=t.currentTarget;moon.TipsManager.getIns().simpleTips(e.label,new Point(t.stageX,t.stageY))}var i=this.panelMore.getItem(t),o=2,n=500;i.addItem(new moon.Label("单击按钮显示TIPS，TIPS显示始终都在屏幕内",0),10,100);for(var r=0;6>r;r++){var s=new moon.BasicButton;s.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e,this),s.label="单击显示TIPS"+r;var a=Math.floor(r%o)*n,h=Math.floor(r/o)*n;i.addItem(s,a,h)}},e.prototype.showMoonDisplay=function(t){var e=this.panelMore.getItem(t),i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_RECT,i.data={w:100,h:100,c:moon.Color.random},e.addItem(i,100,100);var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_RECT_ROUND,i.data={w:100,h:100,c:moon.Color.random,ew:50,eh:50},e.addItem(i,100,300);var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_CIRCLE,i.data={r:50,c:moon.Color.random},e.addItem(i,100,600);var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_RECT,i.data={w:100,h:100,c:moon.Color.random},e.addItem(i,300,100),i.setBackground(moon.Color.random,10);var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_RECT_ROUND,i.data={w:100,h:100,c:moon.Color.random,ew:50,eh:50},e.addItem(i,300,300),i.setBackground(moon.Color.random,10);var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_CIRCLE,i.data={r:50,c:moon.Color.random},e.addItem(i,300,600),i.setBackground(moon.Color.random,10)},e.prototype.showScrollBar=function(t){var e=new moon.ScrollBar,i=new moon.Scale9Image("bg_jpg");e.target=i,e.setSize(400,400),e.layout(moon.Const.VERTICAL),this.addChild(e),e.x=e.y=100;var e=new moon.ScrollBar,i=new moon.Scale9Image("bg_jpg");e.target=i,e.setSize(400,400),e.layout(moon.Const.HORIZONTAL),this.addChild(e),e.x=100,e.y=550},e}(moon.MoonContainer);__reflect(MoonTest.prototype,"MoonTest");var MorePointTouch=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.displays=[],this.rect=this.createRect(100,100,16776960,100,100),this.circle=this.createCircle(50,16711680,350,350),this.rect.name="rect",this.circle.name="circle",this.displays.push(this.rect,this.circle),this.txt1=this.createText(0,0,"rect"),this.txt2=this.createText(0,40,"circle"),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},e.prototype.onTouch=function(t){var e=t.touchPointID,i=t.stageX,o=t.stageY;switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.controlStart(i,o,e);break;case egret.TouchEvent.TOUCH_MOVE:for(var n=0;n<this.displays.length;n++){var r=this.displays[n];r.id==e&&(r.x=i-r.distance.x,r.y=o-r.distance.y)}break;case egret.TouchEvent.TOUCH_END:for(var n=0;n<this.displays.length;n++){var r=this.displays[n];r.id==e&&("rect"==r.name?this.txt1.text="rect":"circle"==r.name&&(this.txt2.text="circle")),r.id=-1}}},e.prototype.controlStart=function(t,e,i){for(var o=0;o<this.displays.length;o++){var n=this.displays[o];n.hitTestPoint(t,e)&&(n.id=i,n.distance=new Point(t-n.x,e-n.y))}this.rect.hitTestPoint(t,e)&&(this.txt1.text="rect="+Math.random()),this.circle.hitTestPoint(t,e)&&(this.txt2.text="circle="+Math.random())},e}(moon.BasicView);__reflect(MorePointTouch.prototype,"MorePointTouch");var MorePointNode=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(Sprite);__reflect(MorePointNode.prototype,"MorePointNode");var MorePointTouch2=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),this.displays=[],this.rect=new MorePointNode2,this.circle=new MorePointNode2,this.addChild(this.rect),this.addChild(this.circle),this.circle.x=300,this.rect.name="rect",this.circle.name="circle",this.displays.push(this.rect,this.circle),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},e.prototype.onTouch=function(t){var e=t.touchPointID,i=t.stageX,o=t.stageY;switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.controlStart(i,o,e);break;case egret.TouchEvent.TOUCH_MOVE:for(var n=0;n<this.displays.length;n++){var r=this.displays[n];r.id==e&&(r.x=i-r.distance.x,r.y=o-r.distance.y)}break;case egret.TouchEvent.TOUCH_END:for(var n=0;n<this.displays.length;n++){var r=this.displays[n];r.id==e&&(r.id=-1)}}},e.prototype.controlStart=function(t,e,i){for(var o=0;o<this.displays.length;o++){var n=this.displays[o];n.hitTestPoint(t,e)&&(n.id=i,n.distance=new Point(t-n.x,e-n.y))}},e}(egret.DisplayObjectContainer);__reflect(MorePointTouch2.prototype,"MorePointTouch2");var MorePointNode2=function(t){function e(){var e=t.call(this)||this,i=new egret.Shape;return i.graphics.beginFill(65280),i.graphics.drawRect(0,0,200,200),i.graphics.endFill(),e.addChild(i),e}return __extends(e,t),e}(Sprite);__reflect(MorePointNode2.prototype,"MorePointNode2");var ReadJson=function(){function t(){this.init()}return t.prototype.init=function(){var t=RES.getRes("RoleIcon_json");for(var e in t){var i=t[e];for(var o in i)moon.showLog.getIns().logMessage(o+"="+i[o])}},t}();__reflect(ReadJson.prototype,"ReadJson");var TestView=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/askins/ScaleModeSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),moon.showLog.getIns().log("1.3");for(var e=[egret.StageScaleMode.EXACT_FIT,egret.StageScaleMode.FIXED_HEIGHT,egret.StageScaleMode.FIXED_NARROW,egret.StageScaleMode.FIXED_WIDE,egret.StageScaleMode.FIXED_WIDTH,egret.StageScaleMode.NO_BORDER,egret.StageScaleMode.NO_SCALE,egret.StageScaleMode.SHOW_ALL],i=0;i<e.length;i++){var o=new Button;o.label=e[i],o.x=200,o.y=100+50*i,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(o)}},e.prototype.onClick=function(t){this.stage.scaleMode=t.currentTarget.label,this.height=this.stage.stageHeight,this.width=this.stage.stageWidth},e}(eui.Component);__reflect(TestView.prototype,"TestView");var TestSkinClass=function(t){function e(){var e=t.call(this)||this;return e.setSkinName("../resource/askins/TestSkin.exml"),e}return __extends(e,t),e.prototype.render=function(){moon.showLog.getIns().setLogMessageColor(0);for(var t=0;t<this.numChildren;t++){var e=this.getChildAt(t);if(trace(e instanceof eui.Button,e.name,e.x,e.y),e instanceof eui.Group)for(var i=0;i<e.numChildren;i++){var o=e.getChildAt(i);trace("button=",o.x,o.y);var n=e.localToGlobal(o.x,o.y);trace(n.x,n.y)}}var n=this.group.globalToLocal(this.btn.x,this.btn.y);trace(n.x,n.y)},e}(BasicComponent);__reflect(TestSkinClass.prototype,"TestSkinClass");var TextTest=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=new moon.BasicTips("tips_png");t.y=10,t.setValue("这是一个TIPS测试\n换行接着测试"),this.addChild(t);var t=new moon.BasicTips("selected_png");t.side=60,t.setTextFlow([{text:"这是一个TIPS测试",style:{size:80,textColor:0}}]),this.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this);var e=new TextField;e.y=300,e.fontFamily="黑体";for(var i=["请先预留","10","个","材料","背包格子"],o=[16777215,16711680,16777215,3368601,16777215],n=[],r=0;r<i.length;r++)n.push({text:i[r],style:{textColor:o[r]}});e.textFlow=n,this.addChild(e);var s=new egret.TextField;s.width=400,s.x=10,s.y=100,s.textColor=0,s.size=20,s.fontFamily="微软雅黑",s.textAlign=egret.HorizontalAlign.CENTER,s.textFlow=[{text:"妈妈再也不用担心我在",style:{size:12}},{text:"Egret",style:{textColor:3368601,size:60,strokeColor:6724044,stroke:2}},{text:"里说一句话不能包含各种",style:{fontFamily:"楷体"}},{text:"五",style:{textColor:16711680}},{text:"彩",style:{textColor:65280}},{text:"缤",style:{textColor:15728880}},{text:"纷",style:{textColor:65535}},{text:"、\n"},{text:"大",style:{size:36}},{text:"小",style:{size:6}},{text:"不",style:{size:16}},{text:"一",style:{size:24}},{text:"、"},{text:"格",style:{italic:!0,textColor:65280}},{text:"式",style:{size:16,textColor:15728880}},{text:"各",style:{italic:!0,textColor:15757056}},{text:"样",style:{fontFamily:"楷体"}},{text:""},{text:"的文字了！"}],this.addChild(s);var a=new egret.TextField;a.x=a.y=350,a.width=480,a.textAlign=egret.HorizontalAlign.CENTER,a.textFlow=(new egret.HtmlTextParser).parser("<font size=12>妈妈再也不用担心我在</font><font color='#336699' size=60 strokecolor='#6699cc' stroke=2>Egret</font><font fontFamily='楷体'>里说一句话不能包含各种</font><font color=0xff0000>五</font><font color=0x00ff00>彩</font><font color=0xf000f0>缤</font><font color=0x00ffff>纷</font><font>、\n</font><font size=36>大</font><font size=6>小</font><font size=16>不</font><font size=24>一</font><font italic='true' color=0x00ff00>格</font><font size=16 color=0xf000f0>式</font><font i='true' color=0xf06f00>各</font><font fontFamily='楷体'><b>样</b></font><font blod='true'>的</font><font><i>文</i></font><font b='true'>字</font><font>了！</font>"),this.addChild(a)},e.prototype.onClick=function(t){t.type==egret.TouchEvent.TOUCH_BEGIN&&moon.TipsManager.getIns().simpleTips("一个小测试",new egret.Point(t.stageX,t.stageY))},e}(Sprite);__reflect(TextTest.prototype,"TextTest");var ArrayManager=function(){function t(){}return t.getRandomArray=function(t){for(var e=[],i=t.concat();i.length>0;){var o=Math.floor(Math.random()*i.length);e.push(i.splice(o,1)[0])}return e},t}();__reflect(ArrayManager.prototype,"ArrayManager");var MainTest=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e}return __extends(e,t),e.prototype.init=function(){moon.showLog.getIns().init(this.stage),moon.TipsManager.getIns().init(this.stage),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.init,this),this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight,this.moonTest()},e.prototype.maomaoJump=function(){this.addChild(new MaoMaoJump)},e.prototype.moonTest=function(){this.addChild(new MoonTest)},e.prototype.testDisplayDo=function(){this.addChild(new TestDisplayDo)},e.prototype.testHit=function(){this.addChild(new TestDisplayHit)},e.prototype.turnCard=function(){this.addChild(new TestCardTurn)},e.prototype.testSkinClass=function(){this.addChild(new TestSkinClass)},e.prototype.worldHandestGame=function(){this.addChild(new WorldHardestGame)},e.prototype.puzzle=function(){this.addChild(new Puzzle)},e.prototype.mainMvc=function(){this.addChild(new MainMvc)},e.prototype.scaleMode=function(){this.addChild(new TestView)},e.prototype.morePointTouch=function(){this.addChild(new MorePointTouch2)},e.prototype.text=function(){this.addChild(new TextTest)},e.prototype.control=function(){this.addChild(new ControlTest)},e.prototype.gameParkour=function(){this.addChild(new GameParkour)},e.prototype.p2Test=function(){this.addChild(new P2Camera)},e.prototype.readJson=function(){new ReadJson},e.prototype.astar=function(){this.addChild(new AStarTest)},e.prototype.moon=function(){var t=new egret.Rectangle(0,0,this.stageW,this.stageH),e=new egret.Rectangle(10,200,20,200),i=new moon.MapHorizontalHouse(t,e,0);this.addChild(i);var t=new egret.Rectangle(0,0,this.stageW,this.stageH),e=new egret.Rectangle(10,100,40,100),i=new moon.MapHorizontalHouse(t,e);this.addChild(i)},e}(egret.DisplayObjectContainer);__reflect(MainTest.prototype,"MainTest");var draw;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"randomColor",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),t.getRect=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=new egret.Sprite;return r.graphics.beginFill(i),r.graphics.drawRect(o,n,t,e),r.graphics.endFill(),r},t.getRectAndX=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=this.getRect(t,e,i,o,n),s=new egret.Sprite;s.graphics.lineStyle(.1),s.graphics.moveTo(0,0),s.graphics.lineTo(t,e);var a=new egret.Sprite;return a.graphics.lineStyle(.1),a.graphics.moveTo(t,0),a.graphics.lineTo(0,e),r.addChild(s),r.addChild(a),r},t.getRoundRect=function(t,e,i,o,n,r,s){void 0===i&&(i=0),void 0===o&&(o=5),void 0===n&&(n=5),void 0===r&&(r=0),void 0===s&&(s=0);var a=new egret.Sprite;return a.graphics.beginFill(i),a.graphics.drawRoundRect(r,s,t,e,o,n),a.graphics.endFill(),a},t.getCircle=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0);var n=new egret.Sprite;return n.graphics.beginFill(e),n.graphics.drawCircle(i,o,t),n.graphics.endFill(),n},t.getPolygon=function(t,e,i,o){void 0===t&&(t=3),void 0===e&&(e=10),void 0===i&&(i=0),void 0===o&&(o=0);var n=new egret.Sprite;n.rotation=o,n.graphics.beginFill(i);for(var r=0;t>=r;r++){var s=Math.cos(r*(360/t)*Math.PI/180)*e,a=Math.sin(r*(360/t)*Math.PI/180)*e;0==r?n.graphics.moveTo(s,a):n.graphics.lineTo(s,a)}return n.graphics.endFill(),n},t.getArrowRoundRect=function(t,e,i,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var r=new egret.Sprite;r.addChild(this.getRoundRect(t,e,i));var s=this.getPolygon(3,t/3,o,30+n);return s.x=r.width>>1,s.y=r.height>>1,r.addChild(s),r},t.getScrollLineBar=function(t,e,i){for(var o=new egret.Sprite,n=e/3,r=0;3>r;r++){var s=this.getRect(t,1,i,0,r*n);o.addChild(s)}return o},t.getAddRoundRect=function(t,e,i){var o=new egret.Sprite;o.addChild(this.getRoundRect(t,e,i));var n=this.getRect(t/2,2,0,t/4,e/2-1),r=this.getRect(2,e/2,0,t/2-1,e/4);return o.addChild(n),o.addChild(r),o},t.getRemoveRoundRect=function(t,e,i){var o=new egret.Sprite;o.addChild(this.getRoundRect(t,e,i));var n=this.getRect(t/2,2,0,t/4,e/2-1);return o.addChild(n),o},t.getRoundRectText=function(t,e,i,o){void 0===o&&(o="click");var n=new egret.Sprite;n.addChild(this.getRoundRect(t,e,i));var r=new egret.TextField;return r.text=o,r.x=n.width-r.width>>1,r.y=n.height-r.height>>1,n.addChild(r),n},t.getCheckBoxRect=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var o=new egret.Sprite;if(o.addChild(this.getRect(20,20,t)),1==i){var n=new egret.Sprite;n.graphics.beginFill(e),n.graphics.moveTo(0,10),n.graphics.lineTo(10,18),n.graphics.lineTo(22,4),n.graphics.lineTo(18,0),n.graphics.lineTo(10,9),n.graphics.lineTo(6,4),n.graphics.lineTo(0,10),o.addChild(n)}return o},t.getRadioCircle=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var o=new egret.Sprite;if(o.addChild(this.getCircle(9,t,9,9)),1==i){var n=this.getCircle(5,e,9,9);o.addChild(n)}return o},t.getGridding=function(t,e){void 0===e&&(e=0);var i=new egret.Sprite;i.graphics.lineStyle(.1,e);for(var o=t.width/t.x,n=t.height/t.y,r=0;r<t.x;r++)i.graphics.moveTo(0,r*n),i.graphics.lineTo(t.width,r*n);for(r=0;r<t.y;r++)i.graphics.moveTo(r*o,0),i.graphics.lineTo(r*o,t.height);return i},t}();t.BasicUI=e,__reflect(e.prototype,"draw.BasicUI")}(draw||(draw={}));var control;!function(t){var e=function(){function t(t,e,i){void 0===i&&(i=null),this.vx=0,this.vy=0,this.prevX=0,this.prevY=0,this.leftTop=.25,this.rightBottom=.75,this.layers=new Array,this.anchorPoint=new egret.Point(1,1),this.target=t,this.screen=e,this.cameraRect=i,this.setBoundary(this.leftTop,this.rightBottom),this.screenWidth=e.width,this.screenHeight=e.height}return t.prototype.setBoundary=function(t,e){this.leftTop=t,this.rightBottom=e,this.leftBoundary=this.cameraRect.width*this.leftTop,this.topBoundary=this.cameraRect.height*this.leftTop,this.rightBoundary=this.cameraRect.width*this.rightBottom,this.bottomBoundary=this.cameraRect.height*this.rightBottom},t.prototype.setScreen=function(t){this.screen=t,this.screenWidth=t.width,this.screenHeight=t.height},t.prototype.setTarget=function(t){this.target=t,this.prevX=this.target.x,this.prevY=this.target.y},t.prototype.setTargetAnchor=function(t){this.anchorPoint=t},t.prototype.addLayer=function(t){this.layers.push(t)},t.prototype.drawBoundary=function(t){void 0===t&&(t=16711680);var e=new egret.Sprite;return e.graphics.lineStyle(1,t),e.graphics.beginFill(0,0),e.graphics.drawRect(this.leftBoundary,this.topBoundary,this.rightBoundary-this.leftBoundary,this.bottomBoundary-this.topBoundary),e},t.prototype.move=function(){if(this.vx=this.target.x-this.prevX,this.vy=this.target.y-this.prevY,this.prevX=this.target.x,this.prevY=this.target.y,0!=this.vx||0!=this.vy){var t=this.target.parent.localToGlobal(this.target.x,this.target.y),e=this.target.width*this.anchorPoint.x,i=this.target.height*this.anchorPoint.y;this.vx>0?(t.x+e>this.rightBoundary&&(this.screen.x-=this.vx),this.screen.x<this.cameraRect.width-this.screenWidth&&(this.screen.x=this.cameraRect.width-this.screenWidth)):this.vx<0&&(t.x<this.leftBoundary&&(this.screen.x-=this.vx),this.screen.x>this.cameraRect.x&&(this.screen.x=this.cameraRect.x)),this.vy>0?(t.y+i>this.bottomBoundary&&(this.screen.y-=this.vy),this.screen.y<this.cameraRect.height-this.screenHeight&&(this.screen.y=this.cameraRect.height-this.screenHeight)):this.vy<0&&(t.y<this.topBoundary&&(this.screen.y-=this.vy),this.screen.y>this.cameraRect.y&&(this.screen.y=this.cameraRect.y)),this.moveLayer()}},t.prototype.moveLayer=function(){for(var t=this.layers.length,e=0;t>e;e++){var i=this.layers[e];i.x=this.screen.x*((i.width-this.cameraRect.width)/(this.screen.width-this.cameraRect.width)),i.y=this.screen.y*((i.height-this.cameraRect.height)/(this.screen.height-this.cameraRect.height))}},t}();t.Camera2D=e,__reflect(e.prototype,"control.Camera2D")}(control||(control={}));var control;!function(t){var e=function(){function t(t){this.stage=t}return t.prototype.open=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},t.prototype.close=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},t.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.posStart=new egret.Point(t.stageX,t.stageY),this.controlStart();break;case egret.TouchEvent.TOUCH_MOVE:this.posMove=new egret.Point(t.stageX,t.stageY),this.controlMove();break;case egret.TouchEvent.TOUCH_END:this.posEnd=new egret.Point(t.stageX,t.stageY),this.controlEnd()}},t.prototype.controlStart=function(){null!=this.startBackFun&&this.startBackFun(this.posStart),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},t.prototype.controlMove=function(){null!=this.moveBackFun&&this.moveBackFun(this.posMove)},t.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},t}();t.ControlBasic=e,__reflect(e.prototype,"control.ControlBasic");var i=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n.controlBar=i,n.controlBg=o,n}return __extends(e,t),e.prototype.controlMove=function(){var t=this.posMove.x,e=this.posMove.y,i=this.controlBg,o=this.controlBar,n=i.x,r=i.y,s=t-n,a=e-r,h=Math.sqrt(s*s+a*a),c=i.width>>1,l=s/h,d=a/h;if(c>h?(o.x=t,o.y=e):(o.x=n+l*c,o.y=r+d*c),null!=this.moveBackFun){var p=new egret.Point(o.x-i.x,o.y-i.y);this.moveBackFun(p)}},e.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this);var t=this.controlBg,e=this.controlBar;e.x=t.x,e.y=t.y,null!=this.endBackFun&&this.endBackFun(this.posEnd)},e}(e);t.ControlBarMove=i,__reflect(i.prototype,"control.ControlBarMove");var o=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this);var t=this.posEnd.x-this.posStart.x,e=this.posEnd.y-this.posStart.y,i=new egret.Point(0,0);Math.abs(t)>Math.abs(e)?i.x=t>0?1:-1:i.y=e>0?1:-1,null!=this.endBackFun&&this.endBackFun(this.posEnd),null!=this.moveEndBackFun&&this.moveEndBackFun(i)},e}(e);t.ControlFingerMove=o,__reflect(o.prototype,"control.ControlFingerMove");var n=function(t){function e(e,i){var o=t.call(this,e)||this;return o.display=i,o.distance=new egret.Point,o}return __extends(e,t),e.prototype.controlStart=function(){t.prototype.controlStart.call(this),this.distance.x=this.posStart.x-this.display.x,this.distance.y=this.posStart.y-this.display.y},e.prototype.controlMove=function(){t.prototype.controlMove.call(this),this.display.x=this.posMove.x-this.distance.x,this.display.y=this.posMove.y-this.distance.y},e}(e);t.ControlDrag=n,__reflect(n.prototype,"control.ControlDrag");var r=function(t){function e(e,i){var o=t.call(this,e)||this;o.nodes=[];for(var n=0;n<i.length;n++){var r=i[n],a=new s(r.display,r.backCall);o.nodes.push(a)}return o}return __extends(e,t),e.prototype.onTouch=function(e){this.id=e.touchPointID,t.prototype.onTouch.call(this,e)},e.prototype.check=function(t,e,i){for(var o=this.nodes,n=0;n<o.length;n++){var r=o[n];1==i?r.display.hitTestPoint(t,e)&&(r.id=this.id,r.backCall(i)):r.id==this.id&&(r.id=-1,r.backCall(i))}},e.prototype.controlStart=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.check(this.posStart.x,this.posStart.y,1)},e.prototype.controlEnd=function(){t.prototype.controlEnd.call(this),this.check(this.posEnd.x,this.posEnd.y,0)},e}(e);t.ControlMoreTab=r,__reflect(r.prototype,"control.ControlMoreTab");var s=function(){function t(t,e){this.display=t,this.backCall=e}return t}();t.MorePointNode=s,__reflect(s.prototype,"control.MorePointNode")}(control||(control={}));var CardTurn=function(t){function e(i,o){var n=t.call(this)||this;return n.cardFront=i,n.cardBack=o,n.setStatus(e.CARD_FRONT),n}return __extends(e,t),e.prototype.setStatus=function(t){this.status=t,this.show()},e.prototype.isFront=function(){return this.status==e.CARD_FRONT},e.prototype.turn=function(t){void 0===t&&(t=100),1==this.scaleX&&(this.tween=egret.Tween.get(this),this.tween.to({scaleX:0},t),this.tween.call(this.call1,this),this.tween.wait(10).to({scaleX:1},t),this.tween.call(this.call2,this))
},e.prototype.call1=function(){this.status=this.status==e.CARD_FRONT?e.CARD_BACK:e.CARD_FRONT,this.setStatus(this.status)},e.prototype.call2=function(){egret.Tween.removeTweens(this),null!=this.onTurnComplete&&this.onTurnComplete()},e.prototype.show=function(){this.removeChildren(),this.status==e.CARD_FRONT?this.addChild(this.cardFront):this.addChild(this.cardBack)},e.CARD_FRONT="front",e.CARD_BACK="back",e}(egret.DisplayObjectContainer);__reflect(CardTurn.prototype,"CardTurn");var EventManager=function(){function t(){}return t.addEvent=function(t,e,i){null==this.eventList[t]&&(this.eventList[t]=[]);var o=this.eventList[t].length;this.eventList[t][o]={fun:e,"this":i}},t.removeEvent=function(t,e,i){var o=this.eventList[t];if(null!=o)for(var n in o){var r=o;r.fun==e&&o.splice(n,1)}},t.dispatchEvent=function(t,e){var i=this.eventList[t];if(i)for(var o=0;o<i.length;o++){var n=i;n.fun.apply(n["this"],[e])}},t.hasEvent=function(t){var e=this.eventList[t];return e?!0:!1},t.gc=function(){},t.eventList={},t}();__reflect(EventManager.prototype,"EventManager");var HitManager=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.hitTestRect=function(t,e){var i=t.getBounds(),o=e.getBounds();return i.intersects(o)},e}(egret.HashObject);__reflect(HitManager.prototype,"HitManager");var LayoutManager=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.displayRank=function(t,e,i,o,n,r,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=1);for(var a,h=0;h<t.length;h++)a=t[h],a.x=n+Math.floor(h%e)*(a.width+i)*s,a.y=r+Math.floor(h/e)*(a.height+o)*s},e.displayRankPart=function(t,i,o,n){void 0===o&&(o=null),void 0===n&&(n=1);var r,s,a,h,c,l,d;r=i[0],a=i[1],h=i[2],c=i[3],l=i[4],d=i[5];var p=t.slice(0,r);if(e.displayRank(p,a,h,c,l,d,n),o){s=o[0],a=o[1],h=o[2],c=o[3],l=o[4],d=o[5];var u=t.slice(r,r+s);e.displayRank(u,a,h,c,l,d,n)}},e.displayCircle=function(t,e,i,o,n,r,s,a,h,c){void 0===n&&(n=2*Math.PI),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===c&&(c=0);var l,d=t.length,p=n/d;n<2*Math.PI&&(p=n/(d-1));for(var u=0;d>u;u++)l=t[u],l.x=e+Math.cos(p*u-r)*(o+h)+s,l.y=i+Math.sin(p*u-r)*(o+c)+a},e.displayPolygon=function(t,e,i,o,n,r){if(void 0===o&&(o=100),void 0===n&&(n=5),void 0===r&&(r=0),3>n||n>t.length)return void console.log("多边形的边数不正确");for(var s,a=t.length,h=2*Math.PI/n,c=Math.floor(a/n),l=0;n>l;l++){var d=e+Math.cos(l*h-r)*o,p=i+Math.sin(l*h-r)*o,u=l+1;u=u==n?0:u;for(var g=e+Math.cos(u*h-r)*o,v=i+Math.sin(u*h-r)*o,f=0;c>f;f++){var y=f+c*l;a>y&&(s=t[y],s.x=d,s.y=p,s.x+=(g-d)/c*f,s.y+=(v-p)/c*f)}}},e.displayTrigon=function(t,e,i,o,n,r,s){function a(){var u=0,g=p.length;g>1&&s&&(u=(g-1)*(h.width+e)/-2*r);for(var v=0;g>v;v++)h=p[v],h.x=o+v*(h.width+e)*r+u,h.y=n+(d-1)*(h.height+i)*r;d++,c=l,l=c+d,p=t.slice(c,l),l<=t.length+c&&a()}void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===s&&(s=!0);var h,c=0,l=1,d=1,p=t.slice(c,l);a()},e.displayWall=function(t,e,i,o,n,r,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=10);for(var a,h=0;h<t.length;h++){var c=Math.floor(h/e)%2==0?s:0;a=t[h],a.x=n+Math.floor(h%e)*(a.width+i)+c,a.y=r+Math.floor(h/e)*(a.height+o)}},e.displayRankX=function(t,e,i,o,n){void 0===e&&(e=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);for(var r,s=t.length,a=0,h=0;s>h;h++){r=t[h];r.width;r.y=n,r.x=a,a=r.x+(r.width+i)}},e}(egret.HashObject);__reflect(LayoutManager.prototype,"LayoutManager");var utils;!function(t){var e=function(){function t(){this.objPoolDict={}}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.push=function(t){var e=egret.getQualifiedClassName(t);null!=t&&(null==this.objPoolDict[e]&&(this.objPoolDict[e]=[]),this.objPoolDict[e].push(t))},t.prototype.pop=function(t){var e=egret.getQualifiedClassName(t);if(this.getHas(t))return this.objPoolDict[e].pop();var i=egret.getDefinitionByName(e),o=new i;return o},t.prototype.getHas=function(t){var e=egret.getQualifiedClassName(t);return null!=this.objPoolDict[e]&&this.objPoolDict[e].length>0?!0:!1},t}();t.ObjectPool=e,__reflect(e.prototype,"utils.ObjectPool")}(utils||(utils={}));var P2World=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=t.call(this)||this;return o.colors=[10],o.removeBodys=[],o.world=new p2.World({gravity:[e,i]}),o.colors[p2.Body.DYNAMIC]=16711680,o.colors[p2.Body.KINEMATIC]=65280,o.colors[p2.Body.STATIC]=255,o.addEventListener(egret.Event.ENTER_FRAME,o.updateWorld,o),o.txtWarn=new egret.TextField,o}return __extends(e,t),Object.defineProperty(e.prototype,"p2World",{get:function(){return this.world},enumerable:!0,configurable:!0}),e.prototype.getBody=function(t,e){void 0===t&&(t=0),void 0===e&&(e=p2.Body.DYNAMIC);var i=new p2.Body({mass:t});return i.type=e,i.userData={},i},e.prototype.createWall=function(t){this.createPlane(0,0,0),this.createPlane(-Math.PI/2,0,0),this.createPlane(Math.PI,0,t.height),this.createPlane(Math.PI/2,t.width,0)},e.prototype.createPlane=function(t,e,i){void 0===t&&(t=Math.PI);var o=new p2.Plane,n=this.getBody(0,p2.Body.STATIC);return n.addShape(o),n.angle=t,n.position[0]=e,n.position[1]=i,this.world.addBody(n),n},e.prototype.createCircleBodyShape=function(t,e){void 0===e&&(e=p2.Body.DYNAMIC);var i=this.getBody(10,e),o=new p2.Circle({radius:t});return i.addShape(o),this.world.addBody(i),i},e.prototype.createBoxBodyShape=function(t,e,i,o){void 0===i&&(i=p2.Body.DYNAMIC),void 0===o&&(o=0);var n=this.getBody(10,i),r=new p2.Box({width:t,height:e});return n.addShape(r),n.angle=o,this.world.addBody(n),n},e.prototype.createConvexBodyShape=function(t,e){void 0===e&&(e=p2.Body.DYNAMIC);var i=this.getBody(10,e);return i.fromPolygon(t,{optimalDecomp:!1}),this.world.addBody(i),i},e.prototype.createPolygon=function(t,e,i){void 0===t&&(t=3),void 0===e&&(e=30),void 0===i&&(i=p2.Body.DYNAMIC);for(var o=(this.getBody(10,i),[]),n=0;t>n;n++){var r=Math.cos(n*(360/t)*Math.PI/180)*e,s=Math.sin(n*(360/t)*Math.PI/180)*e;o.push([r,s])}return this.createConvexBodyShape(o,i)},e.prototype.createBoxCircleBodyShape=function(t,e,i){void 0===i&&(i=p2.Body.DYNAMIC);var o=this.getBody(10,i);o.fixedRotation=!0,t/=2,e/=1.5;var n=new p2.Box({width:t,height:e}),r=new p2.Circle({radius:t/2});return o.addShape(n),o.addShape(r),n.position[1]=-e,r.position[1]=-t/2,this.world.addBody(o),o},e.prototype.drawSkin=function(t){var e=new egret.Sprite,i=this.colors[t.type];e.graphics.lineStyle(1,i,1),e.graphics.beginFill(i,.5);for(var o=0;o<t.shapes.length;o++){var n=t.shapes[o],r=new egret.Point(n.position[0],n.position[1]);if(n instanceof p2.Box){var s=n.width,a=n.height,h=s/2,c=a/2;e.graphics.moveTo(r.x,r.y),e.graphics.lineTo(r.x-h,r.y-c),e.graphics.drawRect(r.x-h,r.y-c,s,a),e.graphics.endFill()}else if(n instanceof p2.Convex){var l=n.vertices,d=l.length,p=l[0];e.graphics.moveTo(0,0),e.graphics.lineTo(p[0],p[1]);for(var u=0;d>u;u++)p=l[u],0==u?e.graphics.moveTo(p[0],p[1]):e.graphics.lineTo(p[0],p[1]);var p=l[0];e.graphics.lineTo(p[0],p[1]),e.graphics.endFill()}else if(n instanceof p2.Circle){var g=n.radius;e.graphics.moveTo(r.x,r.y),e.graphics.lineTo(r.x,g+r.y),e.graphics.drawCircle(r.x,r.y,g),e.graphics.endFill()}}return e.x=t.position[0],e.y=t.position[1],t.userData.skin=e,this.addChild(e),e},e.prototype.updateWorld=function(t){var e=1/60,i=this.removeBodys;this.world.step(e);for(var o=this.world.bodies,n=o.length,r=0;n>r;r++){var s=o[r];if(s.userData&&s.userData.skin){var a=s.userData.skin;a.x=s.position[0],a.y=s.position[1],a.rotation=180*s.angle/Math.PI}else s.shapes[0]instanceof p2.Plane||(this.txtWarn.x=this.txtWarn.y=200,this.addChild(this.txtWarn),this.txtWarn.text="警告：有刚体没有设置皮肤")}for(r=0;r<i.length;r++)s=i[r],s.userData&&s.userData.skin&&(a=s.userData.skin,null!=a.parent&&a.parent.removeChild(a),s.userData=null),this.world.removeBody(s);null!=this.loopBackFun&&this.loopBackFun()},e}(egret.DisplayObjectContainer);__reflect(P2World.prototype,"P2World");var SoundControl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sounds={},e.channels={},e.volumeBg=1,e.volumeEffect=1,e.isNoVolume=1,e}return __extends(e,t),e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.checkSoundIsBg=function(t,e){return t[e+"-bg"]},e.prototype.addItem=function(t,e){void 0===e&&(e=!1);var i=t;if(e&&(i=t+"-bg"),!this.sounds[i]){var o=RES.getRes(t);this.sounds[i]=o}},e.prototype.play=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1);var o=this.volumeEffect;if(this.checkSoundIsBg(this.sounds,t)&&(t+="-bg",o=this.volumeBg),this.sounds[t]){var n=this.sounds[t];this.channels[t]=n.play(e,i),0==this.isNoVolume?this.channels[t].volume=0:this.channels[t].volume=o}},e.prototype.stop=function(t){if(this.checkSoundIsBg(this.channels,t)&&(t+="-bg"),this.channels[t]){var e=this.channels[t];e.stop()}},e.prototype.setVolume=function(t,e){if(this.checkSoundIsBg(this.channels,t)&&(t+="-bg"),this.channels[t]){var i=this.channels[t];i.volume=e}},e.prototype.setBgVolume=function(t){for(var e in this.channels)if(2==e.split("-bg").length){var i=this.channels[e];this.volumeBg=t,0!=i.position&&(i.volume=t)}},e.prototype.setEffectVolume=function(t){for(var e in this.channels)if(1==e.split("-bg").length){var i=this.channels[e];this.volumeEffect=t,0!=i.position&&(i.volume=t)}},e.prototype.setIsNoVolume=function(t){this.isNoVolume=t;for(var e in this.channels){var i=this.channels[e];0!=i.position&&(0==t?i.volume=0:this.checkSoundIsBg(this.sounds,e)?i.volume=this.volumeBg:i.volume=this.volumeEffect)}},e}(egret.HashObject);__reflect(SoundControl.prototype,"SoundControl");var Uinfy=function(){function t(){}return t.as=function(t,e){return t instanceof e},t.as2=function(t,e){return typeof t===e},t.show=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(t.as(e[0],Array))for(var o=0;o<e[0].length;o++)e[0][o].visible=!0;else for(o=0;o<e.length;o++)e[o].visible=!0},t.hide=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(t.as(e[0],Array))for(var o=0;o<e[0].length;o++)e[0][o].visible=!1;else for(o=0;o<e.length;o++)e[o].visible=!1},t.hideShowNum=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=-1),o=-1==o?t.length:o;for(var n=i;o>n;n++)t[n].visible=e},t.createBitmapByName=function(t,e){void 0===e&&(e=null);var i=new egret.Bitmap,o=RES.getRes(t);return i.texture=o,null!=e&&(i.scale9Grid=e),i},t.imageSetGray=function(t,e){e?t.filters=[new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])]:t.filters=[]},t}();__reflect(Uinfy.prototype,"Uinfy");